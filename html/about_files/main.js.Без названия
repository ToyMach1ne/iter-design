//feedback
//jQuery(document).ready(function(){
//    jQuery("#js-feedback-container").hide();
//    jQuery(".js-tel").click(function() {
//        jQuery("#js-feedback-container").fadeToggle();
//    });
// });


// home hex url delete
jQuery(document).ready(function() {
    jQuery("#post-1 a").attr("href", "/campaigns/"),
    jQuery("#post-99 a").attr("href", "/news/"),
    jQuery("#post-96 a").attr("href", "/new-portfolio/"),
    jQuery("#post-94 a").attr("href", "/services/"),
    jQuery("#post-59 a").attr("href", "/news/"),
    jQuery("#post-49 a").attr("href", "/campaigns/");
    jQuery("#post-529 a").attr("href", "/campaigns/");
});


// удаляем ссылки категорий на главной странице
jQuery(document).ready(function() {
    jQuery("#js-category-link a").removeAttr("href");
});



// заглушка для портфолио счётчик
jQuery(document).ready(function() {
    jQuery("#post-96 #portfolio-count").text ("384");
});

function sendMailMessage () {
    if (jQuery('#date-to-visit input[name="date-visit"]').val()){
        jQuery.fancybox({
            content:'<div class="mail-ok-message-taxi">Спасибо. Ваше сообщение отправлено, мы свяжемся с вами в течение 30 минут в рабочее время для уточнения времени посещения вами нашего офиса и подтверждения заказа такси</div>'
        });
        setTimeout(function(){
            jQuery.fancybox.close();
        },8000)
    }else {
        jQuery.fancybox({
            content:'<div class="mail-ok-message">Спасибо. Ваше сообщение отправлено, мы свяжемся с вами в течение 30 минут в рабочее время</div>'
        });
        setTimeout(function(){
            jQuery.fancybox.close();
        },5000)
    }
    
    
}
// названия категорий портфолио
jQuery(document).ready(function() {
    jQuery("#post-13 .portfolio-category.nezhilye-interery").text("Нежилые интерьеры");
    jQuery("#post-13 .portfolio-category.zhilye-interery").text("Жилые интерьеры");
    jQuery("#post-13 .portfolio-category.dekorirovanie").text("Декорирование");
    jQuery("#post-13 .portfolio-category.oformlenie-tc").text("Оформление ТЦ");
    jQuery("#post-13 .portfolio-category.rospis-interera").text("Роспись интерьера");
    jQuery("#post-13 .portfolio-category.remont").text("Ремонт");
});


// портфолио затухание шестиугольника
var $portfolioItem = jQuery(".nimble-portfolio-item");
jQuery(".nimble-portfolio-text").hide();

jQuery(document).ready(function() {
    $portfolioItem.mouseenter(function() {
        jQuery(this).find(".nimble-portfolio-text").fadeIn(300);
    });

    $portfolioItem.mouseleave(function() {
        jQuery(this).find(".nimble-portfolio-text").fadeOut(300);
    });
    jQuery('input[name="your-name"].wpcf7-form-control').keyup( function() {
        var this_input = jQuery(this);
        if(this_input.val().length > 40)
            this_input.val(this_input.val().substr(0, 40));           
        });
    jQuery('input[type="tel"]').mask("+7(999)999-99-99");
});


// определяем мобильник
function is_touch_device() {
 return (('ontouchstart' in window)
      || (navigator.MaxTouchPoints > 0)
      || (navigator.msMaxTouchPoints > 0));
}

if (is_touch_device()) {
    jQuery('html').addClass('mobile');
}


//
jQuery(document).ready(function() {
    jQuery(".js-project").hide();
    jQuery(".ссылки").hide();
    ////////help_page///////
    jQuery('#taxi-radio input[type="radio"]').change(function(e){
        if(jQuery(this).prop('checked')){
            jQuery('#date-to-visit').fadeIn();
        }
    })
});


// script меню для портфолио
var $menuShow = jQuery(".menu > li > .sub-menu");

jQuery(document).ready(function() {
    jQuery(".menu > li > a").removeAttr("href");

    $menuShow.find('.menu-item-has-children > a').click(function(e){
        e.preventDefault();

    jQuery(this).toggleClass("menu-arrow-close");
         jQuery(e.currentTarget).siblings('.sub-menu').toggleClass("menu-show");
    });

    jQuery(".form-captcha").attr({"placeholder":"Введите код с картинки"});

    jQuery(".js-faq__header").click(function(){
        jQuery(this).children(".js-faq__icon").toggleClass("triangle-top triangle-bottom");
        jQuery(this).parent().children(".js-faq__content").slideToggle(300);
        return false;
    });

    //
    jQuery(".postid-4387 .portfolio-single-title").replaceWith(function(index, oldHTML){
        return jQuery("<h1 class='portfolio-single-title'>").html(oldHTML);
    });

    //
    jQuery(".page-template .entry-header").remove();
    jQuery(".page-id-4868 .entry-header").remove();

    //
    jQuery(".leaflet-control-attribution").remove();
});

// стилизуем чекбоксы и радиобаттоны
jQuery('input[type="radio"]:not(".rating-radio"), input[type="checkbox"]').ionCheckRadio();

(function($) {
    jQuery(function() {
        jQuery('input[type="file"]').styler();
    });
})(jQuery);


jQuery(function() {
  jQuery('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
      var target = jQuery(this.hash);
      target = target.length ? target : jQuery('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        jQuery('html,body').animate({
          scrollTop: target.offset().top
        }, 1000);
        return false;
      }
    }
  });
});

// counter
jQuery("#wpcf7-f335-p17-o1 .wpcf7-submit").attr({ "onClick":"yaCounter21716836.reachGoal('Menu_kontakti_otpravka');ga('send', 'event', 'Menu_kontakti_otpravka', 'Click')" });
jQuery("#wpcf7-f4821-p4815-o1 .wpcf7-submit").attr({ "onClick":"yaCounter21716836.reachGoal('Menu_zakazat_otpravka');ga('send', 'event', 'Menu_zakazat_otpravka', 'Click')" });
jQuery("#wpcf7-f1928-p5207-o1 .wpcf7-submit").attr({ "onClick":"yaCounter21716836.reachGoal('Zayavka_remont_otpravka');ga('send', 'event', 'Zayavka_remont_otpravka', 'Click')" });
jQuery("#wpcf7-f1928-p5101-o1 .wpcf7-submit").attr({ "onClick":"yaCounter21716836.reachGoal('Zayavka_design_otpravka');ga('send', 'event', 'Zayavka_design_otpravka', 'Click')" });
jQuery("#wpcf7-f1928-p674-o1 .wpcf7-submit").attr({ "onClick":"yaCounter21716836.reachGoal('Zayavka_dekorirovanie_otpravka');ga('send', 'event', 'Zayavka_dekorirovanie_otpravka', 'Click')" });

// remove 4 news
jQuery(".interesting-news__item:nth-of-type(4)").remove();

/* activate sidebar */
jQuery('.likebar').affix({
    offset: {
        top: 340,
        bottom: function () {
            return (this.bottom = jQuery('.js-interesting-news').outerHeight(true) + 300);
        }
    }
});

/* activate scrollspy menu */
var $body   = jQuery(document.body);
var navHeight = jQuery('#header').outerHeight(true) + 10;

$body.scrollspy({
    target: '.likebar',
    offset: navHeight
});


jQuery(".js-portfolio-img").each(function(){
    jQuery(".js-portfolio-img").load(function(){
        var width  = this.width;
        var height = this.height;

        var $this = jQuery(this);


        if(width > height) {
            $this.addClass("new-portfolio-room__landscape");
        } else {
            $this.addClass("new-portfolio-room__portrait");
        }
    });
});

jQuery(".new-portfolio-desc").each(function(){
    if( jQuery(this).text().length > 0 ) {

    } else {
        var curTitle = jQuery(".new-portfolio-title");

        curTitle.find(function(){
            jQuery(this).hide();
        });

        jQuery(this).addClass("test");
    }
});


