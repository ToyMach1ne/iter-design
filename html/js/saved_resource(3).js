!function(t,e){function n(t,e,n){r.ajax(t,{method:"POST",data:r.ensureQueryString(e),complete:n})}function i(t,e){return t.replace("/vi","/")+s[e]}var o=t.uLiB,r=o.util,s={offline_request:"api/add_offline_message/"},a={__commands:["addOfflineRequest"],init:function(){r.Queue.registerAndProcess(this.__commands,this,!0)},request:function(t,e,o){var s=Comagic.getCredentials(),a=r.filterObjectByFn(e,r.isUndefined),l=i(s.consultant_server_url,t);a=r.apply(a,s),n(l,a,o)},addOfflineRequest:function(t,e,n){this.request("offline_request",{email:t.email,name:t.name,phone:t.phone,text:t.message,is_sale:t.is_sale,sale_cost:t.sale_cost,is_custom:!!e},n)}};r.apply(r.ns(e),{Http:a}),r.Queue.push("waitForTrackViewAndRun",function(){a.init()})}(window,"ComagicWidget.widget.common");var JSON;JSON||(JSON={}),function(){function str(t,e){var n,i,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var t=document,e=window,n={},i=function(){};i.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var i=this._listeners[t];n.arrIndexOf(i,e)===-1&&i.push(e)},i.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var i=this._listeners[t],o=n.arrIndexOf(i,e);return o!==-1?void(i.length>1?this._listeners[t]=i.slice(0,o).concat(i.slice(o+1)):delete this._listeners[t]):void 0}},i.prototype.dispatchEvent=function(t){var e=t.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,n),this._listeners&&e in this._listeners)for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].apply(this,n)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var n=this[e];"function"==typeof n&&(n="[function]"),t.push(e+"="+n)}return"SimpleEvent("+t.join(", ")+")"};var r=function(t){var e=this;e._events=t||[],e._listeners={}};r.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var n=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,n),t in e._listeners)for(var i=0;i<e._listeners[t].length;i++)e._listeners[t][i].apply(e,n)}},r.prototype.on=function(t,e){var n=this;n._verifyType(t),n._nuked||(t in n._listeners||(n._listeners[t]=[]),n._listeners[t].push(e))},r.prototype._verifyType=function(t){var e=this;n.arrIndexOf(e._events,t)===-1&&n.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},r.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var s="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(t,e){e=e||s.length;var n,i=[];for(n=0;n<t;n++)i.push(s.substr(Math.floor(Math.random()*e),1));return i.join("")},n.random_number=function(t){return Math.floor(Math.random()*t)},n.random_number_string=function(t){var e=(""+(t-1)).length,i=Array(e+1).join("0");return(i+n.random_number(t)).slice(-e)},n.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},n.isSameOriginUrl=function(t,n){return n||(n=e.location.href),t.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},n.objectExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var a="_jp";n.polluteGlobalNamespace=function(){a in e||(e[a]={})},n.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},n.userSetCode=function(t){return 1e3===t||t>=3e3&&t<=4999},n.countRTO=function(t){var e;return e=t>100?3*t:t+200},n.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},n.flatUrl=function(t){return t.indexOf("?")===-1&&t.indexOf("#")===-1},n.amendUrl=function(e){var i=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!n.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=i.protocol+e),0===e.indexOf("/")&&(e=i.protocol+"//"+i.host+e),e=e.replace(/[\/]+$/,"")},n.arrIndexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.arrSkip=function(t,e){var i=n.arrIndexOf(t,e);if(i===-1)return t.slice();var o=t.slice(0,i);return o.concat(t.slice(i+1))},n.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},n.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var l,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","\ufeff":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},p=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(t){return c.lastIndex=0,c.test(t)&&(t=t.replace(c,function(t){return u[t]})),'"'+t+'"'},h=function(t){var e,n={},i=[];for(e=0;e<65536;e++)i.push(String.fromCharCode(e));return t.lastIndex=0,i.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n};n.quote=function(t){var e=d(t);return p.lastIndex=0,p.test(e)?(l||(l=h(p)),e.replace(p,function(t){return l[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var n=f[e];t[n]=S[n]&&S[n].enabled()}return t},n.detectProtocols=function(t,e,n){var i={},o=[];e||(e=f);for(var r=0;r<e.length;r++){var s=e[r];i[s]=t[s]}var a=function(t){var e=t.shift();i[e]?o.push(e):t.length>0&&a(t)};return n.websocket!==!1&&a(["websocket"]),i["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var g="_sockjs_global";n.createHook=function(){var t="a"+n.random_string(8);if(!(g in e)){var i={};e[g]=function(t){return t in i||(i[t]={id:t,del:function(){delete i[t]}}),i[t]}}return e[g](t)},n.attachMessage=function(t){n.attachEvent("message",t)},n.attachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.addEventListener(n,i,!1):(t.attachEvent("on"+n,i),e.attachEvent("on"+n,i))},n.detachMessage=function(t){n.detachEvent("message",t)},n.detachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.removeEventListener(n,i,!1):(t.detachEvent("on"+n,i),e.detachEvent("on"+n,i))};var m={},y=!1,v=function(){for(var t in m)m[t](),delete m[t]},C=function(){y||(y=!0,v())};n.attachEvent("unload",C),n.unload_add=function(t){var e=n.random_string(8);return m[e]=t,y&&n.delay(v),e},n.unload_del=function(t){t in m&&delete m[t]},n.createIframe=function(e,i){var o,r,s=t.createElement("iframe"),a=function(){clearTimeout(o);try{s.onload=null}catch(t){}s.onerror=null},l=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),n.unload_del(r))},c=function(t){s&&(l(),i(t))},u=function(t,e){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(n){}};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},t.body.appendChild(s),o=setTimeout(function(){c("timeout")},15e3),r=n.unload_add(l),{post:u,cleanup:l,loaded:a}},n.createHtmlfile=function(t,i){var o,r,s,l=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},u=function(){l&&(c(),n.unload_del(r),s.parentNode.removeChild(s),s=l=null,CollectGarbage())},p=function(t){l&&(u(),i(t))},d=function(t,e){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";</script></html>'),l.close(),l.parentWindow[a]=e[a];var h=l.createElement("div");return l.body.appendChild(h),s=l.createElement("iframe"),s.src=t,h.appendChild(s),o=setTimeout(function(){p("timeout")},15e3),r=n.unload_add(u),{post:d,cleanup:u,loaded:c}};var b=function(){};b.prototype=new r(["chunk","finish"]),b.prototype._start=function(t,i,o,r){var s=this;try{s.xhr=new XMLHttpRequest}catch(a){}if(!s.xhr)try{s.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(i+=(i.indexOf("?")===-1?"?":"&")+"t="+ +new Date),s.unload_ref=n.unload_add(function(){s._cleanup(!0)});try{s.xhr.open(t,i,!0)}catch(l){return s.emit("finish",0,""),void s._cleanup()}if(r&&r.no_credentials||(s.xhr.withCredentials="true"),r&&r.headers)for(var c in r.headers)s.xhr.setRequestHeader(c,r.headers[c]);s.xhr.onreadystatechange=function(){if(s.xhr){var t=s.xhr;switch(t.readyState){case 3:try{var e=t.status,n=t.responseText}catch(t){}1223===e&&(e=204),n&&n.length>0&&s.emit("chunk",e,n);break;case 4:var e=t.status;1223===e&&(e=204),s.emit("finish",e,t.responseText),s._cleanup(!1)}}},s.xhr.send(o)},b.prototype._cleanup=function(t){var e=this;if(e.xhr){if(n.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(i){}e.unload_ref=e.xhr=null}},b.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=n.XHRCorsObject=function(){var t=this,e=arguments;n.delay(function(){t._start.apply(t,e)})};w.prototype=new b;var x=n.XHRLocalObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i,{no_credentials:!0})})};x.prototype=new b;var _=n.XDRObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i)})};_.prototype=new r(["chunk","finish"]),_.prototype._start=function(t,e,i){var o=this,r=new XDomainRequest;e+=(e.indexOf("?")===-1?"?":"&")+"t="+ +new Date;var s=r.ontimeout=r.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};r.onprogress=function(){o.emit("chunk",200,r.responseText)},r.onload=function(){o.emit("finish",200,r.responseText),o._cleanup(!1)},o.xdr=r,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(i)}catch(a){s()}},_.prototype._cleanup=function(t){var e=this;if(e.xdr){if(n.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(i){}e.unload_ref=e.xdr=null}},_.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},n.isXHRCorsCapable=function(){try{if(e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)return 1}catch(n){}return e.XDomainRequest&&t.domain?2:W.enabled()?3:4};var S=function(t,i,o){if(this===e)return new S(t,i,o);var r,s=this;s._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(s._options,o),s._base_url=n.amendUrl(t),s._server=s._options.server||n.random_number_string(1e3),s._options.protocols_whitelist&&s._options.protocols_whitelist.length?r=s._options.protocols_whitelist:(r="string"==typeof i&&i.length>0?[i]:n.isArray(i)?i:null,r&&s._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),s._protocols=[],s.protocol=null,s.readyState=S.CONNECTING,s._ir=q(s._base_url),s._ir.onfinish=function(t,e){s._ir=null,t?(s._options.info&&(t=n.objectExtend(t,s._options.info)),s._options.rtt&&(e=s._options.rtt),s._applyInfo(t,e,r),s._didClose()):s._didClose(1002,"Can't connect to server",!0)}};S.prototype=new i,S.version="0.3.4",S.CONNECTING=0,S.OPEN=1,S.CLOSING=2,S.CLOSED=3,S.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},S.prototype._dispatchOpen=function(){var t=this;t.readyState===S.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=S.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},S.prototype._dispatchMessage=function(t){var e=this;e.readyState===S.OPEN&&e.dispatchEvent(new o("message",{data:t}))},S.prototype._dispatchHeartbeat=function(t){var e=this;e.readyState===S.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},S.prototype._didClose=function(t,e,i){var r=this;if(r.readyState!==S.CONNECTING&&r.readyState!==S.OPEN&&r.readyState!==S.CLOSING)throw new Error("INVALID_STATE_ERR");r._ir&&(r._ir.nuke(),r._ir=null),r._transport&&(r._transport.doCleanup(),r._transport=null);var s=new o("close",{code:t,reason:e,wasClean:n.userSetCode(t)});if(!n.userSetCode(t)&&r.readyState===S.CONNECTING&&!i){if(r._try_next_protocol(s))return;s=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:s})}r.readyState=S.CLOSED,n.delay(function(){r.dispatchEvent(s)})},S.prototype._didMessage=function(t){var e=this,n=t.slice(0,1);switch(n){case"o":e._dispatchOpen();break;case"a":for(var i=JSON.parse(t.slice(1)||"[]"),o=0;o<i.length;o++)e._dispatchMessage(i[o]);break;case"m":var i=JSON.parse(t.slice(1)||"null");e._dispatchMessage(i);break;case"c":var i=JSON.parse(t.slice(1)||"[]");e._didClose(i[0],i[1]);break;case"h":e._dispatchHeartbeat()}},S.prototype._try_next_protocol=function(e){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+e),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var o=i.protocol=i._protocols.shift();if(!o)return!1;if(S[o]&&S[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return i._protocols.unshift(o),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(S[o]&&S[o].enabled(i._options)){var r=S[o].roundTrips||1,s=(i._options.rto||0)*r||5e3;i._transport_tref=n.delay(s,function(){i.readyState===S.CONNECTING&&i._didClose(2007,"Transport timeouted")});var a=n.random_string(8),l=i._base_url+"/"+i._server+"/"+a;return i._debug("Opening transport:",o," url:"+l," RTO:"+i._options.rto),i._transport=new S[o](i,l,i._base_url),!0}i._debug("Skipping transport:",o)}},S.prototype.close=function(t,e){var i=this;if(t&&!n.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return(i.readyState===S.CONNECTING||i.readyState===S.OPEN)&&(i.readyState=S.CLOSING,i._didClose(t||1e3,e||"Normal closure"),!0)},S.prototype.send=function(t){var e=this;if(e.readyState===S.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===S.OPEN&&e._transport.doSend(n.quote(""+t)),!0},S.prototype._applyInfo=function(e,i,o){var r=this;r._options.info=e,r._options.rtt=i,r._options.rto=n.countRTO(i),r._options.info.null_origin=!t.domain;var s=n.probeProtocols();r._protocols=n.detectProtocols(s,o,e)};var E=S.websocket=function(t,i){var o=this,r=i+"/websocket";r="https"===r.slice(0,5)?"wss"+r.slice(5):"ws"+r.slice(4),o.ri=t,o.url=r;var s=e.WebSocket||e.MozWebSocket;o.ws=new s(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(t){this.ws.send("["+t+"]")},E.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),n.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},E.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},E.roundTrips=2;var T=function(){};T.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},T.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},T.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},T.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,n){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+n):t.send_schedule_wait()}),t.send_buffer=[]}},T.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var k=function(e,i,o){var r=this;if(!("_send_form"in r)){var s=r._send_form=t.createElement("form"),a=r._send_area=t.createElement("textarea");a.name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),t.body.appendChild(s)}var s=r._send_form,a=r._send_area,l="a"+n.random_string(8);s.target=l,s.action=e+"/jsonp_send?i="+l;var c;try{c=t.createElement('<iframe name="'+l+'">')}catch(u){c=t.createElement("iframe"),c.name=l}c.id=l,s.appendChild(c),c.style.display="none";try{a.value=i}catch(p){n.log("Your browser is seriously broken. Go home! "+p.message)}s.submit();var d=function(t){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=d,c.onreadystatechange=function(t){"complete"==c.readyState&&d()},d},L=function(t){return function(e,n,i){var o=new t("POST",e+"/xhr_send",n);return o.onfinish=function(t,e){i(200===t||204===t,"http status "+t)},function(t){i(!1,t)}}},I=function(e,i){var o,r,s=t.createElement("script"),a=function(t){r&&(r.parentNode.removeChild(r),r=null),s&&(clearTimeout(o),s.parentNode.removeChild(s),s.onreadystatechange=s.onerror=s.onload=s.onclick=null,s=null,i(t),i=null)},l=!1,c=null;if(s.id="a"+n.random_string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=function(t){c||(c=setTimeout(function(){l||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},s.onload=function(t){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(t){if(/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){l=!0;try{s.onclick()}catch(e){}}s&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof s.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))r=t.createElement("script"),r.text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=r.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(u){}s.async=!0}"undefined"!=typeof s.async&&(s.async=!0),o=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var p=t.getElementsByTagName("head")[0];return p.insertBefore(s,p.firstChild),r&&p.insertBefore(r,p.firstChild),a},B=S["jsonp-polling"]=function(t,e){n.polluteGlobalNamespace();var i=this;i.ri=t,i.trans_url=e,i.send_constructor(k),i._schedule_recv()};B.prototype=new T,B.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=A(t.trans_url+"/jsonp",I,e)},B.enabled=function(){return!0},B.need_body=!0,B.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var A=function(t,i,o){var r="a"+n.random_string(6),s=t+"?c="+escape(a+"."+r),l=0,c=function(t){switch(l){case 0:delete e[a][r],o(t);break;case 1:o(t),l=2;break;case 2:delete e[a][r]}},u=i(s,c);e[a][r]=u;var p=function(){e[a][r]&&(l=1,e[a][r](n.closeFrame(1e3,"JSONP user aborted read")))};return p},O=function(){};O.prototype=new T,O.prototype.run=function(t,e,n,i,o){var r=this;r.ri=t,r.trans_url=e,r.send_constructor(L(o)),r.poll=new Z(t,i,e+n,o)},O.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var N=S["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",it,n.XHRCorsObject)};N.prototype=new O,N.enabled=function(){try{return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)}catch(t){return!1}},N.roundTrips=2,N.need_body=!0;var P=S["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",it,n.XDRObject)};P.prototype=new O,P.enabled=function(){return!!e.XDomainRequest},P.roundTrips=2;var M=S["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XHRCorsObject)};M.prototype=new O,M.enabled=N.enabled,M.roundTrips=2;var R=S["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XDRObject)};R.prototype=new O,R.enabled=P.enabled,R.roundTrips=2;var W=function(){};W.prototype.i_constructor=function(t,e,i){var o=this;o.ri=t,o.origin=n.getOrigin(i),o.base_url=i,o.trans_url=e;var r=i+"/iframe.html";o.ri._options.devel&&(r+="?t="+ +new Date),o.window_id=n.random_string(8),r+="#"+o.window_id,o.iframeObj=n.createIframe(r,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},W.prototype.doCleanup=function(){var t=this;if(t.iframeObj){n.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},W.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var n=t.data.slice(0,8),i=t.data.slice(8,9),o=t.data.slice(9);if(n===e.window_id)switch(i){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([S.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},W.prototype.postMessage=function(t,e){var n=this;n.iframeObj.post(n.window_id+t+(e||""),n.origin)},W.prototype.doSend=function(t){this.postMessage("m",t)},W.enabled=function(){var t=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var F,H=function(t,i){parent!==e?parent.postMessage(F+t+(i||""),"*"):n.log("Can't postMessage, no parent window.",t,i)},D=function(){};D.prototype._didClose=function(t,e){H("t",n.closeFrame(t,e))},D.prototype._didMessage=function(t){H("t",t)},D.prototype._doSend=function(t){this._transport.doSend(t)},D.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,S.bootstrap_iframe=function(){var i;F=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=t.origin),t.origin===n.parent_origin)){var o=t.data.slice(0,8),r=t.data.slice(8,9),s=t.data.slice(9);if(o===F)switch(r){case"s":var a=JSON.parse(s),l=a[0],c=a[1],u=a[2],p=a[3];if(l!==S.version&&n.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe: "'+S.version+'".'),!n.flatUrl(u)||!n.flatUrl(p))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(u)||!n.isSameOriginUrl(p))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,u,p])+")");i=new D,i._transport=new D[c](i,u,p);break;case"m":i._doSend(s);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(o),H("s")};var j=function(t,e){var i=this;n.delay(function(){i.doXhr(t,e)})};j.prototype=new r(["finish"]),j.prototype.doXhr=function(t,e){var i=this,o=(new Date).getTime(),r=new e("GET",t+"/info"),s=n.delay(8e3,function(){r.ontimeout()});r.onfinish=function(t,e){if(clearTimeout(s),s=null,200===t){var n=(new Date).getTime()-o,r=JSON.parse(e);"object"!=typeof r&&(r={}),i.emit("finish",r,n)}else i.emit("finish")},r.ontimeout=function(){r.close(),i.emit("finish")}};var z=function(e){var i=this,o=function(){var t=new W;t.protocol="w-iframe-info-receiver";var n=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var n=JSON.parse(e.substr(1)),o=n[0],r=n[1];i.emit("finish",o,r)}else i.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:n,_didMessage:n};t.i_constructor(o,e,e)};t.body?o():n.attachEvent("load",o)};z.prototype=new r(["finish"]);var U=function(){var t=this;n.delay(function(){t.emit("finish",{},2e3)})};U.prototype=new r(["finish"]);var q=function(t){if(n.isSameOriginUrl(t))return new j(t,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new j(t,n.XHRLocalObject);case 2:return new j(t,n.XDRObject);case 3:return new z(t);default:return new U}},V=D["w-iframe-info-receiver"]=function(t,e,i){var o=new j(i,n.XHRLocalObject);o.onfinish=function(e,n){t._didMessage("m"+JSON.stringify([e,n])),t._didClose()}};V.prototype.doCleanup=function(){};var $=S["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};$.prototype=new W,$.enabled=function(){return"EventSource"in e&&W.enabled()},$.need_body=!0,$.roundTrips=3;var G=D["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Q,n.XHRLocalObject)};G.prototype=new O;var X=S["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};X.prototype=new W,X.enabled=function(){return e.XMLHttpRequest&&W.enabled()},X.need_body=!0,X.roundTrips=3;var K=D["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XHRLocalObject)};K.prototype=new O;var Y=S["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};Y.prototype=new W,Y.enabled=function(){return W.enabled()},Y.need_body=!0,Y.roundTrips=3;var J=D["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",nt,n.XHRLocalObject)};J.prototype=new O;var Z=function(t,e,n,i){var o=this;o.ri=t,o.Receiver=e,o.recv_url=n,o.AjaxObject=i,o._scheduleRecv()};Z.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),n=0;e.onmessage=function(e){n+=1,t.ri._didMessage(e.data)},e.onclose=function(n){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===n.reason?t.ri._didClose(1006,"Polling error ("+n.reason+")"):t._scheduleRecv())}},Z.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Q=function(t){var e=this,i=new EventSource(t);i.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=i.onerror=function(t,r){var s=r?"user":2!==i.readyState?"network":"permanent";e.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){e.dispatchEvent(new o("close",{reason:s}))})}};Q.prototype=new i,Q.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var tt,et=function(){if(void 0===tt)if("ActiveXObject"in e)try{tt=!!new ActiveXObject("htmlfile")}catch(t){}else tt=!1;return tt},nt=function(t){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),t+=(t.indexOf("?")===-1?"?":"&")+"c="+escape(a+"."+i.id);var r,s=et()?n.createHtmlfile:n.createIframe;e[a][i.id]={start:function(){r.loaded()},message:function(t){i.dispatchEvent(new o("message",{data:t}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(t,n){r.cleanup(),i.iframe_close=r=null,delete e[a][i.id],i.dispatchEvent(new o("close",{
reason:n}))},r=s(t,function(t){i.iframe_close({},"permanent")})};nt.prototype=new i,nt.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var it=function(t,e){var n=this,i=0;n.xo=new e("POST",t,null),n.xo.onchunk=function(t,e){if(200===t)for(;;){var r=e.slice(i),s=r.indexOf("\n");if(s===-1)break;i+=s+1;var a=r.slice(0,s);n.dispatchEvent(new o("message",{data:a}))}},n.xo.onfinish=function(t,e){n.xo.onchunk(t,e),n.xo=null;var i=200===t?"network":"permanent";n.dispatchEvent(new o("close",{reason:i}))}};return it.prototype=new i,it.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},S.getUtils=function(){return n},S.getIframeTransport=function(){return W},S}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS}),function(t,e){var n,i,o,r,s,a,l=3e4,c=6e4,u=0,p=1,d=2,h=t.uLiB,f=h.util,g=uLiB.util.EventBus,m=uLiB.util.CookieShop,y=t.uLiB.util.Queue,v=ComagicWidget.widget.analytics.Analytics,C={},b=1,w=0,x=u,_={__commands:["sendMessage","visitorInsite","sitePhoneCall","ensureSessionAndRun","getUploadUrl","setOperatorId"],init:function(){this.log("[Ws] init");var t=ComagicWidget.settings.info(),e=ComagicWidget.settings.params("consultant");s=t.host||e.server_url,a=t.web_host,this.connect();var i=window.onbeforeunload;window.onbeforeunload=function(){try{n.onclose=null,n.readyState===SockJS.OPEN&&n.close(),i&&i()}catch(t){}}},connect:function(){this.log("[Ws] about to connect"),window.location.search.indexOf("xhr_only")!==-1&&(WebSocket=void 0);var t=m.get(m.WS_OFFLINE);if("1"==t&&m.set(m.WS_OFFLINE,2),!t){this.log("[Ws] we're not offline :)");try{var e=ComagicWidget.settings.params("consultant"),i=e?e.server_url:s;n=new SockJS(i,null,{debug:f.__debug}),n.onopen=f.bind(this.onSocketOpen,this),n.onclose=f.bind(this.onSocketClose,this),n.onmessage=f.bind(this.onSocketMessage,this),this.log("[Ws] connected!")}catch(o){this.log(o)}}},reconnect:function(){var t=this;r&&(r=!1),b>5||(n={},setTimeout(function(){t.connect()},uLiB.util.getExponentialBackoff(b++)))},log:function(){var t=[].concat(arguments);t.unshift("[Ws]"),f.log.apply(f,t)},startPing:function(){var t=this;i=setInterval(function(){t.ping()},l)},stopPing:function(){i&&clearInterval(i),o&&clearTimeout(o)},ping:function(){var t=this;m.getSessionId()&&!r&&(t.sendMessage("ping",!1),o=setTimeout(function(){t.onPingTimeout()},c))},onPingTimeout:function(){this.log("ping timeout((("),this.onSocketClose()},getDefaultParams:function(){return{comagic_id:v.getComagicId(),hit_id:v.getHitId(),site_key:ComagicWidget.settings.key()}},makeMessage:function(t,e,n){return e=e!==!1?f.apply(this.getDefaultParams(),e):void 0,JSON.stringify({name:t,params:e,id:n||null,type:"rpc"})},loadMessage:function(t){return JSON.parse(t)},handshake:function(){if(x!=p&&(!this.conn||this.conn.readyState===SockJS.OPEN)){if(x==d&&m.getSessionId())return void this.sendMessage("reconnected",{});x=p,this.sendMessage("handshake")}},visitorInsite:function(){this.sendMessage("visitor_insite")},onSocketOpen:function(){this.log("Connection opened"),this.startPing(),this.handshake(),g.fireEvent("ws:socketopen",this)},onSocketClose:function(){this.log("Connection closed"),g.fireEvent("ws:socketclose",this),this.stopPing(),this.reconnect()},onSocketMessage:function(t){this.log("Receive message, ",t.data);var e;try{e=this.loadMessage(t.data)}catch(n){this.log(n),e={}}"rpc-result"==e.type?e.id in C&&(C[e.id]({success:e.success,result:e.result}),delete C[e.id]):"rpc"==e.type&&(g.fireEvent("rpc:"+e.name,this,e.params),"pong"===e.name&&e.params&&"state"in e.params&&(f.log("Got state in pong:",e.params.state),g.fireEvent("rpc:refresh_state",this,e.params)))},sendMessage:function(t,e,i){var o=this;if(x!==d&&"handshake"!==t)return o.log("Got command "+t+", but handshake hasn't done yet, let's wait for it"),void y.push("sendMessage",arguments);var r=null;i&&(r=uLiB.util.uuid(),C[r]=i);var s=o.makeMessage(t,e,r);o.log(uLiB.util.getTimeStr(),"Send message:",s),n&&n.readyState===SockJS.OPEN&&n.send(s)},getTimeDelta:function(){return w},getUploadUrl:function(t){this.sendMessage("get_upload_url",{},t)},setOperatorId:function(t){this.sendMessage("set_operator",{operator_id:t})},sitePhoneCall:function(t,e){t=f.apply({is_custom:!!e},t),this.sendMessage("sitephone_call",t,e)},onSession:function(){"2"!==m.get(m.ALY_OFFLINE)&&_.init()},onRpcHandshake:function(t,e){b=1,"t"in e&&(w=e.t-uLiB.util.getTimestamp()),x=d,g.fireEvent("ws:handshakedone",this,e),uLiB.util.Queue.registerAndProcess(this.__commands,this,!0)},onRpcSleep:function(t,e){r=!0,n&&(n.onclose=null,n.readyState===SockJS.OPEN&&n.close(),n=null),this.stopPing()},onRpcDisconnect:function(t,e){m.set(m.WS_OFFLINE,2),n&&(n.onclose=null,n.readyState===SockJS.OPEN&&n.close(),n=null),this.stopPing()},onRpcPong:function(t,e){o&&clearTimeout(o)}};f.apply(f.ns(e),{Ws:_}),uLiB.util.Queue.push("waitForTrackViewAndRun",function(){_.onSession()}),uLiB.util.EventBus.on({"rpc:handshake":_.onRpcHandshake,"rpc:sleep":_.onRpcSleep,"rpc:disconnect":_.onRpcDisconnect,"rpc:pong":_.onRpcPong,scope:_})}(window,"ComagicWidget.widget.common"),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=ot.type(t);return"function"!==n&&!ot.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}function i(t,e,n){if(ot.isFunction(e))return ot.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return ot.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(dt.test(e))return ot.filter(e,t,n);e=ot.filter(e,t)}return ot.grep(t,function(t){return ot.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=bt[t]={};return ot.each(t.match(Ct)||[],function(t,n){e[n]=!0}),e}function s(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(ft.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(s(),ot.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Et,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:St.test(n)?ot.parseJSON(n):n)}catch(o){}ot.data(t,e,n)}else n=void 0}return n}function c(t){var e;for(e in t)if(("data"!==e||!ot.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(t,e,n,i){if(ot.acceptData(t)){var o,r,s=ot.expando,a=t.nodeType,l=a?ot.cache:t,c=a?t[s]:t[s]&&s;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof e)return c||(c=a?t[s]=X.pop()||ot.guid++:s),l[c]||(l[c]=a?{}:{toJSON:ot.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[c]=ot.extend(l[c],e):l[c].data=ot.extend(l[c].data,e)),r=l[c],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[ot.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[ot.camelCase(e)])):o=r,o}}function p(t,e,n){if(ot.acceptData(t)){var i,o,r=t.nodeType,s=r?ot.cache:t,a=r?t[ot.expando]:ot.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){ot.isArray(e)?e=e.concat(ot.map(e,ot.camelCase)):e in i?e=[e]:(e=ot.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!c(i):!ot.isEmptyObject(i))return}(n||(delete s[a].data,c(s[a])))&&(r?ot.cleanData([t],!0):nt.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function h(){return!1}function f(){try{return ft.activeElement}catch(t){}}function g(t){var e=Rt.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==_t?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==_t?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||ot.nodeName(i,e)?r.push(i):ot.merge(r,m(i,e));return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],r):r}function y(t){Bt.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function C(t){return t.type=(null!==ot.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var n,i=0;null!=(n=t[i]);i++)ot._data(n,"globalEval",!e||ot._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&ot.hasData(t)){var n,i,o,r=ot._data(t),s=ot._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;i<o;i++)ot.event.add(e,n,a[n][i])}s.data&&(s.data=ot.extend({},s.data))}}function _(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!nt.noCloneEvent&&e[ot.expando]){o=ot._data(e);for(i in o.events)ot.removeEvent(e,i,o.handle);e.removeAttribute(ot.expando)}"script"===n&&e.text!==t.text?(C(e).text=t.text,b(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),nt.html5Clone&&t.innerHTML&&!ot.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Bt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function S(e,n){var i,o=ot(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(o[0]))?i.display:ot.css(o[0],"display");return o.detach(),r}function E(t){var e=ft,n=Qt[t];return n||(n=S(t,e),"none"!==n&&n||(Zt=(Zt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Zt[0].contentWindow||Zt[0].contentDocument).document,e.write(),e.close(),n=S(t,e),Zt.detach()),Qt[t]=n),n}function T(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=de.length;o--;)if(e=de[o]+n,e in t)return e;return i}function L(t,e){for(var n,i,o,r=[],s=0,a=t.length;s<a;s++)i=t[s],i.style&&(r[s]=ot._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Lt(i)&&(r[s]=ot._data(i,"olddisplay",E(i.nodeName)))):(o=Lt(i),(n&&"none"!==n||!o)&&ot._data(i,"olddisplay",o?n:ot.css(i,"display"))));for(s=0;s<a;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function I(t,e,n){var i=le.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function B(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;r<4;r+=2)"margin"===n&&(s+=ot.css(t,n+kt[r],!0,o)),i?("content"===n&&(s-=ot.css(t,"padding"+kt[r],!0,o)),"margin"!==n&&(s-=ot.css(t,"border"+kt[r]+"Width",!0,o))):(s+=ot.css(t,"padding"+kt[r],!0,o),"padding"!==n&&(s+=ot.css(t,"border"+kt[r]+"Width",!0,o)));return s}function A(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=te(t),s=nt.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,r);if(o<=0||null==o){if(o=ee(t,e,r),(o<0||null==o)&&(o=t.style[e]),ie.test(o))return o;i=s&&(nt.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+B(t,e,n||(s?"border":"content"),i,r)+"px"}function O(t,e,n,i,o){return new O.prototype.init(t,e,n,i,o)}function N(){return setTimeout(function(){he=void 0}),he=ot.now()}function P(t,e){var n,i={height:t},o=0;for(e=e?1:0;o<4;o+=2-e)n=kt[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function M(t,e,n){for(var i,o=(Ce[e]||[]).concat(Ce["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function R(t,e,n){var i,o,r,s,a,l,c,u,p=this,d={},h=t.style,f=t.nodeType&&Lt(t),g=ot._data(t,"fxshow");n.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=ot.css(t,"display"),u="none"===c?ot._data(t,"olddisplay")||E(t.nodeName):c,"inline"===u&&"none"===ot.css(t,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==E(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",nt.shrinkWrapBlocks()||p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],ge.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;f=!0}d[i]=g&&g[i]||ot.style(t,i)}else c=void 0;if(ot.isEmptyObject(d))"inline"===("none"===c?E(t.nodeName):c)&&(h.display=c);else{g?"hidden"in g&&(f=g.hidden):g=ot._data(t,"fxshow",{}),r&&(g.hidden=!f),f?ot(t).show():p.done(function(){ot(t).hide()}),p.done(function(){var e;ot._removeData(t,"fxshow");for(e in d)ot.style(t,e,d[e])});for(i in d)s=M(f?g[i]:0,i,p),i in g||(g[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function W(t,e){var n,i,o,r,s;for(n in t)if(i=ot.camelCase(n),o=e[i],r=t[n],ot.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=ot.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function F(t,e,n){var i,o,r=0,s=ve.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=he||N(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(r);return a.notifyWith(t,[c,r,n]),r<1&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:he||N(),duration:n.duration,tweens:[],createTween:function(e,n){var i=ot.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),u=c.props;for(W(u,c.opts.specialEasing);r<s;r++)if(i=ve[r].call(c,t,u,c.opts))return i;return ot.map(u,M,c),ot.isFunction(c.opts.start)&&c.opts.start.call(t,c),ot.fx.timer(ot.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(Ct)||[];if(ot.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function D(t,e,n,i){function o(a){var l;return r[a]=!0,ot.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=t===Ue;return o(e.dataTypes[0])||!r["*"]&&o("*")}function j(t,e){var n,i,o=ot.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&ot.extend(!0,t,n),t}function z(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}if(r)return r!==l[0]&&l.unshift(r),n[r]}function U(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(p){return{state:"parsererror",error:s?p:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function q(t,e,n,i){var o;if(ot.isArray(e))ot.each(e,function(e,o){n||Ge.test(t)?i(t,o):q(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==ot.type(e))i(t,e);else for(o in e)q(t+"["+o+"]",e[o],n,i)}function V(){try{return new t.XMLHttpRequest}catch(e){}}function $(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function G(t){return ot.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var X=[],K=X.slice,Y=X.concat,J=X.push,Z=X.indexOf,Q={},tt=Q.toString,et=Q.hasOwnProperty,nt={},it=(t.uLiB||{},"1.11.1"),ot=function(t,e){return new ot.fn.init(t,e)},rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:it,constructor:ot,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ot.each(this,t,e)},map:function(t){return this.pushStack(ot.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:X.sort,splice:X.splice},ot.extend=ot.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||ot.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(o=arguments[a]))for(i in o)t=s[i],n=o[i],s!==n&&(c&&n&&(ot.isPlainObject(n)||(e=ot.isArray(n)))?(e?(e=!1,r=t&&ot.isArray(t)?t:[]):r=t&&ot.isPlainObject(t)?t:{},s[i]=ot.extend(c,r,n)):void 0!==n&&(s[i]=n));return s},ot.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray||function(t){return"array"===ot.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!ot.isArray(t)&&t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Q[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&ot.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(st,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;r<s&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;r<s&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(rt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?ot.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Z)return Z.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,s=t.length,a=!n;r<s;r++)i=!e(t[r],r),i!==a&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;r<s;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return Y.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;if("string"==typeof e&&(o=t[e],e=t,t=o),ot.isFunction(t))return n=K.call(arguments,2),i=function(){return t.apply(e||this,n.concat(K.call(arguments)))},i.guid=t.guid=t.guid||ot.guid++,i},now:function(){return+new Date},support:nt}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Q["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,n,i){var o,r,s,a,l,c,p,h,f,g;if((e?e.ownerDocument||e:D)!==O&&A(e),e=e||O,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(P&&!i){if(o=vt.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&F(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(w.qsa&&(!M||!M.test(t))){if(h=p=H,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=E(t),(p=e.getAttribute("id"))?h=p.replace(bt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+d(c[l]);f=Ct.test(t)&&u(e.parentNode)||e,g=c.join(",")}if(g)try{return Q.apply(n,f.querySelectorAll(g)),n}catch(m){}finally{p||e.removeAttribute("id")}}}return k(t.replace(lt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[H]=!0,t}function o(t){var e=O.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(t){return t&&typeof t.getElementsByTagName!==G&&t}function p(){}function d(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function h(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=z++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,c=[j,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[H]||(e[H]={}),(a=l[i])&&a[0]===j&&a[1]===r)return c[2]=a[2];if(l[i]=c,c[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var o=0,r=n.length;o<r;o++)e(t,n[o],i);return i}function m(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function y(t,e,n,o,r,s){return o&&!o[H]&&(o=y(o)),r&&!r[H]&&(r=y(r,s)),i(function(i,s,a,l){var c,u,p,d=[],h=[],f=s.length,y=i||g(e||"*",a.nodeType?[a]:a,[]),v=!t||!i&&e?y:m(y,d,t,a,l),C=n?r||(i?t:f||o)?[]:s:v;if(n&&n(v,C,a,l),o)for(c=m(C,h),o(c,[],a,l),u=c.length;u--;)(p=c[u])&&(C[h[u]]=!(v[h[u]]=p));if(i){if(r||t){if(r){for(c=[],u=C.length;u--;)(p=C[u])&&c.push(v[u]=p);r(null,C=[],c,l)}for(u=C.length;u--;)(p=C[u])&&(c=r?et.call(i,p):d[u])>-1&&(i[c]=!(s[c]=p))}}else C=m(C===s?C.splice(f,C.length):C),r?r(null,s,C,l):Q.apply(s,C)})}function v(t){for(var e,n,i,o=t.length,r=x.relative[t[0].type],s=r||x.relative[" "],a=r?1:0,l=h(function(t){return t===e},s,!0),c=h(function(t){return et.call(e,t)>-1},s,!0),u=[function(t,n,i){return!r&&(i||n!==L)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];a<o;a++)if(n=x.relative[t[a].type])u=[h(f(u),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[H]){for(i=++a;i<o&&!x.relative[t[i].type];i++);return y(a>1&&f(u),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),n,a<i&&v(t.slice(a,i)),i<o&&v(t=t.slice(i)),i<o&&d(t))}u.push(n)}return f(u)}function C(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,c){var u,p,d,h=0,f="0",g=i&&[],y=[],v=L,C=i||r&&x.find.TAG("*",c),b=j+=null==v?1:Math.random()||.1,w=C.length;for(c&&(L=s!==O&&s);f!==w&&null!=(u=C[f]);f++){if(r&&u){for(p=0;d=t[p++];)if(d(u,s,a)){l.push(u);break}c&&(j=b)}o&&((u=!d&&u)&&h--,i&&g.push(u))}if(h+=f,o&&f!==h){for(p=0;d=n[p++];)d(g,y,s,a);if(i){if(h>0)for(;f--;)g[f]||y[f]||(y[f]=J.call(l));y=m(y)}Q.apply(l,y),c&&!i&&y.length>0&&h+n.length>1&&e.uniqueSort(l)}return c&&(j=b,L=v),g};return o?i(s):s}var b,w,x,_,S,E,T,k,L,I,B,A,O,N,P,M,R,W,F,H="sizzle"+-new Date,D=t.document,j=0,z=0,U=n(),q=n(),V=n(),$=function(t,e){return t===e&&(B=!0),0},G="undefined",X=1<<31,K={}.hasOwnProperty,Y=[],J=Y.pop,Z=Y.push,Q=Y.push,tt=Y.slice,et=Y.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=ot.replace("w","w#"),st="\\["+it+"*("+ot+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+it+"*\\]",at=":("+ot+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),pt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),ht=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Q.apply(Y=tt.call(D.childNodes),D.childNodes),Y[D.childNodes.length].nodeType}catch(_t){Q={apply:Y.length?function(t,e){Z.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:D,i=n.defaultView;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,N=n.documentElement,P=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){A()},!1):i.attachEvent&&i.attachEvent("onunload",function(){A()})),w.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=yt.test(n.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=o(function(t){return N.appendChild(t).id=H,!n.getElementsByName||!n.getElementsByName(H).length}),w.getById?(x.find.ID=function(t,e){if(typeof e.getElementById!==G&&P){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(wt,xt);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==G)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=w.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==G&&P)return e.getElementsByClassName(t)},R=[],M=[],(w.qsa=yt.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&M.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+it+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||M.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=yt.test(W=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){w.disconnectedMatch=W.call(t,"div"),W.call(t,"[s!='']:x"),R.push("!=",at)}),M=M.length&&new RegExp(M.join("|")),R=R.length&&new RegExp(R.join("|")),e=yt.test(N.compareDocumentPosition),F=e||yt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return B=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!w.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===D&&F(D,t)?-1:e===n||e.ownerDocument===D&&F(D,e)?1:I?et.call(I,t)-et.call(I,e):0:4&i?-1:1)}:function(t,e){if(t===e)return B=!0,0;var i,o=0,r=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:I?et.call(I,t)-et.call(I,e):0;if(r===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?s(l[o],c[o]):l[o]===D?-1:c[o]===D?1:0},n):O},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==O&&A(t),n=n.replace(pt,"='$1']"),w.matchesSelector&&P&&(!R||!R.test(n))&&(!M||!M.test(n)))try{var i=W.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&A(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&A(t);var n=x.attrHandle[e.toLowerCase()],i=n&&K.call(x.attrHandle,e.toLowerCase())?n(t,e,!P):void 0;return void 0!==i?i:w.attributes||!P?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(B=!w.detectDuplicates,I=!w.sortStable&&t.slice(0),t.sort($),B){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return I=null,t},_=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=_(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=_(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:ft,
attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,p,d,h,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(m){if(r){for(;g;){for(p=e;p=p[g];)if(a?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&v){for(u=m[H]||(m[H]={}),c=u[t]||[],h=c[0]===j&&c[1],d=c[0]===j&&c[2],p=h&&m.childNodes[h];p=++h&&p&&p[g]||(d=h=0)||f.pop();)if(1===p.nodeType&&++d&&p===e){u[t]=[j,h,d];break}}else if(v&&(c=(e[H]||(e[H]={}))[t])&&c[0]===j)d=c[1];else for(;(p=++h&&p&&p[g]||(d=h=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++d||(v&&((p[H]||(p[H]={}))[t]=[j,d]),p!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var o,r=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[H]?r(n):r.length>1?(o=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=et.call(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=T(t.replace(lt,"$1"));return o[H]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),lang:i(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,xt).toLowerCase(),function(e){var n;do if(n=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return p.prototype=x.filters=x.pseudos,x.setFilters=new p,E=e.tokenize=function(t,n){var i,o,r,s,a,l,c,u=q[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],c=x.preFilter;a;){i&&!(o=ct.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ut.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(lt," ")}),a=a.slice(i.length));for(s in x.filter)!(o=ft[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):q(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],o=[],r=V[t+" "];if(!r){for(e||(e=E(t)),n=e.length;n--;)r=v(e[n]),r[H]?i.push(r):o.push(r);r=V(t,C(o,i)),r.selector=t}return r},k=e.select=function(t,e,n,i){var o,r,s,a,l,c="function"==typeof t&&t,p=!i&&E(t=c.selector||t);if(n=n||[],1===p.length){if(r=p[0]=p[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&w.getById&&9===e.nodeType&&P&&x.relative[r[1].type]){if(e=(x.find.ID(s.matches[0].replace(wt,xt),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=ft.needsContext.test(t)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(wt,xt),Ct.test(r[0].type)&&u(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&d(r),!t)return Q.apply(n,i),n;break}}return(c||T(t,p))(i,e,!P,n,Ct.test(t)&&u(e.parentNode)||e),n},w.sortStable=H.split("").sort($).join("")===H,w.detectDuplicates=!!B,A(),w.sortDetached=o(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(nt,function(t,e,n){var i;if(!n)return t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ut=ot.expr.match.needsContext,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?ot.find.matchesSelector(i,t)?[i]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;e<o;e++)if(ot.contains(i[e],this))return!0}));for(e=0;e<o;e++)ot.find(t,i[e],n);return n=this.pushStack(o>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ut.test(t)?ot(t):t||[],!1).length}});var ht,ft=t.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=ot.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:gt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ht).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:ft,!0)),pt.test(n[1])&&ot.isPlainObject(e))for(n in e)ot.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=ft.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ht.find(t);this.length=1,this[0]=i}return this.context=ft,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?"undefined"!=typeof ht.ready?ht.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};mt.prototype=ot.fn,ht=ot(ft);var yt=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!ot(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),ot.fn.extend({has:function(t){var e,n=ot(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(ot.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=ut.test(t)||"string"!=typeof t?ot(t,e||this.context):0;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?ot.unique(r):r)},index:function(t){return t?"string"==typeof t?ot.inArray(this[0],ot(t)):ot.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.unique(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot.dir(t,"parentNode")},parentsUntil:function(t,e,n){return ot.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return ot.dir(t,"nextSibling")},prevAll:function(t){return ot.dir(t,"previousSibling")},nextUntil:function(t,e,n){return ot.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return ot.dir(t,"previousSibling",n)},siblings:function(t){return ot.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ot.sibling(t.firstChild)},contents:function(t){return ot.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(n,i){var o=ot.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ot.filter(i,o)),this.length>1&&(vt[t]||(o=ot.unique(o)),yt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var Ct=/\S+/g,bt={};ot.Callbacks=function(t){t="string"==typeof t?bt[t]||r(t):ot.extend({},t);var e,n,i,o,s,a,l=[],c=!t.once&&[],u=function(r){for(n=t.memory&&r,i=!0,s=a||0,a=0,o=l.length,e=!0;l&&s<o;s++)if(l[s].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(c?c.length&&u(c.shift()):n?l=[]:p.disable())},p={add:function(){if(l){var i=l.length;!function r(e){ot.each(e,function(e,n){var i=ot.type(n);"function"===i?t.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(a=i,u(n))}return this},remove:function(){return l&&ot.each(arguments,function(t,n){for(var i;(i=ot.inArray(n,l,i))>-1;)l.splice(i,1),e&&(i<=o&&o--,i<=s&&s--)}),this},has:function(t){return t?ot.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||p.disable(),this},locked:function(){return!c},fireWith:function(t,n){return!l||i&&!c||(n=n||[],n=[t,n.slice?n.slice():n],e?c.push(n):u(n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(n){ot.each(e,function(e,r){var s=ot.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,i):i}},o={};return i.pipe=i.then,ot.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=K.call(arguments),s=r.length,a=1!==s||t&&ot.isFunction(t.promise)?s:0,l=1===a?t:ot.Deferred(),c=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?K.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);o<s;o++)r[o]&&ot.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}});var wt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){if(t===!0?!--ot.readyWait:!ot.isReady){if(!ft.body)return setTimeout(ot.ready);ot.isReady=!0,t!==!0&&--ot.readyWait>0||(wt.resolveWith(ft,[ot]),ot.fn.triggerHandler&&(ot(ft).triggerHandler("ready"),ot(ft).off("ready")))}}}),ot.ready.promise=function(e){if(!wt)if(wt=ot.Deferred(),"complete"===ft.readyState)setTimeout(ot.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{ft.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&ft.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!ot.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}s(),ot.ready()}}()}return wt.promise(e)};var xt,_t="undefined";for(xt in ot(nt))break;nt.ownLast="0"!==xt,nt.inlineBlockNeedsLayout=!1,ot(function(){var t,e,n,i;n=ft.getElementsByTagName("body")[0],n&&n.style&&(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==_t&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=ft.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(e){nt.deleteExpando=!1}}t=null}(),ot.acceptData=function(t){var e=ot.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||e!==!0&&t.getAttribute("classid")===e)};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ot.cache[t[ot.expando]]:t[ot.expando],!!t&&!c(t)},data:function(t,e,n){return u(t,e,n)},removeData:function(t,e){return p(t,e)},_data:function(t,e,n){return u(t,e,n,!0)},_removeData:function(t,e){return p(t,e,!0)}}),ot.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=ot.data(r),1===r.nodeType&&!ot._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=ot.camelCase(i.slice(5)),l(r,i,o[i])));ot._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ot.data(this,t)}):arguments.length>1?this.each(function(){ot.data(this,t,e)}):r?l(r,t,ot.data(r,t)):void 0},removeData:function(t){return this.each(function(){ot.removeData(this,t)})}}),ot.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=ot._data(t,e),n&&(!i||ot.isArray(n)?i=ot._data(t,e,ot.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=ot.queue(t,e),i=n.length,o=n.shift(),r=ot._queueHooks(t,e),s=function(){ot.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ot._data(t,n)||ot._data(t,n,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(t,e+"queue"),ot._removeData(t,n)})})}}),ot.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?ot.queue(this[0],t):void 0===e?this:this.each(function(){var n=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=ot.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=ot._data(r[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},It=ot.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,c=null==n;if("object"===ot.type(n)){o=!0;for(a in n)ot.access(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,ot.isFunction(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(ot(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:c?e.call(t):l?e(t[0],n):r},Bt=/^(?:checkbox|radio)$/i;!function(){var t=ft.createElement("input"),e=ft.createElement("div"),n=ft.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===e.firstChild.nodeType,nt.tbody=!e.getElementsByTagName("tbody").length,nt.htmlSerialize=!!e.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),nt.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){nt.noCloneEvent=!1}),e.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(i){nt.deleteExpando=!1}}}(),function(){var e,n,i=ft.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(nt[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),nt[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var At=/^(?:input|select|textarea)$/i,Ot=/^key/,Nt=/^(?:mouse|pointer|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,p,d,h,f,g,m=ot._data(t);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=ot.guid++),(s=m.events)||(s=m.events={}),(u=m.handle)||(u=m.handle=function(t){return typeof ot===_t||t&&ot.event.triggered===t.type?void 0:ot.event.dispatch.apply(u.elem,arguments)},u.elem=t),e=(e||"").match(Ct)||[""],a=e.length;a--;)r=Mt.exec(e[a])||[],h=g=r[1],f=(r[2]||"").split(".").sort(),h&&(c=ot.event.special[h]||{},h=(o?c.delegateType:c.bindType)||h,c=ot.event.special[h]||{},p=ot.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:f.join(".")},l),(d=s[h])||(d=s[h]=[],d.delegateCount=0,c.setup&&c.setup.call(t,i,f,u)!==!1||(t.addEventListener?t.addEventListener(h,u,!1):t.attachEvent&&t.attachEvent("on"+h,u))),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),ot.event.global[h]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,c,u,p,d,h,f,g,m=ot.hasData(t)&&ot._data(t);if(m&&(u=m.events)){for(e=(e||"").match(Ct)||[""],c=e.length;c--;)if(a=Mt.exec(e[c])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h){for(p=ot.event.special[h]||{},h=(i?p.delegateType:p.bindType)||h,d=u[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,p.remove&&p.remove.call(t,s));l&&!d.length&&(p.teardown&&p.teardown.call(t,f,m.handle)!==!1||ot.removeEvent(t,h,m.handle),delete u[h])}else for(h in u)ot.event.remove(t,h+e[c],n,i,!0);ot.isEmptyObject(u)&&(delete m.handle,ot._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,s,a,l,c,u,p,d=[i||ft],h=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(a=u=i=i||ft,3!==i.nodeType&&8!==i.nodeType&&!Pt.test(h+ot.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),s=h.indexOf(":")<0&&"on"+h,e=e[ot.expando]?e:new ot.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:ot.makeArray(n,[e]),c=ot.event.special[h]||{},o||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!o&&!c.noBubble&&!ot.isWindow(i)){for(l=c.delegateType||h,Pt.test(l+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;u===(i.ownerDocument||ft)&&d.push(u.defaultView||u.parentWindow||t)}for(p=0;(a=d[p++])&&!e.isPropagationStopped();)e.type=p>1?l:c.bindType||h,r=(ot._data(a,"events")||{})[e.type]&&ot._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&ot.acceptData(a)&&(e.result=r.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=h,!o&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),n)===!1)&&ot.acceptData(i)&&s&&i[h]&&!ot.isWindow(i)){u=i[s],u&&(i[s]=null),ot.event.triggered=h;try{i[h]()}catch(g){}ot.event.triggered=void 0,u&&(i[s]=u)}return e.result}},dispatch:function(t){t=ot.event.fix(t);var e,n,i,o,r,s=[],a=K.call(arguments),l=(ot._data(this,"events")||{})[t.type]||[],c=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=ot.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(i.namespace)||(t.handleObj=i,t.data=i.data,n=((ot.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;r<a;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?ot(n,this).index(l)>=0:ot.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[ot.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Nt.test(o)?this.mouseHooks:Ot.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new ot.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||ft),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||ft,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=ot.extend(new ot.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?ot.event.trigger(o,null,e):ot.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},ot.removeEvent=ft.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===_t&&(t[i]=null),t.detachEvent(i,n))},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:h):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||ot.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),nt.submitBubbles||(ot.event.special.submit={setup:function(){return!ot.nodeName(this,"form")&&void ot.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=ot.nodeName(e,"input")||ot.nodeName(e,"button")?e.form:void 0;n&&!ot._data(n,"submitBubbles")&&(ot.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),ot._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ot.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!ot.nodeName(this,"form")&&void ot.event.remove(this,"._submit")}}),nt.changeBubbles||(ot.event.special.change={setup:function(){return At.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ot.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,t,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(t){var e=t.target;At.test(e.nodeName)&&!ot._data(e,"changeBubbles")&&(ot.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ot.event.simulate("change",this.parentNode,t,!0)}),ot._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return ot.event.remove(this,"._change"),!At.test(this.nodeName)}}),nt.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){ot.event.simulate(e,t.target,ot.event.fix(t),!0)};ot.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=ot._data(i,e);o||i.addEventListener(t,n,!0),ot._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=ot._data(i,e)-1;o?ot._data(i,e,o):(i.removeEventListener(t,n,!0),ot._removeData(i,e))}}}),ot.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=h;else if(!i)return this;return 1===o&&(s=i,i=function(t){return ot().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=ot.guid++)),this.each(function(){ot.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,ot(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=h),this.each(function(){ot.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return ot.event.trigger(t,e,n,!0)}});var Rt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Wt=/ jQuery\d+="(?:null|\d+)"/g,Ft=new RegExp("<(?:"+Rt+")[\\s/>]","i"),Ht=/^\s+/,Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jt=/<([\w:]+)/,zt=/<tbody/i,Ut=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,$t=/^$|\/(?:java|ecma)script/i,Gt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Kt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yt=g(ft),Jt=Yt.appendChild(ft.createElement("div"));Kt.optgroup=Kt.option,Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,ot.extend({clone:function(t,e,n){var i,o,r,s,a,l=ot.contains(t.ownerDocument,t);if(nt.html5Clone||ot.isXMLDoc(t)||!Ft.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Jt.innerHTML=t.outerHTML,Jt.removeChild(r=Jt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(i=m(r),a=m(t),s=0;null!=(o=a[s]);++s)i[s]&&_(o,i[s]);if(e)if(n)for(a=a||m(t),i=i||m(r),s=0;null!=(o=a[s]);s++)x(o,i[s]);else x(t,r);return i=m(r,"script"),i.length>0&&w(i,!l&&m(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,c,u,p=t.length,d=g(e),h=[],f=0;f<p;f++)if(r=t[f],r||0===r)if("object"===ot.type(r))ot.merge(h,r.nodeType?[r]:r);else if(Ut.test(r)){for(a=a||d.appendChild(e.createElement("div")),l=(jt.exec(r)||["",""])[1].toLowerCase(),u=Kt[l]||Kt._default,a.innerHTML=u[1]+r.replace(Dt,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!nt.leadingWhitespace&&Ht.test(r)&&h.push(e.createTextNode(Ht.exec(r)[0])),
!nt.tbody)for(r="table"!==l||zt.test(r)?"<table>"!==u[1]||zt.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)ot.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(ot.merge(h,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else h.push(e.createTextNode(r));for(a&&d.removeChild(a),nt.appendChecked||ot.grep(m(h,"input"),y),f=0;r=h[f++];)if((!i||ot.inArray(r,i)===-1)&&(s=ot.contains(r.ownerDocument,r),a=m(d.appendChild(r),"script"),s&&w(a),n))for(o=0;r=a[o++];)$t.test(r.type||"")&&n.push(r);return a=null,d},cleanData:function(t,e){for(var n,i,o,r,s=0,a=ot.expando,l=ot.cache,c=nt.deleteExpando,u=ot.event.special;null!=(n=t[s]);s++)if((e||ot.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?ot.event.remove(n,i):ot.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==_t?n.removeAttribute(a):n[a]=null,X.push(o))}}}),ot.fn.extend({text:function(t){return It(this,function(t){return void 0===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?ot.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||ot.cleanData(m(n)),n.parentNode&&(e&&ot.contains(n.ownerDocument,n)&&w(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ot.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ot.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return It(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Wt,""):void 0;if("string"==typeof t&&!qt.test(t)&&(nt.htmlSerialize||!Ft.test(t))&&(nt.leadingWhitespace||!Ht.test(t))&&!Kt[(jt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Dt,"<$1></$2>");try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(ot.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ot.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Y.apply([],t);var n,i,o,r,s,a,l=0,c=this.length,u=this,p=c-1,d=t[0],h=ot.isFunction(d);if(h||c>1&&"string"==typeof d&&!nt.checkClone&&Vt.test(d))return this.each(function(n){var i=u.eq(n);h&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(c&&(a=ot.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=ot.map(m(a,"script"),C),o=r.length;l<c;l++)i=a,l!==p&&(i=ot.clone(i,!0,!0),o&&ot.merge(r,m(i,"script"))),e.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,ot.map(r,b),l=0;l<o;l++)i=r[l],$t.test(i.type||"")&&!ot._data(i,"globalEval")&&ot.contains(s,i)&&(i.src?ot._evalUrl&&ot._evalUrl(i.src):ot.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xt,"")));a=n=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var n,i=0,o=[],r=ot(t),s=r.length-1;i<=s;i++)n=i===s?this:this.clone(!0),ot(r[i])[e](n),J.apply(o,n.get());return this.pushStack(o)}});var Zt,Qt={};!function(){var t;nt.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,i;return n=ft.getElementsByTagName("body")[0],n&&n.style?(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),typeof e.style.zoom!==_t&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ft.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(i),t):void 0}}();var te,ee,ne=/^margin/,ie=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),oe=/^(top|right|bottom|left)$/;t.getComputedStyle?(te=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ee=function(t,e,n){var i,o,r,s,a=t.style;return n=n||te(t),s=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==s||ot.contains(t.ownerDocument,t)||(s=ot.style(t,e)),ie.test(s)&&ne.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):ft.documentElement.currentStyle&&(te=function(t){return t.currentStyle},ee=function(t,e,n){var i,o,r,s,a=t.style;return n=n||te(t),s=n?n[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),ie.test(s)&&!oe.test(e)&&(i=a.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,n,i,o;n=ft.getElementsByTagName("body")[0],n&&n.style&&(e=ft.createElement("div"),i=ft.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,t.getComputedStyle&&(r="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(ft.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),n.removeChild(i))}var n,i,o,r,s,a,l;n=ft.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=n.getElementsByTagName("a")[0],i=o&&o.style,i&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,ot.extend(nt,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==r&&e(),r},reliableMarginRight:function(){return null==l&&e(),l}}))}(),ot.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o};var re=/alpha\([^)]*\)/i,se=/opacity\s*=\s*([^)]*)/,ae=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+Tt+")(.*)$","i"),ce=new RegExp("^([+-])=("+Tt+")","i"),ue={position:"absolute",visibility:"hidden",display:"block"},pe={letterSpacing:"0",fontWeight:"400"},de=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ee(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=ot.camelCase(e),l=t.style;if(e=ot.cssProps[a]||(ot.cssProps[a]=k(l,a)),s=ot.cssHooks[e]||ot.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=ce.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ot.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||ot.cssNumber[a]||(n+="px"),nt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,i)))))try{l[e]=n}catch(c){}}},css:function(t,e,n,i){var o,r,s,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=k(t.style,a)),s=ot.cssHooks[e]||ot.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=ee(t,e,i)),"normal"===r&&e in pe&&(r=pe[e]),""===n||n?(o=parseFloat(r),n===!0||ot.isNumeric(o)?o||0:r):r}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,n,i){if(n)return ae.test(ot.css(t,"display"))&&0===t.offsetWidth?ot.swap(t,ue,function(){return A(t,e,i)}):A(t,e,i)},set:function(t,n,i){var o=i&&te(t);return I(t,n,i?B(t,e,i,nt.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,o),o):0)}}}),nt.opacity||(ot.cssHooks.opacity={get:function(t,e){return se.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=ot.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===ot.trim(r.replace(re,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=re.test(r)?r.replace(re,o):r+" "+o)}}),ot.cssHooks.marginRight=T(nt.reliableMarginRight,function(t,e){if(e)return ot.swap(t,{display:"inline-block"},ee,[t,"marginRight"])}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+kt[i]+e]=r[i]||r[i-2]||r[0];return o}},ne.test(t)||(ot.cssHooks[t+e].set=I)}),ot.fn.extend({css:function(t,e){return It(this,function(t,e,n){var i,o,r={},s=0;if(ot.isArray(e)){for(i=te(t),o=e.length;s<o;s++)r[e[s]]=ot.css(t,e[s],!1,i);return r}return void 0!==n?ot.style(t,e,n):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=O,O.prototype={constructor:O,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ot.cssNumber[n]?"":"px")},cur:function(){var t=O.propHooks[this.prop];return t&&t.get?t.get(this):O.propHooks._default.get(this)},run:function(t){var e,n=O.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ot.cssProps[t.prop]]||ot.cssHooks[t.prop])?ot.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ot.fx=O.prototype.init,ot.fx.step={};var he,fe,ge=/^(?:toggle|show|hide)$/,me=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),ye=/queueHooks$/,ve=[R],Ce={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=me.exec(e),r=o&&o[3]||(ot.cssNumber[t]?"":"px"),s=(ot.cssNumber[t]||"px"!==r&&+i)&&me.exec(ot.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,ot.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};ot.Animation=ot.extend(F,{tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;i<o;i++)n=t[i],Ce[n]=Ce[n]||[],Ce[n].unshift(e)},prefilter:function(t,e){e?ve.unshift(t):ve.push(t)}}),ot.speed=function(t,e,n){var i=t&&"object"==typeof t?ot.extend({},t):{complete:n||!n&&e||ot.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ot.isFunction(e)&&e};return i.duration=ot.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ot.fx.speeds?ot.fx.speeds[i.duration]:ot.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ot.isFunction(i.old)&&i.old.call(this),i.queue&&ot.dequeue(this,i.queue)},i},ot.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=ot.isEmptyObject(t),r=ot.speed(e,n,i),s=function(){var e=F(this,ot.extend({},t),r);(o||ot._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=ot.timers,s=ot._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ye.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ot._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=ot.timers,s=i?i.length:0;for(n.finish=!0,ot.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var n=ot.fn[e];ot.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(P(e,!0),t,i,o)}}),ot.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),ot.timers=[],ot.fx.tick=function(){var t,e=ot.timers,n=0;for(he=ot.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||ot.fx.stop(),he=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){fe||(fe=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(fe),fe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(t,e){return t=ot.fx?ot.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o;e=ft.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=e.getElementsByTagName("a")[0],n=ft.createElement("select"),o=n.appendChild(ft.createElement("option")),t=e.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==e.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!t.value,nt.optSelected=o.selected,nt.enctype=!!ft.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!o.disabled,t=ft.createElement("input"),t.setAttribute("value",""),nt.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),nt.radioValue="t"===t.value}();var be=/\r/g;ot.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=ot.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,ot(this).val()):t,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(be,""):null==n?"":n)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t))}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||o<0,s=r?null:[],a=r?o+1:i.length,l=o<0?a:r?o:0;l<a;l++)if(n=i[l],(n.selected||l===o)&&(nt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ot.nodeName(n.parentNode,"optgroup"))){if(e=ot(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=ot.makeArray(e),s=o.length;s--;)if(i=o[s],ot.inArray(ot.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){if(ot.isArray(e))return t.checked=ot.inArray(ot(t).val(),e)>=0}},nt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var we,xe,_e=ot.expr.attrHandle,Se=/^(?:checked|selected)$/i,Ee=nt.getSetAttribute,Te=nt.input;ot.fn.extend({attr:function(t,e){return It(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===_t?ot.prop(t,e,n):(1===r&&ot.isXMLDoc(t)||(e=e.toLowerCase(),i=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?xe:we)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=ot.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void ot.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(Ct);if(r&&1===t.nodeType)for(;n=r[o++];)i=ot.propFix[n]||n,ot.expr.match.bool.test(n)?Te&&Ee||!Se.test(n)?t[i]=!1:t[ot.camelCase("default-"+n)]=t[i]=!1:ot.attr(t,n,""),t.removeAttribute(Ee?n:i)},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),xe={set:function(t,e,n){return e===!1?ot.removeAttr(t,n):Te&&Ee||!Se.test(n)?t.setAttribute(!Ee&&ot.propFix[n]||n,n):t[ot.camelCase("default-"+n)]=t[n]=!0,n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_e[e]||ot.find.attr;_e[e]=Te&&Ee||!Se.test(e)?function(t,e,i){var o,r;return i||(r=_e[e],_e[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,_e[e]=r),o}:function(t,e,n){if(!n)return t[ot.camelCase("default-"+e)]?e.toLowerCase():null}}),Te&&Ee||(ot.attrHooks.value={set:function(t,e,n){return ot.nodeName(t,"input")?void(t.defaultValue=e):we&&we.set(t,e,n)}}),Ee||(we={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},_e.id=_e.name=_e.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},ot.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:we.set},ot.attrHooks.contenteditable={set:function(t,e,n){we.set(t,""!==e&&e,n)}},ot.each(["width","height"],function(t,e){ot.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}})),nt.style||(ot.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var ke=/^(?:input|select|textarea|button|object)$/i,Le=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return It(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ot.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!ot.isXMLDoc(t),r&&(e=ot.propFix[e]||e,o=ot.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ke.test(t.nodeName)||Le.test(t.nodeName)&&t.href?0:-1}}}}),nt.hrefNormalized||ot.each(["href","src"],function(t,e){ot.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),nt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),nt.enctype||(ot.propFix.enctype="encoding");var Ie=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,c="string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(Ct)||[];a<l;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ie," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=ot.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(Ct)||[];a<l;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ie," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=t?ot.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(n){ot(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=ot(this),r=t.match(Ct)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else n!==_t&&"boolean"!==n||(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ie," ").indexOf(e)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Be=ot.now(),Ae=/\?/,Oe=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=ot.trim(e+"");return o&&!ot.trim(o.replace(Oe,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+e)},ot.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),n};var Ne,Pe,Me=/#.*$/,Re=/([?&])_=[^&]*/,We=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,He=/^(?:GET|HEAD)$/,De=/^\/\//,je=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},Ue={},qe="*/".concat("*");try{Pe=location.href}catch(Ve){Pe=ft.createElement("a"),Pe.href="",Pe=Pe.href}Ne=je.exec(Pe.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe,type:"GET",isLocal:Fe.test(Ne[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,ot.ajaxSettings),e):j(ot.ajaxSettings,t)},ajaxPrefilter:H(ze),ajaxTransport:H(Ue),ajax:function(t,e){function n(t,e,n,i){var o,u,y,v,b,x=e;2!==C&&(C=2,a&&clearTimeout(a),c=void 0,s=i||"",w.readyState=t>0?4:0,o=t>=200&&t<300||304===t,n&&(v=z(p,w,n)),v=U(p,v,w,o),o?(p.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(ot.lastModified[r]=b),b=w.getResponseHeader("etag"),b&&(ot.etag[r]=b)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=v.state,u=v.data,y=v.error,o=!y)):(y=x,!t&&x||(x="error",t<0&&(t=0))),w.status=t,w.statusText=(e||x)+"",o?f.resolveWith(d,[u,x,w]):f.rejectWith(d,[w,x,y]),w.statusCode(m),m=void 0,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[w,p,o?u:y]),g.fireWith(d,[w,x]),l&&(h.trigger("ajaxComplete",[w,p]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,c,u,p=ot.ajaxSetup({},e),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?ot(d):ot.event,f=ot.Deferred(),g=ot.Callbacks("once memory"),m=p.statusCode||{},y={},v={},C=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===C){if(!u)for(u={};e=We.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===C?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return C||(t=v[n]=v[n]||t,y[t]=e),this},overrideMimeType:function(t){return C||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(C<2)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return c&&c.abort(e),n(0,e),this}};if(f.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,p.url=((t||p.url||Pe)+"").replace(Me,"").replace(De,Ne[1]+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=ot.trim(p.dataType||"*").toLowerCase().match(Ct)||[""],null==p.crossDomain&&(i=je.exec(p.url.toLowerCase()),p.crossDomain=!(!i||i[1]===Ne[1]&&i[2]===Ne[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ne[3]||("http:"===Ne[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ot.param(p.data,p.traditional)),D(ze,p,e,w),2===C)return w;l=p.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!He.test(p.type),r=p.url,p.hasContent||(p.data&&(r=p.url+=(Ae.test(r)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Re.test(r)?r.replace(Re,"$1_="+Be++):r+(Ae.test(r)?"&":"?")+"_="+Be++)),p.ifModified&&(ot.lastModified[r]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[r]),ot.etag[r]&&w.setRequestHeader("If-None-Match",ot.etag[r])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qe+"; q=0.01":""):p.accepts["*"]);for(o in p.headers)w.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(p.beforeSend.call(d,w,p)===!1||2===C))return w.abort();b="abort";for(o in{success:1,error:1,complete:1})w[o](p[o]);if(c=D(Ue,p,e,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},p.timeout));try{C=1,c.send(y,n)}catch(x){if(!(C<2))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return ot.get(t,e,n,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,n,i,o){return ot.isFunction(n)&&(o=o||i,i=n,n=void 0),ot.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){if(ot.isFunction(t))return this.each(function(e){ot(this).wrapAll(t.call(this,e))});if(this[0]){var e=ot(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(n){ot(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ot.css(t,"display"))},ot.expr.filters.visible=function(t){return!ot.expr.filters.hidden(t)};var $e=/%20/g,Ge=/\[\]$/,Xe=/\r?\n/g,Ke=/^(?:submit|button|image|reset|file)$/i,Ye=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var n,i=[],o=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){o(this.name,this.value)});else for(n in t)q(n,t[n],e,o);return i.join("&").replace($e,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Ye.test(this.nodeName)&&!Ke.test(t)&&(this.checked||!Bt.test(t))}).map(function(t,e){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(t){return{name:e.name,value:t.replace(Xe,"\r\n")}}):{name:e.name,value:n.replace(Xe,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||$()}:V;var Je=0,Ze={},Qe=ot.ajaxSettings.xhr();t.ActiveXObject&&ot(t).on("unload",function(){for(var t in Ze)Ze[t](void 0,!0)}),nt.cors=!!Qe&&"withCredentials"in Qe,Qe=nt.ajax=!!Qe,Qe&&ot.ajaxTransport(function(t){if(!t.crossDomain||nt.cors){var e;return{send:function(n,i){var o,r=t.xhr(),s=++Je;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var a,l,c;if(e&&(o||4===r.readyState))if(delete Ze[s],e=void 0,r.onreadystatechange=ot.noop,o)4!==r.readyState&&r.abort();else{c={},a=r.status,"string"==typeof r.responseText&&(c.text=r.responseText);try{
l=r.statusText}catch(u){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&i(a,l,c,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Ze[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=ft.head||ot("head")[0]||ft.documentElement;return{send:function(i,o){e=ft.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||ot.expando+"_"+Be++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+o):e.jsonp!==!1&&(e.url+=(Ae.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||ot.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,tn.push(o)),s&&ot.isFunction(r)&&r(s[0]),s=r=void 0}),"script"}),ot.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||ft;var i=pt.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=ot.buildFragment([t],e,o),o&&o.length&&ot(o).remove(),ot.merge([],i.childNodes))};var nn=ot.fn.load;ot.fn.load=function(t,e,n){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return a>=0&&(i=ot.trim(t.slice(a,t.length)),t=t.slice(0,a)),ot.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&ot.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?ot("<div>").append(ot.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length};var on=t.document.documentElement;ot.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c,u=ot.css(t,"position"),p=ot(t),d={};"static"===u&&(t.style.position="relative"),a=p.offset(),r=ot.css(t,"top"),l=ot.css(t,"left"),c=("absolute"===u||"fixed"===u)&&ot.inArray("auto",[r,l])>-1,c?(i=p.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):p.css(d)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,ot.contains(e,o)?(typeof o.getBoundingClientRect!==_t&&(i=o.getBoundingClientRect()),n=G(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===ot.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(n=t.offset()),n.top+=ot.css(t[0],"borderTopWidth",!0),n.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ot.css(i,"marginTop",!0),left:e.left-n.left-ot.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||on;t&&!ot.nodeName(t,"html")&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||on})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);ot.fn[t]=function(i){return It(this,function(t,i,o){var r=G(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?ot(r).scrollLeft():o,n?o:ot(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=T(nt.pixelPosition,function(t,n){if(n)return n=ee(t,e),ie.test(n)?ot(t).position()[e]+"px":n})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){ot.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return It(this,function(e,n,i){var o;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?ot.css(e,n,s):ot.style(e,n,i,s)},e,r?i:void 0,r,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var rn=t.jQuery,sn=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=sn),e&&t.jQuery===ot&&(t.jQuery=rn),ot},typeof e===_t&&(t.uLiB=t.uLiB||{},t.uLiB.$=ot,t.Comagic&&(t.Comagic.$=ot)),ot}),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);i.fn.fileupload=function(t){var e={action:"",onSubmit:function(t){},onReceive:function(t){},onUsupportedFileExtension:function(t,e){},validExtensions:void 0};return t&&i.extend(e,t),this.each(function(){var t=i(this);if(!t.data("fileupload-initialized")){var n="fileupload-iframe-"+t.attr("id"),o='<iframe width="0" height="0" style="display:none" name="'+n+'" id="'+n+'" />',r='<form action="'+e.action+'" method="POST" enctype="multipart/form-data" accept-charset="'+e.acceptCharset+'" target="'+n+'" style="margin:0;padding:0" />';t.wrap(r),i("body").after(o),i("#"+n).load(function(){var n,i;try{i=this.contentWindow.document.body.textContent;try{n=JSON.parse(i)}catch(o){n=i}this.contentWindow.document.body.innerHtml=""}catch(o){}e.onReceive.apply(t,[n]),t.data("fileupload-busy",!1)}),t.change(function(){if(t.data("fileupload-busy")!==!0){var n=t.val();if(n){var o=n.split(".").pop().toLowerCase(),r=!e.validExtensions||i.inArray(o,e.validExtensions)>=0;r?(e.onSubmit.apply(t,[n]),t.data("fileupload-busy",!0),t.parents("form:first").submit(function(t){t.stopPropagation()}).submit(),t.val("")):e.onUnsupportedFileExtension.apply(t,[o,e.validExtensions.join(", ")])}}}),t.data("fileupload-initialized",!0)}})}}(window,"uLiB.jplugin"),function(t,e){var n=t.uLiB,i=n.util,o=uLiB.$;o.fn.center=function(t,e,n){e=e||"hv",t=t||window;var r=o(t).offset(),s=r?r.top:0,a=r?r.left:0;if("fixed"!==this.css("position")&&this.css("position","absolute"),e.indexOf("v")!=-1){var l=i.elementHeight(t===window?null:t);this.css("top",Math.max(0,(l-o(this).outerHeight())/2+("fixed"==this.css("position")?0:o(t).scrollTop()))+s+"px")}if(e.indexOf("h")!=-1){var c=i.elementWidth(t===window?null:t);this.css("left",Math.max(0,(c-o(this).outerWidth())/2+("fixed"==this.css("position")?0:o(t).scrollLeft()))+a+"px")}var u=this;return n&&o(window).resize(function(){o(u).center(t,e,!1)}),this}}(window,"uLiB."),function(t,e){var n=t.uLiB,i=n.util,o=uLiB.$;o.fn.anchor=function(e,n,r,s){function a(){if(!i.C.IS_PHONE){var t,r,a=n.split("-"),c=o(e),u=o(l),p=c.offset(),d=o("body").css("position"),h=u.parent(),f=h.css("position"),g=0,m=0;a[0].indexOf("b")!=-1&&(m+=c.outerHeight()),a[0].indexOf("r")!=-1?g+=c.outerWidth():a[0].indexOf("c")!=-1&&(g+=(c.outerWidth()-u.outerWidth())/2),a[1].indexOf("b")!=-1&&(m-=u.outerHeight()),a[1].indexOf("r")!=-1&&(g-=u.outerWidth()),m=p.top+m+s.y,g=p.left+g+s.x,"static"!==d&&(t=o("body").offset(),m-=t.top,g-=t.left),h.is("body")||"static"===f||(r=h.offset(),m-=r.top,g-=r.left),m=m<0?0:m,g=g<0?0:g,o(l).css({top:m+"px",left:g+"px"})}}var l=this;return i.isObject(r)&&(s=r,r=!1),s||(s={}),s.x||(s.x=0),s.y||(s.y=0),a(),r&&o(t).scroll(a).resize(a),o(this)}}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$),o=i,r=i;r.fn.extend({slimScroll:function(e){var n={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i=o.extend(n,e);return this.each(function(){function n(e){if(p){var e=e||t.event,n=0;e.wheelDelta&&(n=-e.wheelDelta/120),e.detail&&(n=e.detail/3);var s=e.target||e.srcTarget||e.srcElement;o(s).closest("."+i.wrapperClass).is(x.parent())&&r(n,!0),e.preventDefault&&!w&&e.preventDefault(),w||(e.returnValue=!1)}}function r(t,e,n){w=!1;var o=t,r=x.outerHeight()-k.outerHeight();if(e&&(o=parseInt(k.css("top"))+t*parseInt(i.wheelStep)/100*k.outerHeight(),o=Math.min(Math.max(o,0),r),o=t>0?Math.ceil(o):Math.floor(o),k.css({top:o+"px"})),y=parseInt(k.css("top"))/(x.outerHeight()-k.outerHeight()),o=y*(x[0].scrollHeight-x.outerHeight()),n){o=t;var s=o/x[0].scrollHeight*x.outerHeight();s=Math.min(Math.max(s,0),r),k.css({top:s+"px"})}x.scrollTop(o),x.trigger("slimscrolling",~~o),c(),u()}function s(){t.addEventListener?(this.addEventListener("DOMMouseScroll",n,!1),this.addEventListener("mousewheel",n,!1)):document.attachEvent("onmousewheel",n)}function a(){return parseInt(x.css("border-top-width"),10)+parseInt(x.css("border-top-width"),10)}function l(){var t=x[0].scrollHeight;t&&(m=Math.max(x.outerHeight()/(t+a())*x.outerHeight(),b),k.css({height:m+"px"}));var e=m==x.outerHeight()?"none":"block";k.css({display:e})}function c(){if(l(),clearTimeout(f),y==~~y){if(w=i.allowPageScroll,v!=y){var t=0==~~y?"top":"bottom";x.trigger("slimscroll",t)}}else w=!1;return v=y,m>=x.outerHeight()?void(w=!0):(k.stop(!0,!0).fadeIn("fast"),void(i.railVisible&&T.stop(!0,!0).fadeIn("fast")))}function u(){i.alwaysVisible||(f=setTimeout(function(){i.disableFadeOut&&p||d||h||(k.fadeOut("slow"),T.fadeOut("slow"))},1e3))}var p,d,h,f,g,m,y,v,C="<div></div>",b=30,w=!1,x=o(this);if(x.parent().hasClass(i.wrapperClass)){var _=x.scrollTop();if(k=x.parent().find("."+i.barClass),T=x.parent().find("."+i.railClass),l(),o.isPlainObject(e)){if("height"in e&&"auto"==e.height){x.parent().css("height","auto"),x.css("height","auto");var S=x.parent().parent().height();x.parent().css("height",S),x.css("height",S)}if("scrollTo"in e)_=parseInt(i.scrollTo);else if("scrollBy"in e)_+=parseInt(i.scrollBy);else if("destroy"in e)return k.remove(),T.remove(),void x.unwrap();r(_,!1,!0)}}else{i.height="auto"==e.height?x.parent().actual("height"):e.height;var E=o(C).addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height});x.css({overflow:"hidden",height:i.height}),"block"===x.css("display")&&x.css({width:i.width});var T=o(C).addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.railBorderRadius,background:i.railColor,opacity:i.railOpacity,zIndex:90}),k=o(C).addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.borderRadius,BorderRadius:i.borderRadius,MozBorderRadius:i.borderRadius,WebkitBorderRadius:i.borderRadius,zIndex:99}),L="right"==i.position?{right:i.distance}:{left:i.distance};T.css(L),k.css(L),x.wrap(E),x.parent().append(k),x.parent().append(T),i.railDraggable&&k.bind("mousedown",function(t){var e=o(document);h=!0;var n=parseFloat(k.css("top")),i=t.pageY;return e.bind("mousemove.slimscroll",function(t){var e=n+t.pageY-i;k.css("top",e),r(0,k.position().top,!1)}),e.bind("mouseup.slimscroll",function(t){h=!1,u(),e.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),T.hover(function(){c()},function(){u()}),k.hover(function(){d=!0},function(){d=!1}),x.hover(function(){p=!0,c(),u()},function(){p=!1,u()}),x.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(g=t.originalEvent.touches[0].pageY)}),x.bind("touchmove",function(t){if(w||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(g-t.originalEvent.touches[0].pageY)/i.touchScrollStep;r(e,!0),g=t.originalEvent.touches[0].pageY}}),l(),"bottom"===i.start?(k.css({top:x.outerHeight()-k.outerHeight()}),r(0,!0)):"top"!==i.start&&(r(o(i.start).position().top,null,!0),i.alwaysVisible||k.hide()),s()}}),this}}),r.fn.extend({slimscroll:r.fn.slimScroll})}(window,"uLiB.jplugin"),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t,e){var n="watermark",i="watermarkClass",o="watermarkFocus",r="watermarkSubmit",s="watermarkMaxLength",a="watermarkPassword",l="watermarkText",c=/\r/g,u=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,p="input:data("+n+"),textarea:data("+n+")",d=":watermarkable",h=["Page_ClientValidate"],f=!1,g="placeholder"in document.createElement("input");t.watermark=t.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(e){t(e).filter(p).each(function(){t.watermark._hide(t(this))})},_hide:function(t,e){var n=t[0],o=(n.value||"").replace(c,""),r=t.data(l)||"",u=t.data(s)||0,p=t.data(i);if(r.length&&o==r){if(n.value="",t.data(a)&&"text"===(t.attr("type")||"")){var d=t.data(a)||[],h=t.parent()||[];d.length&&h.length&&(h[0].removeChild(t[0]),h[0].appendChild(d[0]),t=d)}u&&(t.attr("maxLength",u),t.removeData(s)),e&&(t.attr("autocomplete","off"),window.setTimeout(function(){t.select()},1))}p&&t.removeClass(p)},show:function(e){t(e).filter(p).each(function(){t.watermark._show(t(this))})},_show:function(e){var n=e[0],r=(n.value||"").replace(c,""),u=e.data(l)||"",p=e.attr("type")||"",d=e.data(i);if(0!=r.length&&r!=u||e.data(o))t.watermark._hide(e);else{if(f=!0,e.data(a)&&"password"===p){var h=e.data(a)||[],g=e.parent()||[];h.length&&g.length&&(g[0].removeChild(e[0]),g[0].appendChild(h[0]),e=h,e.attr("maxLength",u.length),n=e[0])}if("text"===p||"search"===p){var m=e.attr("maxLength")||0;m>0&&u.length>m&&(e.data(s,m),e.attr("maxLength",u.length))}d&&e.addClass(d),n.value=u}},hideAll:function(){f&&(t.watermark.hide(d),f=!1)},showAll:function(){t.watermark.show(d)}},t.fn.watermark=t.fn.watermark||function(e,s){if(!this.length)return this;var u=!1,p="string"==typeof e;return p&&(e=e.replace(c,"")),"object"==typeof s?(u="string"==typeof s.className,s=t.extend({},t.watermark.options,s)):"string"==typeof s?(u=!0,s=t.extend({},t.watermark.options,{className:s})):s=t.watermark.options,"function"!=typeof s.useNative&&(s.useNative=s.useNative?function(){return!0}:function(){return!1}),this.each(function(){var h=t(this);if(h.is(d)){if(h.data(n))(p||u)&&(t.watermark._hide(h),p&&h.data(l,e),u&&h.data(i,s.className));else{if(g&&s.useNative.call(this,h)&&"TEXTAREA"!==(h.attr("tagName")||""))return void(p&&h.attr("placeholder",e));if(h.data(l,p?e:""),h.data(i,s.className),h.data(n,1),"password"===(h.attr("type")||"")){var f=h.wrap("<span>").parent(),m=t(f.html().replace(/type=["']?password["']?/i,'type="text"'));m.data(l,h.data(l)),m.data(i,h.data(i)),m.data(n,1),m.attr("maxLength",e.length),m.focus(function(){t.watermark._hide(m,!0)}).bind("dragenter",function(){t.watermark._hide(m)}).bind("dragend",function(){window.setTimeout(function(){m.blur()},1)}),h.blur(function(){t.watermark._show(h)}).bind("dragleave",function(){t.watermark._show(h)}),m.data(a,h),h.data(a,m)}else h.focus(function(){h.data(o,1),t.watermark._hide(h,!0)}).blur(function(){h.data(o,0),t.watermark._show(h)}).bind("dragenter",function(){t.watermark._hide(h)}).bind("dragleave",function(){t.watermark._show(h)}).bind("dragend",function(){window.setTimeout(function(){t.watermark._show(h)},1)}).bind("drop",function(t){var e=h[0],n=t.originalEvent.dataTransfer.getData("Text");(e.value||"").replace(c,"").replace(n,"")===h.data(l)&&(e.value=n),h.focus()});if(this.form){var y=this.form,v=t(y);v.data(r)||(v.submit(t.watermark.hideAll),y.submit?(v.data(r,y.submit),y.submit=function(e,n){return function(){var i=n.data(r);t.watermark.hideAll(),i.apply?i.apply(e,Array.prototype.slice.call(arguments)):i()}}(y,v)):(v.data(r,1),y.submit=function(e){return function(){t.watermark.hideAll(),delete e.submit,e.submit()}}(y)))}}t.watermark._show(h)}})},t.watermark.runOnce&&(t.watermark.runOnce=!1,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},watermarkable:function(t){var e,n=t.nodeName;return"TEXTAREA"===n||"INPUT"===n&&(e=t.getAttribute("type"),!e||!u.test(e))}}),function(e){t.fn.val=function(){var i=Array.prototype.slice.call(arguments);if(!this.length)return i.length?this:void 0;if(i.length)return e.apply(this,i),t.watermark.show(this),this;if(this.data(n)){var o=(this[0].value||"").replace(c,"");return o===(this.data(l)||"")?"":o}return e.apply(this)}}(t.fn.val),h.length&&t(function(){var e,n,i;for(e=h.length-1;e>=0;e--)n=h[e],i=window[n],"function"==typeof i&&(window[n]=function(e){return function(){return t.watermark.hideAll(),e.apply(null,Array.prototype.slice.call(arguments))}}(i))}),t(window).bind("beforeunload",function(){t.watermark.options.hideBeforeUnload&&t.watermark.hideAll()}))}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){t.fn.resizecrop=function(e){var n={width:50,height:50,vertical:"center",horizontal:"center",wrapper:"span",moveClass:!0,moveId:!0,className:"resizecrop",zoom:!0,wrapperCreated:!1,wrapperCSS:{}},e=t.extend(n,e);return this.each(function(){function n(t){if(realWidth=t[0].width,realHeight=t[0].height,width_ratio=e.width/realWidth,height_ratio=e.height/realHeight,width_ratio>height_ratio){switch((e.zoom||width_ratio<1)&&(t.width(e.width),realHeight=width_ratio*realHeight),e.vertical){case"top":t.css("top",0);break;case"bottom":t.css("bottom",0);break;case"center":default:t.css("top",(realHeight-e.height)/-2+"px")}e.zoom||width_ratio<1?t.css("left",0):t.css("left",(realWidth-e.width)/-2+"px")}else{switch((e.zoom||height_ratio<1)&&(t.height(e.height),realWidth=height_ratio*realWidth),e.horizontal){case"left":t.css("left",0);break;case"right":t.css("right",0);break;case"center":default:t.css("left",(realWidth-e.width)/-2+"px")}e.zoom||height_ratio<1?t.css("top",0):t.css("top",(realHeight-e.height)/-2+"px")}t.css({position:"relative",display:"block"})}var i=t(this);if(i.css("display","none"),i.width("auto").height("auto"),!e.wrapperCreated){var o=t(document.createElement(e.wrapper)).css({width:e.width,height:e.height,overflow:"hidden",display:"inline-block","vertical-align":"middle",position:"relative"}).css(e.wrapperCSS);if(e.moveClass){var r=i.attr("class");if("undefined"!=typeof r&&r!==!1&&""!==r){var s=r.split(/\s+/);t.each(s,function(t,e){o.addClass(e)}),i.removeAttr("class"),i.addClass(e.className)}}if(e.moveId){var a=i.attr("id");"undefined"!=typeof a&&a!==!1&&""!==a&&(i.removeAttr("id"),o.attr("id",a))}i.wrap(o)}this.complete?n(i):i.load(function(){n(t(this))})})},t.fn.cropresize=t.fn.resizecrop}(i)}(window,"uLiB.jplugin"),function(t,e){function n(t,e){var i=[];if(t){var o=t.split(" ");if(o.length>1&&(t=o),"array"==l.type(t)){for(var r,s=0;r=o[s];s++)o[s]=n(r);t=o.join(" ")}else i.push(u);i.push(t)}else i.push(u);return i=i.join("-"),e&&(i="."+i),a.getCssSelector(i,!0)}function i(t,e){return"function"==typeof t?t.call(e):t}function o(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}function r(t,e){this.$element=c(t),this.options=e,this.enabled=!0,this.fixTitle()}var s=t.uLiB,a=s.util,l=uLiB.$,c=l,u="tipsy";r.prototype={show:function(){var t=this.getTitleCfg();if(t&&this.enabled){var e=this.tip();e.find(n("inner",!0))[this.options.html?"html":"text"](t),e[0].className=n(),e.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o,r=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),s=e[0].offsetWidth,u=e[0].offsetHeight,p=i(this.options.gravity,this.$element[0]);switch(p.charAt(0)){case"n":o={top:this.options.offsetV+r.top+r.height+this.options.offset,left:r.left+r.width/2-s/2};break;case"s":o={top:this.options.offsetV+r.top-u-this.options.offset,left:this.options.offsetH+r.left+r.width/2-s/2};break;case"e":o={top:this.options.offsetV+r.top+r.height/2-u/2,left:this.options.offsetH+r.left-s-this.options.offset};break;case"w":o={top:this.options.offsetV+r.top+r.height/2-u/2,left:this.options.offsetH+r.left+r.width+this.options.offset}}if(2==p.length&&("w"==p.charAt(1)?o.left=this.options.offsetH+r.left+r.width/2-15:o.left=this.options.offsetH+r.left+r.width/2-s+15),"static"!==c("body").css("position")){var d=l("body").offset();o.left-=d.left,o.top-=d.top}e.css(o).addClass(n(p)),e.find(n("arrow",!0))[0].className=n("arrow arrow-"+p.charAt(0)),this.options.className&&e.addClass(i(this.options.className,this.$element[0])),this.options.fade?e.stop().css({opacity:0,display:"block",visibility:"visible",zIndex:a.getZIndexStr(10)}).animate({opacity:this.options.opacity}):e.css({visibility:"visible",opacity:this.options.opacity,zIndex:a.getZIndexStr(10)})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){c(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitleCfg:function(){var t,e=this.$element,n=this.options;this.fixTitle();var t,n=this.options;return"string"==typeof n.title?t=e.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(t=n.title.call(e[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||n.fallback},tip:function(){return this.$tip||(this.$tip=c(a.sformat('<div class="{0}"></div>',n())).html(a.sformat('<div class="{0}"></div><div class="{1}"></div>',n("arrow"),n("inner"))),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},c.fn.tipsy=function(t){function e(e){var n=c.data(e,"tipsy");return n||(n=new r(e,c.fn.tipsy.elementOptions(e,t)),c.data(e,"tipsy",n)),n}function n(){var n=e(this);n.hoverState="in",0==t.delayIn?n.show():(n.fixTitle(),setTimeout(function(){"in"==n.hoverState&&n.show()},t.delayIn))}function i(){var n=e(this);n.hoverState="out",0==t.delayOut?n.hide():setTimeout(function(){"out"==n.hoverState&&n.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var o=this.data("tipsy");return o&&o[t](),this}if(t=c.extend({},c.fn.tipsy.defaults,t),t.live||this.each(function(){e(this)}),"manual"!=t.trigger){var s=t.live?"live":"bind",a="hover"==t.trigger?"mouseenter":"focus",l="hover"==t.trigger?"mouseleave":"blur";this[s](a,n)[s](l,i)}return this},c.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",offsetH:0,offsetV:0},c.fn.tipsy.revalidate=function(){c(n(void 0,!0)).each(function(){var t=c.data(this,"tipsy-pointee");t&&o(t)||c(this).remove()})},c.fn.tipsy.elementOptions=function(t,e){return c.metadata?c.extend({},e,c(t).metadata()):e},c.fn.tipsy.autoNS=function(){return c(this).offset().top>c(document).scrollTop()+c(window).height()/2?"s":"n"},c.fn.tipsy.autoWE=function(){return c(this).offset().left>c(document).scrollLeft()+c(window).width()/2?"e":"w"},c.fn.tipsy.autoBounds=function(t,e){return function(){var n={ns:e[0],ew:e.length>1&&e[1]},i=c(document).scrollTop()+t,o=c(document).scrollLeft()+t,r=c(this);return r.offset().top<i&&(n.ns="n"),r.offset().left<o&&(n.ew="w"),c(window).width()+c(document).scrollLeft()-r.offset().left<t&&(n.ew="e"),c(window).height()+c(document).scrollTop()-r.offset().top<t&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}}}(window,"uLiB."),function(t,e){var n=t.uLiB,i=n.util,o=uLiB.$,r=o,s="autogrow-textarea-mirror";r.fn.autogrow=function(t){return t=r.extend({},{animation:i.C.ANIMATION_DURATION,maxHeight:0},t),this.each(function(){var e=function(t){return r(t).after(i.sformat('<div class="{0}"></div>',i.getCssSelector(s,!0))),r(t).next(i.getCssSelector(s,!0,!0))[0]},n=function(t){return(""+t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+"."},o=function(e){l.innerHTML=n(e.value);var i=r(l).height(),o=r(e).height();if(!(t.maxHeight&&i>t.maxHeight)){var s=function(){t.onHeightSet&&t.onHeightSet(i,i-o,t.animation)};o!=i&&(t.animation&&!t.disableAnimationOnce?r(e).animate({height:i},t.animation,"swing",s):(t.disableAnimationOnce&&(t.disableAnimationOnce=!1),r(e).height(i),s()))}},a=function(){o(this)},l=e(this);l.style.display="none",l.style.wordWrap="break-word",l.style.whiteSpace="normal",l.style.padding=r(this).css("padding"),l.style.width=r(this).css("width"),l.style.minHeight=r(this).css("minHeight"),l.style.boxSizing=r(this).css("box-sizing"),l.style.fontFamily=r(this).css("font-family"),l.style.fontSize=r(this).css("font-size"),l.style.lineHeight=r(this).css("line-height"),this.style.overflow="hidden",this.onkeyup=a,o(this)})}}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){var e="ui-effects-";return t.effects={effect:{}},function(t,e){function n(t,e,n){var i=p[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=c(),i=n._rgba=[];return e=e.toLowerCase(),f(l,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";if(a)return r=n[l](a),n[u[l].cache]=r[u[l].cache],i=n._rgba=r._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function o(t,e,n){return n=(n+1)%1,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=c.support={},h=t("<p>")[0],f=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=h.style.backgroundColor.indexOf("rgba")>-1,f(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,s,a,l){if(o===e)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=e);var p=this,d=t.type(o),h=this._rgba=[];return s!==e&&(o=[o,s,a,l],d="array"),"string"===d?this.parse(i(o)||r._default):"array"===d?(f(u.rgba.props,function(t,e){h[e.idx]=n(o[e.idx],e)}),this):"object"===d?(o instanceof c?f(u,function(t,e){o[e.cache]&&(p[e.cache]=o[e.cache].slice())}):f(u,function(e,i){var r=i.cache;f(i.props,function(t,e){if(!p[r]&&i.to){if("alpha"===t||null==o[t])return;p[r]=i.to(p._rgba)}p[r][e.idx]=n(o[t],e,!0)}),p[r]&&t.inArray(null,p[r].slice(0,3))<0&&(p[r][3]=1,i.from&&(p._rgba=i.from(p[r])))}),this):void 0},is:function(t){var e=c(t),n=!0,i=this;return f(u,function(t,o){var r,s=e[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],f(o.props,function(t,e){if(null!=s[e.idx])return n=s[e.idx]===r[e.idx]})),n}),n},_space:function(){var t=[],e=this;return f(u,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=c(t),o=i._space(),r=u[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return i=i[r.cache],f(r.props,function(t,o){var r=o.idx,s=a[r],c=i[r],u=p[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=n((c-s)*e+s,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=c(e)._rgba;return c(t.map(n,function(t,e){return(1-i)*o[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,o=t[1]/255,r=t[2]/255,s=t[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,p=.5*u;return e=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===c?0:p<=.5?c/u:c/(2-u),[Math.round(e)%360,n,p,null==s?1:s]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*o(a,s,e+1/3)),Math.round(255*o(a,s,e)),Math.round(255*o(a,s,e-1/3)),r]},f(u,function(i,o){var r=o.props,s=o.cache,l=o.to,u=o.from;c.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===e)return this[s].slice();var o,a=t.type(i),p="array"===a||"object"===a?i:arguments,d=this[s].slice();return f(r,function(t,e){var i=p["object"===a?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),u?(o=c(u(d)),o[s]=d,o):c(d)},f(r,function(e,n){c.fn[e]||(c.fn[e]=function(o){var r,s=t.type(o),l="alpha"===e?this._hsla?"hsla":"rgba":i,c=this[l](),u=c[n.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=t.type(o)),null==o&&n.empty?this:("string"===s&&(r=a.exec(o),r&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[n.idx]=o,this[l](c)))})})}),c.hook=function(e){var n=e.split(" ");f(n,function(e,n){t.cssHooks[n]={set:function(e,o){var r,s,a="";if("transparent"!==o&&("string"!==t.type(o)||(r=i(o)))){if(o=c(r||o),!d.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{e.style[n]=o}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=c(e.elem,n),e.end=c(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},c.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(n,i){
e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){function e(e){var n,i,o=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(i=o.length;i--;)n=o[i],"string"==typeof o[n]&&(r[t.camelCase(n)]=o[n]);else for(n in o)"string"==typeof o[n]&&(r[n]=o[n]);return r}function n(e,n){var i,r,s={};for(i in n)r=n[i],e[i]!==r&&(o[i]||!t.fx.step[i]&&isNaN(parseFloat(r))||(s[i]=r));return s}var i=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(o,r,s,a){var l=t.speed(r,s,a);return this.queue(function(){var r,s=t(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var n=t(this);return{el:n,start:e(this)}}),r=function(){t.each(i,function(t,e){o[e]&&s[e+"Class"](o[e])})},r(),c=c.map(function(){return this.end=e(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var e=this,n=t.Deferred(),i=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,i),n.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(s[0])})})},t.fn.extend({addClass:function(e){return function(n,i,o,r){return i?t.effects.animateClass.call(this,{add:n},i,o,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,i,o,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},i,o,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,i,o,r,s){return"boolean"==typeof i||void 0===i?o?t.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,s):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},i,o,r)}}(t.fn.toggleClass),switchClass:function(e,n,i,o,r){return t.effects.animateClass.call(this,{add:n,remove:e},i,o,r)}})}(),function(){function n(e,n,i,o){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(o=i,i=n,n={}),t.isFunction(i)&&(o=i,i=null),n&&t.extend(e,n),i=i||n.duration,e.duration=t.fx.off?0:"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:t.fx.speeds._default,e.complete=o||n.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"@VERSION",save:function(t,n){for(var i=0;i<n.length;i++)null!==n[i]&&t.data(e+n[i],t[0].style[n[i]])},restore:function(t,n){var i,o;for(o=0;o<n.length;o++)null!==n[o]&&(i=t.data(e+n[o]),void 0===i&&(i=""),t.css(n[o],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},i=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return e.wrap(i),(e[0]===r||t.contains(e[0],r))&&t(r).focus(),i=e.parent(),"static"===e.css("position")?(i.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,i){n[i]=e.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(o),i.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus()),e},setTransition:function(e,n,i,o){return o=o||{},t.each(n,function(t,n){var r=e.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),t.fn.extend({effect:function(){function e(e){function n(){t.isFunction(r)&&r.call(o[0]),t.isFunction(e)&&e()}var o=t(this),r=i.complete,a=i.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),n()):s.call(o[0],i,n)}var i=n.apply(this,arguments),o=i.mode,r=i.queue,s=t.effects.effect[i.effect];return t.fx.off||!s?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):r===!1?this.each(e):this.queue(r||"fx",e)},show:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(t.fn.show),hide:function(t){return function(e){if(i(e))return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(t.fn.hide),toggle:function(t){return function(e){if(i(e)||"boolean"==typeof e)return t.apply(this,arguments);var o=n.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),i=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(i=[parseFloat(n),e])}),i}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(t*-2+2)/2}})}(),t.effects}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){return t.effects.effect.fade=function(e,n){var i=t(this),o=t.effects.setMode(i,e.mode||"toggle");i.animate({opacity:o},{queue:!1,duration:e.duration,easing:e.easing,complete:n})}}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){return t.effects.effect.slide=function(e,n){var i,o=t(this),r=["position","top","bottom","left","right","width","height"],s=t.effects.setMode(o,e.mode||"show"),a="show"===s,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,p={};t.effects.save(o,r),o.show(),i=e.distance||o["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(i)?"-"+i:-i:i),p[c]=(a?u?"+=":"-=":u?"-=":"+=")+i,o.animate(p,{queue:!1,duration:e.duration,easing:e.easing,start:function(t){e.start&&(t.tweens[0].start=e.start)},step:function(t,n){e.step&&e.step(t,n)},complete:function(){"hide"===s&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),n()}})}}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){"function"==typeof define&&define.amd||t(i)}(function(t){return t.effects.effect.transfer=function(e,n){var i=t(this),o=t(e.to),r="fixed"===o.css("position"),s=t("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},p=i.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:p.top-a,left:p.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),n()})}})}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){t.fn.addBack=t.fn.addBack||t.fn.andSelf,t.fn.extend({actual:function(e,n){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var i,o,r={absolute:!1,clone:!1,includeMargin:!1},s=t.extend(r,n),a=this.eq(0);if(s.clone===!0)i=function(){var t="position: absolute !important; top: -1000 !important; ";a=a.clone().attr("style",t).appendTo("body")},o=function(){a.remove()};else{var l,c=[],u="";i=function(){l=a.parents().addBack().filter(":hidden"),u+="visibility: hidden !important; display: block !important; ",s.absolute===!0&&(u+="position: absolute !important; "),l.each(function(){var e=t(this),n=e.attr("style");c.push(n),e.attr("style",n?n+";"+u:u)})},o=function(){l.each(function(e){var n=t(this),i=c[e];void 0===i?n.removeAttr("style"):n.attr("style",i)})}}i();var p=/(outer)/.test(e)?a[e](s.includeMargin):a[e]();return o(),p}})}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$),o=i;!function(t){t.fn.getStyleObject=function(){var t,e=this.get(0),n={};if(window.getComputedStyle){var i=function(t,e){return e.toUpperCase()};t=window.getComputedStyle(e,null);for(var o=0,r=t.length;o<r;o++){var s=t[o],a=s.replace(/\-([a-z])/g,i),l=t.getPropertyValue(s);n[a]=l}return n}if(t=e.currentStyle){for(var s in t)n[s]=t[s];return n}return this.css()}}(o),o.fn.copyCss=function(t){var e=o(t).getStyleObject();this.css(e)}}(window,"uLiB."),function(t){var e,n,i="0.4.2",o="hasOwnProperty",r=/[\.\/]/,s=/\s*,\s*/,a="*",l=function(t,e){return t-e},c={n:{}},u=function(){for(var t=0,e=this.length;t<e;t++)if("undefined"!=typeof this[t])return this[t]},p=function(){for(var t=this.length;--t;)if("undefined"!=typeof this[t])return this[t]},d=function(t,i){t=String(t);var o,r=n,s=Array.prototype.slice.call(arguments,2),a=d.listeners(t),c=0,h=[],f={},g=[],m=e;g.firstDefined=u,g.lastDefined=p,e=t,n=0;for(var y=0,v=a.length;y<v;y++)"zIndex"in a[y]&&(h.push(a[y].zIndex),a[y].zIndex<0&&(f[a[y].zIndex]=a[y]));for(h.sort(l);h[c]<0;)if(o=f[h[c++]],g.push(o.apply(i,s)),n)return n=r,g;for(y=0;y<v;y++)if(o=a[y],"zIndex"in o)if(o.zIndex==h[c]){if(g.push(o.apply(i,s)),n)break;do if(c++,o=f[h[c]],o&&g.push(o.apply(i,s)),n)break;while(o)}else f[o.zIndex]=o;else if(g.push(o.apply(i,s)),n)break;return n=r,e=m,g};d._events=c,d.listeners=function(t){var e,n,i,o,s,l,u,p,d=t.split(r),h=c,f=[h],g=[];for(o=0,s=d.length;o<s;o++){for(p=[],l=0,u=f.length;l<u;l++)for(h=f[l].n,n=[h[d[o]],h[a]],i=2;i--;)e=n[i],e&&(p.push(e),g=g.concat(e.f||[]));f=p}return g},d.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(s),i=0,o=n.length;i<o;i++)!function(t){for(var n,i=t.split(r),o=c,s=0,a=i.length;s<a;s++)o=o.n,o=o.hasOwnProperty(i[s])&&o[i[s]]||(o[i[s]]={n:{}});for(o.f=o.f||[],s=0,a=o.f.length;s<a;s++)if(o.f[s]==e){n=!0;break}!n&&o.f.push(e)}(n[i]);return function(t){+t==+t&&(e.zIndex=+t)}},d.f=function(t){var e=[].slice.call(arguments,1);return function(){d.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},d.stop=function(){n=1},d.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},d.nts=function(){return e.split(r)},d.off=d.unbind=function(t,e){if(!t)return void(d._events=c={n:{}});var n=t.split(s);if(n.length>1)for(var i=0,l=n.length;i<l;i++)d.off(n[i],e);else{n=t.split(r);var u,p,h,i,l,f,g,m=[c];for(i=0,l=n.length;i<l;i++)for(f=0;f<m.length;f+=h.length-2){if(h=[f,1],u=m[f].n,n[i]!=a)u[n[i]]&&h.push(u[n[i]]);else for(p in u)u[o](p)&&h.push(u[p]);m.splice.apply(m,h)}for(i=0,l=m.length;i<l;i++)for(u=m[i];u.n;){if(e){if(u.f){for(f=0,g=u.f.length;f<g;f++)if(u.f[f]==e){u.f.splice(f,1);break}!u.f.length&&delete u.f}for(p in u.n)if(u.n[o](p)&&u.n[p].f){var y=u.n[p].f;for(f=0,g=y.length;f<g;f++)if(y[f]==e){y.splice(f,1);break}!y.length&&delete u.n[p].f}}else{delete u.f;for(p in u.n)u.n[o](p)&&u.n[p].f&&delete u.n[p].f}u=u.n}}},d.once=function(t,e){var n=function(){return d.unbind(t,n),e.apply(this,arguments)};return d.on(t,n)},d.version=i,d.toString=function(){return"You are running Eve "+i},t.uLiB||(t.uLiB={}),t.uLiB.eve=d}(this),function(t,e){var n=function(e){var n={},i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},o=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},r=0,s="M"+(+new Date).toString(36),a=function(){return s+(r++).toString(36)},l=Date.now||function(){return+new Date},c=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},u=function(t){var e=this;return null==t?e.spd:void(e.spd=t)},p=function(t){var e=this;return null==t?e.dur:(e.s=e.s*t/e.dur,void(e.dur=t))},d=function(){var t=this;delete n[t.id],t.update(),e("mina.stop."+t.id,t)},h=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},f=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t)},g=function(){var t,e=this;if(o(e.start)){t=[];for(var n=0,i=e.start.length;n<i;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},m=function(){var t=0;for(var o in n)if(n.hasOwnProperty(o)){var r=n[o],s=r.get();t++,r.s=(s-r.b)/(r.dur/r.spd),r.s>=1&&(delete n[o],r.s=1,t--,function(t){setTimeout(function(){e("mina.finish."+t.id,t)})}(r)),r.update()}t&&i(m)},y=function(t,e,o,r,s,l,v){var C={id:a(),start:t,end:e,b:o,s:0,dur:r-o,spd:1,get:s,set:l,easing:v||y.linear,status:c,speed:u,duration:p,stop:d,pause:h,resume:f,update:g};n[C.id]=C;var b,w=0;for(b in n)if(n.hasOwnProperty(b)&&(w++,2==w))break;return 1==w&&i(m),C};return y.time=l,y.getById=function(t){return n[t]||null},y.linear=function(t){return t},y.easeout=function(t){return Math.pow(t,1.7)},y.easein=function(t){return Math.pow(t,.48)},y.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),i=n-e,o=Math.pow(Math.abs(i),1/3)*(i<0?-1:1),r=-n-e,s=Math.pow(Math.abs(r),1/3)*(r<0?-1:1),a=o+s+.5;return 3*(1-a)*a*a+a*a*a},y.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},y.backout=function(t){if(0==t)return 0;t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},y.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},y.bounce=function(t){var e,n=7.5625,i=2.75;return t<1/i?e=n*t*t:t<2/i?(t-=1.5/i,e=n*t*t+.75):t<2.5/i?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e},t.mina=y,y}(t.uLiB.eve),i=function(n){function i(t,e){if(t){if(t.nodeType)return _(t);if(r(t,"array")&&i.set)return i.set.apply(i,t);if(t instanceof C)return t;if(null==e)return t=E.doc.querySelector(String(t)),_(t)}return t=null==t?"100%":t,e=null==e?"100%":e,new x(t,e)}function o(t,e){if(e){if("#text"==t&&(t=E.doc.createTextNode(e.text||e["#text"]||"")),"#comment"==t&&(t=E.doc.createComment(e.text||e["#text"]||"")),"string"==typeof t&&(t=o(t)),"string"==typeof e)return 1==t.nodeType?"xlink:"==e.substring(0,6)?t.getAttributeNS($,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(G,e.substring(4)):t.getAttribute(e):"text"==e?t.nodeValue:null;if(1==t.nodeType){for(var n in e)if(e[T](n)){var i=k(e[n]);i?"xlink:"==n.substring(0,6)?t.setAttributeNS($,n.substring(6),i):"xml:"==n.substring(0,4)?t.setAttributeNS(G,n.substring(4),i):t.setAttribute(n,i):t.removeAttribute(n)}}else"text"in e&&(t.nodeValue=e.text)}else t=E.doc.createElementNS(G,t);return t}function r(t,e){return e=k.prototype.toLowerCase.call(e),"finite"==e?isFinite(t):!("array"!=e||!(t instanceof Array||Array.isArray&&Array.isArray(t)))||("null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||R.call(t).slice(8,-1).toLowerCase()==e)}function s(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[T](n)&&(e[n]=s(t[n]));return e}function a(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function l(t,e,n){function i(){var o=Array.prototype.slice.call(arguments,0),r=o.join("␀"),s=i.cache=i.cache||{},l=i.count=i.count||[];return s[T](r)?(a(l,r),n?n(s[r]):s[r]):(l.length>=1e3&&delete s[l.shift()],l.push(r),s[r]=t.apply(e,o),n?n(s[r]):s[r])}return i}function c(t,e,n,i,o,r){if(null==o){var s=t-n,a=e-i;return s||a?(180+180*B.atan2(-a,-s)/P+360)%360:0}return c(t,e,o,r)-c(n,i,o,r)}function u(t){return t%360*P/180}function p(t){return 180*t/P%360}function d(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(t,n,i){return i=i.split(/\s*,\s*|\s+/),"rotate"==n&&1==i.length&&i.push(0,0),"scale"==n&&(i.length>2?i=i.slice(0,2):2==i.length&&i.push(0,0),1==i.length&&i.push(i[0],0,0)),"skewX"==n?e.push(["m",1,0,B.tan(u(i[0])),1,0,0]):"skewY"==n?e.push(["m",1,B.tan(u(i[0])),0,1,0,0]):e.push([n.charAt(0)].concat(i)),t}),e}function h(t,e){var n=et(t),o=new i.Matrix;if(n)for(var r=0,s=n.length;r<s;r++){var a,l,c,u,p,d=n[r],h=d.length,f=k(d[0]).toLowerCase(),g=d[0]!=f,m=g?o.invert():0;"t"==f&&2==h?o.translate(d[1],0):"t"==f&&3==h?g?(a=m.x(0,0),l=m.y(0,0),c=m.x(d[1],d[2]),u=m.y(d[1],d[2]),o.translate(c-a,u-l)):o.translate(d[1],d[2]):"r"==f?2==h?(p=p||e,o.rotate(d[1],p.x+p.width/2,p.y+p.height/2)):4==h&&(g?(c=m.x(d[2],d[3]),u=m.y(d[2],d[3]),o.rotate(d[1],c,u)):o.rotate(d[1],d[2],d[3])):"s"==f?2==h||3==h?(p=p||e,o.scale(d[1],d[h-1],p.x+p.width/2,p.y+p.height/2)):4==h?g?(c=m.x(d[2],d[3]),u=m.y(d[2],d[3]),o.scale(d[1],d[1],c,u)):o.scale(d[1],d[1],d[2],d[3]):5==h&&(g?(c=m.x(d[3],d[4]),u=m.y(d[3],d[4]),o.scale(d[1],d[2],c,u)):o.scale(d[1],d[2],d[3],d[4])):"m"==f&&7==h&&o.add(d[1],d[2],d[3],d[4],d[5],d[6])}return o}function f(t){var e=t.node.ownerSVGElement&&_(t.node.ownerSVGElement)||t.node.parentNode&&_(t.node.parentNode)||i.select("svg")||i(0,0),n=e.select("defs"),o=null!=n&&n.node;return o||(o=w("defs",e.node).node),o}function m(t){return t.node.ownerSVGElement&&_(t.node.ownerSVGElement)||i.select("svg")}function y(t,e,n){function i(t){if(null==t)return M;if(t==+t)return t;o(c,{width:t});try{return c.getBBox().width}catch(e){return 0}}function r(t){if(null==t)return M;if(t==+t)return t;o(c,{height:t});try{return c.getBBox().height}catch(e){return 0}}function s(i,o){null==e?l[i]=o(t.attr(i)||0):i==e&&(l=o(null==n?t.attr(i)||0:n))}var a=m(t).node,l={},c=a.querySelector(".svg---mgr");switch(c||(c=o("rect"),o(c,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),a.appendChild(c)),t.type){case"rect":s("rx",i),s("ry",r);case"image":s("width",i),s("height",r);case"text":s("x",i),s("y",r);break;case"circle":s("cx",i),s("cy",r),s("r",i);break;case"ellipse":s("cx",i),s("cy",r),s("rx",i),s("ry",r);break;case"line":s("x1",i),s("x2",i),s("y1",r),s("y2",r);break;case"marker":s("refX",i),s("markerWidth",i),s("refY",r),s("markerHeight",r);break;case"radialGradient":s("fx",i),s("fy",r);break;case"tspan":s("dx",i),s("dy",r);break;default:s(e,i)}return a.removeChild(c),l}function v(t){r(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach(function(t){i.appendChild(t.node)}):i.appendChild(t[e].node);var o=i.childNodes;for(e=0;e<o.length;e++)this[n++]=_(o[e]);return this}function C(t){if(t.snap in X)return X[t.snap];var e;try{e=t.ownerSVGElement}catch(n){}this.node=t,e&&(this.paper=new x(e)),this.type=t.tagName||t.nodeName;var i=this.id=V(this);if(this.anims={},this._={transform:[]},t.snap=i,X[i]=this,"g"==this.type&&(this.add=v),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var o in x.prototype)x.prototype[T](o)&&(this[o]=x.prototype[o])}function b(t){this.node=t}function w(t,e){var n=o(t);e.appendChild(n);var i=_(n);return i}function x(t,e){var n,i,r,s=x.prototype;if(t&&t.tagName&&"svg"==t.tagName.toLowerCase()){if(t.snap in X)return X[t.snap];var a=t.ownerDocument;n=new C(t),i=t.getElementsByTagName("desc")[0],r=t.getElementsByTagName("defs")[0],i||(i=o("desc"),i.appendChild(a.createTextNode("Created with Snap")),n.node.appendChild(i)),r||(r=o("defs"),n.node.appendChild(r)),n.defs=r;for(var l in s)s[T](l)&&(n[l]=s[l]);n.paper=n.root=n}else n=w("svg",E.doc.body),o(n.node,{height:e,version:1.1,width:t,xmlns:G});return n}function _(t){return t?t instanceof C||t instanceof b?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new x(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new x(t.contentDocument.getElementsByTagName("svg")[0]):new C(t):t}function S(t,e){for(var n=0,i=t.length;n<i;n++){var o={type:t[n].type,attr:t[n].attr()},r=t[n].children();e.push(o),r.length&&S(r,o.childNodes=[])}}i.version="0.4.0",i.toString=function(){return"Snap v"+this.version},i._={};var E={win:n.window,doc:n.window.document};i._.glob=E;var T="hasOwnProperty",k=String,L=parseFloat,I=parseInt,B=Math,A=B.max,O=B.min,N=B.abs,P=(B.pow,B.PI),M=(B.round,""),R=Object.prototype.toString,W=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,F=(i._.separator=/[,\s]+/,/[\s]*,[\s]*/),H={hs:1,rg:1},D=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,j=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,z=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/gi,U=0,q="S"+(+new Date).toString(36),V=function(t){return(t&&t.type?t.type:M)+q+(U++).toString(36)},$="http://www.w3.org/1999/xlink",G="http://www.w3.org/2000/svg",X={};i.url=function(e){return"url('"+t.location.href.split("#")[0]+"#"+e+"')"};i._.$=o,i._.id=V,i.format=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var o=i;return n.replace(e,function(t,e,n,i,r){e=e||i,o&&(e in o&&(o=o[e]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==i?t:o)+""};return function(e,i){return k(e).replace(t,function(t,e){return n(t,e,i)})}}(),i._.clone=s,i._.cacher=l,i.rad=u,i.deg=p,i.sin=function(t){return B.sin(i.rad(t))},i.tan=function(t){return B.tan(i.rad(t))},i.cos=function(t){return B.cos(i.rad(t))},i.asin=function(t){return i.deg(B.asin(t))},i.acos=function(t){return i.deg(B.acos(t))},i.atan=function(t){return i.deg(B.atan(t))},i.atan2=function(t){return i.deg(B.atan2(t))},i.angle=c,i.len=function(t,e,n,o){return Math.sqrt(i.len2(t,e,n,o))},i.len2=function(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i)},i.closestPoint=function(t,e,n){function i(t){var i=t.x-e,o=t.y-n;return i*i+o*o}for(var o,r,s,a,l=t.node,c=l.getTotalLength(),u=c/l.pathSegList.numberOfItems*.125,p=1/0,d=0;d<=c;d+=u)(a=i(s=l.getPointAtLength(d)))<p&&(o=s,r=d,p=a);for(u*=.5;u>.5;){var h,f,g,m,y,v;(g=r-u)>=0&&(y=i(h=l.getPointAtLength(g)))<p?(o=h,r=g,p=y):(m=r+u)<=c&&(v=i(f=l.getPointAtLength(m)))<p?(o=f,r=m,p=v):u*=.5}return o={x:o.x,y:o.y,length:r,distance:Math.sqrt(p)}},i.is=r,i.snapTo=function(t,e,n){if(n=r(n,"finite")?n:10,r(t,"array")){for(var i=t.length;i--;)if(N(t[i]-e)<=n)return t[i]}else{t=+t;var o=e%t;if(o<n)return e-o;if(o>t-n)return e-o+t}return e},i.getRGB=l(function(t){if(!t||(t=k(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:Z};if(!(H[T](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=K(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};var e,n,o,s,a,l,c=t.match(W);return c?(c[2]&&(o=I(c[2].substring(5),16),n=I(c[2].substring(3,5),16),e=I(c[2].substring(1,3),16)),c[3]&&(o=I((a=c[3].charAt(3))+a,16),n=I((a=c[3].charAt(2))+a,16),e=I((a=c[3].charAt(1))+a,16)),c[4]&&(l=c[4].split(F),e=L(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),n=L(l[1]),"%"==l[1].slice(-1)&&(n*=2.55),o=L(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(s=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),c[5]?(l=c[5].split(F),e=L(l[0]),"%"==l[0].slice(-1)&&(e/=100),n=L(l[1]),"%"==l[1].slice(-1)&&(n/=100),o=L(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(s=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),i.hsb2rgb(e,n,o,s)):c[6]?(l=c[6].split(F),e=L(l[0]),"%"==l[0].slice(-1)&&(e/=100),n=L(l[1]),"%"==l[1].slice(-1)&&(n/=100),o=L(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(s=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),i.hsl2rgb(e,n,o,s)):(e=O(B.round(e),255),n=O(B.round(n),255),o=O(B.round(o),255),s=O(A(s,0),1),c={r:e,g:n,b:o,toString:Z},c.hex="#"+(16777216|o|n<<8|e<<16).toString(16).slice(1),c.opacity=r(s,"finite")?s:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z}},i),i.hsb=l(function(t,e,n){return i.hsb2rgb(t,e,n).hex}),i.hsl=l(function(t,e,n){return i.hsl2rgb(t,e,n).hex}),i.rgb=l(function(t,e,n,i){if(r(i,"finite")){var o=B.round;return"rgba("+[o(t),o(e),o(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)});var K=function(t){var e=E.doc.getElementsByTagName("head")[0]||E.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(K=l(function(t){if("red"==t.toLowerCase())return n;e.style.color=n,e.style.color=t;var i=E.doc.defaultView.getComputedStyle(e,M).getPropertyValue("color");return i==n?null:i}))(t)},Y=function(){return"hsb("+[this.h,this.s,this.b]+")"},J=function(){return"hsl("+[this.h,this.s,this.l]+")"},Z=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},Q=function(t,e,n){if(null==e&&r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&r(t,string)){var o=i.getRGB(t);t=o.r,e=o.g,n=o.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},tt=function(t,e,n,o){t=B.round(255*t),e=B.round(255*e),n=B.round(255*n);var s={r:t,g:e,b:n,opacity:r(o,"finite")?o:1,hex:i.rgb(t,e,n),toString:Z};return r(o,"finite")&&(s.opacity=o),s};i.color=function(t){var e;return r(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=i.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):r(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=i.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):(r(t,"string")&&(t=i.getRGB(t)),r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(e=i.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=i.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=Z,t},i.hsb2rgb=function(t,e,n,i){r(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,i=t.o,t=t.h),t*=360;var o,s,a,l,c;return t=t%360/60,c=n*e,l=c*(1-N(t%2-1)),o=s=a=n-c,t=~~t,o+=[c,l,0,0,l,c][t],s+=[l,c,c,l,0,0][t],a+=[0,0,l,c,c,l][t],tt(o,s,a,i)},i.hsl2rgb=function(t,e,n,i){r(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var o,s,a,l,c;return t=t%360/60,c=2*e*(n<.5?n:1-n),l=c*(1-N(t%2-1)),o=s=a=n-c/2,t=~~t,o+=[c,l,0,0,l,c][t],s+=[l,c,c,l,0,0][t],a+=[0,0,l,c,c,l][t],tt(o,s,a,i)},i.rgb2hsb=function(t,e,n){n=Q(t,e,n),t=n[0],e=n[1],n=n[2];var i,o,r,s;return r=A(t,e,n),s=r-O(t,e,n),i=0==s?null:r==t?(e-n)/s:r==e?(n-t)/s+2:(t-e)/s+4,i=(i+360)%6*60/360,o=0==s?0:s/r,{h:i,s:o,b:r,toString:Y}},i.rgb2hsl=function(t,e,n){n=Q(t,e,n),t=n[0],e=n[1],n=n[2];var i,o,r,s,a,l;return s=A(t,e,n),a=O(t,e,n),l=s-a,i=0==l?null:s==t?(e-n)/l:s==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,r=(s+a)/2,o=0==l?0:r<.5?l/(2*r):l/(2-2*r),{h:i,s:o,l:r,toString:J}},i.parsePathString=function(t){if(!t)return null;var e=i.path(t);if(e.arr)return i.path.clone(e.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return r(t,"array")&&r(t[0],"array")&&(o=i.path.clone(t)),o.length||k(t).replace(D,function(t,e,i){var r=[],s=e.toLowerCase();if(i.replace(z,function(t,e){e&&r.push(+e)}),"m"==s&&r.length>2&&(o.push([e].concat(r.splice(0,2))),s="l",e="m"==e?"l":"L"),"o"==s&&1==r.length&&o.push([e,r[0]]),"r"==s)o.push([e].concat(r));else for(;r.length>=n[s]&&(o.push([e].concat(r.splice(0,n[s]))),n[s]););}),o.toString=i.path.toString,e.arr=i.path.clone(o),o};var et=i.parseTransformString=function(t){if(!t)return null;var e=[];return r(t,"array")&&r(t[0],"array")&&(e=i.path.clone(t)),e.length||k(t).replace(j,function(t,n,i){var o=[];n.toLowerCase();i.replace(z,function(t,e){e&&o.push(+e)}),e.push([n].concat(o))}),e.toString=i.path.toString,e};i._.svgTransform2string=d,i._.rgTransform=/^[a-z][\s]*-?\.?\d/i,i._.transform2matrix=h,i._unit2px=y;E.doc.contains||E.doc.compareDocumentPosition?function(t,e){var n=9==t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t==i||!(!i||1!=i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e;)if(e=e.parentNode,e==t)return!0;return!1};i._.getSomeDefs=f,i._.getSomeSVG=m,i.select=function(t){return t=k(t).replace(/([^\\]):/g,"$1\\:"),_(E.doc.querySelector(t))},i.selectAll=function(t){for(var e=E.doc.querySelectorAll(t),n=(i.set||Array)(),o=0;o<e.length;o++)n.push(_(e[o]));return n},setInterval(function(){for(var t in X)if(X[T](t)){var e=X[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete X[t]}},1e4),C.prototype.attr=function(t,n){var i=this,o=i.node;if(!t){if(1!=o.nodeType)return{text:o.nodeValue};for(var s=o.attributes,a={},l=0,c=s.length;l<c;l++)a[s[l].nodeName]=s[l].nodeValue;return a}if(r(t,"string")){if(!(arguments.length>1))return e("snap.util.getattr."+t,i).firstDefined();var u={};u[t]=n,t=u}for(var p in t)t[T](p)&&e("snap.util.attr."+p,i,t[p]);return i},i.parse=function(t){var e=E.doc.createDocumentFragment(),n=!0,i=E.doc.createElement("div");if(t=k(t),t.match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",n=!1),i.innerHTML=t,t=i.getElementsByTagName("svg")[0])if(n)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return new b(e)},i.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),e=E.doc.createDocumentFragment(),n=0,o=t.length;n<o;n++){var r=t[n];r.node&&r.node.nodeType&&e.appendChild(r.node),r.nodeType&&e.appendChild(r),"string"==typeof r&&e.appendChild(i.parse(r).node)}return new b(e)},i._.make=w,i._.wrap=_,x.prototype.el=function(t,e){var n=w(t,this.node);return e&&n.attr(e),n},C.prototype.children=function(){for(var t=[],e=this.node.childNodes,n=0,o=e.length;n<o;n++)t[n]=i(e[n]);return t},C.prototype.toJSON=function(){var t=[];return S([this],t),t[0]},e.on("snap.util.getattr",function(){var t=e.nt();t=t.substring(t.lastIndexOf(".")+1);var n=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return nt[T](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):o(this.node,t)});var nt={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,
"writing-mode":0};e.on("snap.util.attr",function(t){var n=e.nt(),i={};n=n.substring(n.lastIndexOf(".")+1),i[n]=t;var r=n.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),s=n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});nt[T](s)?this.node.style[r]=null==t?M:t:o(this.node,i)}),function(t){}(x.prototype),i.ajax=function(t,n,i,o){var s=new XMLHttpRequest,a=V();if(s){if(r(n,"function"))o=i,i=n,n=null;else if(r(n,"object")){var l=[];for(var c in n)n.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(n[c]));n=l.join("&")}return s.open(n?"POST":"GET",t,!0),n&&(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i&&(e.once("snap.ajax."+a+".0",i),e.once("snap.ajax."+a+".200",i),e.once("snap.ajax."+a+".304",i)),s.onreadystatechange=function(){4==s.readyState&&e("snap.ajax."+a+"."+s.status,o,s)},4==s.readyState?s:(s.send(n),s)}},i.load=function(t,e,n){i.ajax(t,function(t){var o=i.parse(t.responseText);n?e.call(n,o):e(o)})};var it=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,o=n.documentElement,r=o.clientTop||i.clientTop||0,s=o.clientLeft||i.clientLeft||0,a=e.top+(g.win.pageYOffset||o.scrollTop||i.scrollTop)-r,l=e.left+(g.win.pageXOffset||o.scrollLeft||i.scrollLeft)-s;return{y:a,x:l}};return i.getElementByPoint=function(t,e){var n=this,i=(n.canvas,E.doc.elementFromPoint(t,e));if(E.win.opera&&"svg"==i.tagName){var o=it(i),r=i.createSVGRect();r.x=t-o.x,r.y=e-o.y,r.width=r.height=1;var s=i.getIntersectionList(r,null);s.length&&(i=s[s.length-1])}return i?_(i):null},i.plugin=function(t){t(i,C,x,E,b)},E.win.Snap=i,i}(t||this);return i.plugin(function(i,o,r,s,a){function l(t,e){if(null==e){var n=!0;if(e="linearGradient"==t.type||"radialGradient"==t.type?t.node.getAttribute("gradientTransform"):"pattern"==t.type?t.node.getAttribute("patternTransform"):t.node.getAttribute("transform"),!e)return new i.Matrix;e=i._.svgTransform2string(e)}else e=i._.rgTransform.test(e)?f(e).replace(/\.{3}|\u2026/g,t._.transform||""):i._.svgTransform2string(e),h(e,"array")&&(e=i.path?i.path.toString.call(e):f(e)),t._.transform=e;var o=i._.transform2matrix(e,t.getBBox(1));return n?o:void(t.matrix=o)}function c(t){function e(t,e){var n=m(t.node,e);n=n&&n.match(r),n=n&&n[2],n&&"#"==n.charAt()&&(n=n.substring(1),n&&(a[n]=(a[n]||[]).concat(function(n){var i={};i[e]=URL(n),m(t.node,i)})))}function n(t){var e=m(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1),e&&(a[e]=(a[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)})))}for(var i,o=t.selectAll("*"),r=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],a={},l=0,c=o.length;l<c;l++){i=o[l],e(i,"fill"),e(i,"stroke"),e(i,"filter"),e(i,"mask"),e(i,"clip-path"),n(i);var u=m(i.node,"id");u&&(m(i.node,{id:i.id}),s.push({old:u,id:i.id}))}for(l=0,c=s.length;l<c;l++){var p=a[s[l].old];if(p)for(var d=0,h=p.length;d<h;d++)p[d](s[l].id)}}function u(t,e,n){return function(i){var o=i.slice(t,e);return 1==o.length&&(o=o[0]),n?n(o):o}}function p(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,i=this.node.childNodes;if(t)for(var o=0,r=n.length;o<r;o++)e+=" "+n[o].name+'="'+n[o].value.replace(/"/g,'\\"')+'"';if(i.length){for(t&&(e+=">"),o=0,r=i.length;o<r;o++)3==i[o].nodeType?e+=i[o].nodeValue:1==i[o].nodeType&&(e+=b(i[o]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}var d=o.prototype,h=i.is,f=String,g=i._unit2px,m=i._.$,y=i._.make,v=i._.getSomeDefs,C="hasOwnProperty",b=i._.wrap;d.getBBox=function(t){if(!i.Matrix||!i.path)return this.node.getBBox();var e=this,n=new i.Matrix;if(e.removed)return i._.box();for(;"use"==e.type;)if(t||(n=n.add(e.transform().localMatrix.translate(e.attr("x")||0,e.attr("y")||0))),e.original)e=e.original;else{var o=e.attr("xlink:href");e=e.original=e.node.ownerDocument.getElementById(o.substring(o.indexOf("#")+1))}var r=e._,s=i.path.get[e.type]||i.path.get.deflt;try{return t?(r.bboxwt=s?i.path.getBBox(e.realPath=s(e)):i._.box(e.node.getBBox()),i._.box(r.bboxwt)):(e.realPath=s(e),e.matrix=e.transform().localMatrix,r.bbox=i.path.getBBox(i.path.map(e.realPath,n.add(e.matrix))),i._.box(r.bbox))}catch(a){return i._.box()}};var w=function(){return this.string};d.transform=function(t){var e=this._;if(null==t){for(var n,o=this,r=new i.Matrix(this.node.getCTM()),s=l(this),a=[s],c=new i.Matrix,u=s.toTransformString(),p=f(s)==f(this.matrix)?f(e.transform):u;"svg"!=o.type&&(o=o.parent());)a.push(l(o));for(n=a.length;n--;)c.add(a[n]);return{string:p,globalMatrix:r,totalMatrix:c,localMatrix:s,diffMatrix:r.clone().add(s.invert()),global:r.toTransformString(),total:c.toTransformString(),local:u,toString:w}}return t instanceof i.Matrix?(this.matrix=t,this._.transform=t.toTransformString()):l(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?m(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?m(this.node,{patternTransform:this.matrix}):m(this.node,{transform:this.matrix})),this},d.parent=function(){return b(this.node.parentNode)},d.append=d.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach(function(t){e.add(t)}),this}t=b(t),this.node.appendChild(t.node),t.paper=this.paper}return this},d.appendTo=function(t){return t&&(t=b(t),t.append(this)),this},d.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach(function(t){e?e.after(t):n.prepend(t),e=t}),this}t=b(t);var i=t.parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),i&&i.add()}return this},d.prependTo=function(t){return t=b(t),t.prepend(this),this},d.before=function(t){if("set"==t.type){var e=this;return t.forEach(function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()}),this.parent().add(),this}t=b(t);var n=t.parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},d.after=function(t){t=b(t);var e=t.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},d.insertBefore=function(t){t=b(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},d.insertAfter=function(t){t=b(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},d.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},d.select=function(t){return b(this.node.querySelector(t))},d.selectAll=function(t){for(var e=this.node.querySelectorAll(t),n=(i.set||Array)(),o=0;o<e.length;o++)n.push(b(e[o]));return n},d.asPX=function(t,e){return null==e&&(e=this.attr(t)),+g(this,t,e)},d.use=function(){var t,e=this.node.id;return e||(e=this.id,m(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?y(this.type,this.node.parentNode):y("use",this.node.parentNode),m(t.node,{"xlink:href":"#"+e}),t.original=this,t},d.clone=function(){var t=b(this.node.cloneNode(!0));return m(t.node,"id")&&m(t.node,{id:t.id}),c(t),t.insertAfter(this),t},d.toDefs=function(){var t=v(this);return t.appendChild(this.node),this},d.pattern=d.toPattern=function(t,e,n,i){var o=y("pattern",v(this));return null==t&&(t=this.getBBox()),h(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,t=t.x),m(o.node,{x:t,y:e,width:n,height:i,patternUnits:"userSpaceOnUse",id:o.id,viewBox:[t,e,n,i].join(" ")}),o.node.appendChild(this.node),o},d.marker=function(t,e,n,i,o,r){var s=y("marker",v(this));return null==t&&(t=this.getBBox()),h(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,o=t.refX||t.cx,r=t.refY||t.cy,t=t.x),m(s.node,{viewBox:[t,e,n,i].join(" "),markerWidth:n,markerHeight:i,orient:"auto",refX:o||0,refY:r||0,id:s.id}),s.node.appendChild(this.node),s};var x=function(t,e,i,o){"function"!=typeof i||i.length||(o=i,i=n.linear),this.attr=t,this.dur=e,i&&(this.easing=i),o&&(this.callback=o)};i._.Animation=x,i.animation=function(t,e,n,i){return new x(t,e,n,i)},d.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[C](n)&&!function(t){e.push({anim:new x(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},i.animate=function(t,i,o,r,s,a){"function"!=typeof s||s.length||(a=s,s=n.linear);var l=n.time(),c=n(t,i,l,l+r,n.time,o,s);return a&&e.once("mina.finish."+c.id,a),c},d.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;e<n;e++)t[e].stop();return this},d.animate=function(t,i,o,r){"function"!=typeof o||o.length||(r=o,o=n.linear),t instanceof x&&(r=t.callback,o=t.easing,i=t.dur,t=t.attr);var s,a,l,c,p=[],d=[],g={},m=this;for(var y in t)if(t[C](y)){m.equal?(c=m.equal(y,f(t[y])),s=c.from,a=c.to,l=c.f):(s=+m.attr(y),a=+t[y]);var v=h(s,"array")?s.length:1;g[y]=u(p.length,p.length+v,l),p=p.concat(s),d=d.concat(a)}var b=n.time(),w=n(p,d,b,b+i,n.time,function(t){var e={};for(var n in g)g[C](n)&&(e[n]=g[n](t));m.attr(e)},o);return m.anims[w.id]=w,w._attrs=t,w._callback=r,e("snap.animcreated."+m.id,w),e.once("mina.finish."+w.id,function(){delete m.anims[w.id],r&&r.call(m)}),e.once("mina.stop."+w.id,function(){delete m.anims[w.id]}),m};var _={};d.data=function(t,n){var o=_[this.id]=_[this.id]||{};if(0==arguments.length)return e("snap.data.get."+this.id,this,o,null),o;if(1==arguments.length){if(i.is(t,"object")){for(var r in t)t[C](r)&&this.data(r,t[r]);return this}return e("snap.data.get."+this.id,this,o[t],t),o[t]}return o[t]=n,e("snap.data.set."+this.id,this,n,t),this},d.removeData=function(t){return null==t?_[this.id]={}:_[this.id]&&delete _[this.id][t],this},d.outerSVG=d.toString=p(1),d.innerSVG=p(),d.toDataURL=function(){if(t&&t.btoa){var e=this.getBBox(),n=i.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},a.prototype.select=d.select,a.prototype.selectAll=d.selectAll}),i.plugin(function(t,e,n,i,o){function r(t,e,n,i,o,r){return null==e&&"[object SVGMatrix]"==s.call(t)?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,void(this.f=t.f)):void(null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+o,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var s=Object.prototype.toString,a=String,l=Math,c="";!function(e){function n(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var e=l.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}e.add=function(t,e,n,i,o,s){var a,l,c,u,p=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[t,n,o],[e,i,s],[0,0,1]];for(t&&t instanceof r&&(h=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(l=0;l<3;l++){for(u=0,c=0;c<3;c++)u+=d[a][c]*h[c][l];p[a][l]=u}return this.a=p[0][0],this.b=p[1][0],this.c=p[0][1],this.d=p[1][1],this.e=p[0][2],this.f=p[1][2],this},e.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new r(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},e.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(t,e){return this.add(1,0,0,1,t,e)},e.scale=function(t,e,n,i){return null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i),this},e.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var o=+l.cos(e).toFixed(9),r=+l.sin(e).toFixed(9);return this.add(o,r,-r,o,n,i),this.add(1,0,0,1,-n,-i)},e.x=function(t,e){return t*this.a+e*this.c+this.e},e.y=function(t,e){return t*this.b+e*this.d+this.f},e.get=function(t){return+this[a.fromCharCode(97+t)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.determinant=function(){return this.a*this.d-this.b*this.c},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var o=[[this.a,this.c],[this.b,this.d]];e.scalex=l.sqrt(n(o[0])),i(o[0]),e.shear=o[0][0]*o[1][0]+o[0][1]*o[1][1],o[1]=[o[1][0]-o[0][0]*e.shear,o[1][1]-o[0][1]*e.shear],e.scaley=l.sqrt(n(o[1])),i(o[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var r=-o[0][1],s=o[1][1];return s<0?(e.rotate=t.deg(l.acos(s)),r<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(l.asin(r)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:c)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:c)+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:c))}}(r.prototype),t.Matrix=r,t.matrix=function(t,e,n,i,o,s){return new r(t,e,n,i,o,s)}}),i.plugin(function(t,n,i,o,r){function s(i){return function(o){if(e.stop(),o instanceof r&&1==o.node.childNodes.length&&("radialGradient"==o.node.firstChild.tagName||"linearGradient"==o.node.firstChild.tagName||"pattern"==o.node.firstChild.tagName)&&(o=o.node.firstChild,h(this).appendChild(o),o=p(o)),o instanceof n)if("radialGradient"==o.type||"linearGradient"==o.type||"pattern"==o.type){o.node.id||g(o.node,{id:o.id});var s=m(o.node.id)}else s=o.attr(i);else if(s=t.color(o),s.error){var a=t(h(this).ownerSVGElement).gradient(o);a?(a.node.id||g(a.node,{id:a.id}),s=m(a.node.id)):s=o}else s=y(s);var l={};l[i]=s,g(this.node,l),this.node.style[i]=C}}function a(t){e.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function l(t){for(var e=[],n=t.childNodes,i=0,o=n.length;i<o;i++){var r=n[i];3==r.nodeType&&e.push(r.nodeValue),"tspan"==r.tagName&&(1==r.childNodes.length&&3==r.firstChild.nodeType?e.push(r.firstChild.nodeValue):e.push(l(r)))}return e}function c(){return e.stop(),this.node.style.fontSize}var u=t._.make,p=t._.wrap,d=t.is,h=t._.getSomeDefs,f=/^url\(#?([^)]+)\)$/,g=t._.$,m=t.url,y=String,v=t._.separator,C="";e.on("snap.util.attr.mask",function(t){if(t instanceof n||t instanceof r){if(e.stop(),t instanceof r&&1==t.node.childNodes.length&&(t=t.node.firstChild,h(this).appendChild(t),t=p(t)),"mask"==t.type)var i=t;else i=u("mask",h(this)),i.node.appendChild(t.node);!i.node.id&&g(i.node,{id:i.id}),g(this.node,{mask:m(i.id)})}}),function(t){e.on("snap.util.attr.clip",t),e.on("snap.util.attr.clip-path",t),e.on("snap.util.attr.clipPath",t)}(function(t){if(t instanceof n||t instanceof r){if(e.stop(),"clipPath"==t.type)var i=t;else i=u("clipPath",h(this)),i.node.appendChild(t.node),!i.node.id&&g(i.node,{id:i.id});g(this.node,{"clip-path":m(i.node.id||i.id)})}}),e.on("snap.util.attr.fill",s("fill")),e.on("snap.util.attr.stroke",s("stroke"));var b=/^([lr])(?:\(([^)]*)\))?(.*)$/i;e.on("snap.util.grad.parse",function(t){t=y(t);var e=t.match(b);if(!e)return null;var n=e[1],i=e[2],o=e[3];return i=i.split(/\s*,\s*/).map(function(t){return+t==t?+t:t}),1==i.length&&0==i[0]&&(i=[]),o=o.split("-"),o=o.map(function(t){t=t.split(":");var e={color:t[0]};return t[1]&&(e.offset=parseFloat(t[1])),e}),{type:n,params:i,stops:o}}),e.on("snap.util.attr.d",function(n){e.stop(),d(n,"array")&&d(n[0],"array")&&(n=t.path.toString.call(n)),n=y(n),n.match(/[ruo]/i)&&(n=t.path.toAbsolute(n)),g(this.node,{d:n})})(-1),e.on("snap.util.attr.#text",function(t){e.stop(),t=y(t);for(var n=o.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)})(-1),e.on("snap.util.attr.path",function(t){e.stop(),this.attr({d:t})})(-1),e.on("snap.util.attr.class",function(t){e.stop(),this.node.className.baseVal=t})(-1),e.on("snap.util.attr.viewBox",function(t){var n;n=d(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):d(t,"array")?t.join(" "):t,g(this.node,{viewBox:n}),e.stop()})(-1),e.on("snap.util.attr.transform",function(t){this.transform(t),e.stop()})(-1),e.on("snap.util.attr.r",function(t){"rect"==this.type&&(e.stop(),g(this.node,{rx:t,ry:t}))})(-1),e.on("snap.util.attr.textpath",function(t){if(e.stop(),"text"==this.type){var i,o,r;if(!t&&this.textPath){for(o=this.textPath;o.node.firstChild;)this.node.appendChild(o.node.firstChild);return o.remove(),void delete this.textPath}if(d(t,"string")){var s=h(this),a=p(s.parentNode).path(t);s.appendChild(a.node),i=a.id,a.attr({id:i})}else t=p(t),t instanceof n&&(i=t.attr("id"),i||(i=t.id,t.attr({id:i})));if(i)if(o=this.textPath,r=this.node,o)o.attr({"xlink:href":"#"+i});else{for(o=g("textPath",{"xlink:href":"#"+i});r.firstChild;)o.appendChild(r.firstChild);r.appendChild(o),this.textPath=p(o)}}})(-1),e.on("snap.util.attr.text",function(t){if("text"==this.type){for(var n=this.node,i=function(t){var e=g("tspan");if(d(t,"array"))for(var n=0;n<t.length;n++)e.appendChild(i(t[n]));else e.appendChild(o.doc.createTextNode(t));return e.normalize&&e.normalize(),e};n.firstChild;)n.removeChild(n.firstChild);for(var r=i(t);r.firstChild;)n.appendChild(r.firstChild)}e.stop()})(-1),e.on("snap.util.attr.fontSize",a)(-1),e.on("snap.util.attr.font-size",a)(-1),e.on("snap.util.getattr.transform",function(){return e.stop(),this.transform()})(-1),e.on("snap.util.getattr.textpath",function(){return e.stop(),this.textPath})(-1),function(){function n(n){return function(){e.stop();var i=o.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==i?i:t(o.doc.getElementById(i.match(f)[1]))}}function i(t){return function(n){e.stop();var i="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""==n||!n)return void(this.node.style[i]="none");if("marker"==n.type){var o=n.node.id;return o||g(n.node,{id:n.id}),void(this.node.style[i]=m(o))}}}e.on("snap.util.getattr.marker-end",n("end"))(-1),e.on("snap.util.getattr.markerEnd",n("end"))(-1),e.on("snap.util.getattr.marker-start",n("start"))(-1),e.on("snap.util.getattr.markerStart",n("start"))(-1),e.on("snap.util.getattr.marker-mid",n("mid"))(-1),e.on("snap.util.getattr.markerMid",n("mid"))(-1),e.on("snap.util.attr.marker-end",i("end"))(-1),e.on("snap.util.attr.markerEnd",i("end"))(-1),e.on("snap.util.attr.marker-start",i("start"))(-1),e.on("snap.util.attr.markerStart",i("start"))(-1),e.on("snap.util.attr.marker-mid",i("mid"))(-1),e.on("snap.util.attr.markerMid",i("mid"))(-1)}(),e.on("snap.util.getattr.r",function(){if("rect"==this.type&&g(this.node,"rx")==g(this.node,"ry"))return e.stop(),g(this.node,"rx")})(-1),e.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){e.stop();var t=l(this.node);return 1==t.length?t[0]:t}})(-1),e.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),e.on("snap.util.getattr.viewBox",function(){e.stop();var n=g(this.node,"viewBox");return n?(n=n.split(v),t._.box(+n[0],+n[1],+n[2],+n[3])):void 0})(-1),e.on("snap.util.getattr.points",function(){var t=g(this.node,"points");return e.stop(),t?t.split(v):void 0})(-1),e.on("snap.util.getattr.path",function(){var t=g(this.node,"d");return e.stop(),t})(-1),e.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),e.on("snap.util.getattr.fontSize",c)(-1),e.on("snap.util.getattr.font-size",c)(-1)}),i.plugin(function(t,e,n,i,o){var r=/\S+/g,s=String,a=e.prototype;a.addClass=function(t){var e,n,i,o,a=s(t||"").match(r)||[],l=this.node,c=l.className.baseVal,u=c.match(r)||[];if(a.length){for(e=0;i=a[e++];)n=u.indexOf(i),~n||u.push(i);o=u.join(" "),c!=o&&(l.className.baseVal=o)}return this},a.removeClass=function(t){var e,n,i,o,a=s(t||"").match(r)||[],l=this.node,c=l.className.baseVal,u=c.match(r)||[];if(u.length){for(e=0;i=a[e++];)n=u.indexOf(i),~n&&u.splice(n,1);o=u.join(" "),c!=o&&(l.className.baseVal=o)}return this},a.hasClass=function(t){var e=this.node,n=e.className.baseVal,i=n.match(r)||[];return!!~i.indexOf(t)},a.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var n,i,o,s,a=(t||"").match(r)||[],l=this.node,c=l.className.baseVal,u=c.match(r)||[];for(n=0;o=a[n++];)i=u.indexOf(o),~i?u.splice(i,1):u.push(o);return s=u.join(" "),c!=s&&(l.className.baseVal=s),this}}),i.plugin(function(t,n,i,o,r){function s(t){return t}function a(t){return function(e){return+e.toFixed(3)+t}}var l={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e}},c=String,u=/[a-z]+$/i,p=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;e.on("snap.util.attr",function(t){var n=c(t).match(p);if(n){var i=e.nt(),o=i.substring(i.lastIndexOf(".")+1),r=this.attr(o),s={};e.stop();var a=n[3]||"",d=r.match(u),h=l[n[1]];if(d&&d==a?t=h(parseFloat(r),+n[2]):(r=this.asPX(o),t=h(this.asPX(o),this.asPX(o,n[2]+a))),isNaN(r)||isNaN(t))return;s[o]=t,this.attr(s)}})(-10),e.on("snap.util.equal",function(t,n){var i=c(this.attr(t)||""),o=c(n).match(p);if(o){e.stop();var r=o[3]||"",d=i.match(u),h=l[o[1]];return d&&d==r?{from:parseFloat(i),to:h(parseFloat(i),+o[2]),f:a(d)}:(i=this.asPX(t),{from:i,to:h(i,this.asPX(t,o[2]+r)),f:s})}})(-10)}),i.plugin(function(n,i,o,r,s){var a=o.prototype,l=n.is;a.rect=function(t,e,n,i,o,r){var s;return null==r&&(r=o),l(t,"object")&&"[object Object]"==t?s=t:null!=t&&(s={x:t,y:e,width:n,height:i},null!=o&&(s.rx=o,s.ry=r)),this.el("rect",s)},a.circle=function(t,e,n){var i;return l(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,r:n}),this.el("circle",i)};var c=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var i=r.doc.createElement("img"),o=r.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){n.call(i),i.onload=i.onerror=null,o.removeChild(i)},i.onerror=t,o.appendChild(i),i.src=e}}();a.image=function(t,e,i,o,r){var s=this.el("image");if(l(t,"object")&&"src"in t)s.attr(t);else if(null!=t){var a={"xlink:href":t,preserveAspectRatio:"none"};null!=e&&null!=i&&(a.x=e,a.y=i),null!=o&&null!=r?(a.width=o,a.height=r):c(t,function(){n._.$(s.node,{width:this.offsetWidth,height:this.offsetHeight})}),n._.$(s.node,a)}return s},a.ellipse=function(t,e,n,i){var o;return l(t,"object")&&"[object Object]"==t?o=t:null!=t&&(o={cx:t,cy:e,rx:n,ry:i}),this.el("ellipse",o)},a.path=function(t){var e;return l(t,"object")&&!l(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},a.group=a.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},a.svg=function(t,e,n,i,o,r,s,a){var c={};return l(t,"object")&&null==e?c=t:(null!=t&&(c.x=t),null!=e&&(c.y=e),null!=n&&(c.width=n),null!=i&&(c.height=i),null!=o&&null!=r&&null!=s&&null!=a&&(c.viewBox=[o,r,s,a])),this.el("svg",c)},a.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},a.ptrn=function(t,e,n,i,o,r,s,a){if(l(t,"object"))var c=t;else c={patternUnits:"userSpaceOnUse"},t&&(c.x=t),e&&(c.y=e),null!=n&&(c.width=n),null!=i&&(c.height=i),null!=o&&null!=r&&null!=s&&null!=a?c.viewBox=[o,r,s,a]:c.viewBox=[t||0,e||0,n||0,i||0];return this.el("pattern",c)},a.use=function(t){return null!=t?(t instanceof i&&(t.attr("id")||t.attr({id:n._.id(t)}),t=t.attr("id")),"#"==String(t).charAt()&&(t=t.substring(1)),this.el("use",{"xlink:href":"#"+t})):i.prototype.use.call(this)},a.symbol=function(t,e,n,i){var o={};return null!=t&&null!=e&&null!=n&&null!=i&&(o.viewBox=[t,e,n,i]),this.el("symbol",o)},a.text=function(t,e,n){var i={};return l(t,"object")?i=t:null!=t&&(i={x:t,y:e,text:n||""}),this.el("text",i)},a.line=function(t,e,n,i){var o={};return l(t,"object")?o=t:null!=t&&(o={x1:t,x2:n,y1:e,y2:i}),this.el("line",o)},a.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return l(t,"object")&&!l(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},a.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return l(t,"object")&&!l(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){function i(){return this.selectAll("stop")}function o(t,e){var i=u("stop"),o={offset:+e+"%"};return t=n.color(t),o["stop-color"]=t.hex,t.opacity<1&&(o["stop-opacity"]=t.opacity),u(i,o),this.node.appendChild(i),this}function r(){if("linearGradient"==this.type){var t=u(this.node,"x1")||0,e=u(this.node,"x2")||1,i=u(this.node,"y1")||0,o=u(this.node,"y2")||0;return n._.box(t,i,math.abs(e-t),math.abs(o-i))}var r=this.node.cx||.5,s=this.node.cy||.5,a=this.node.r||0;return n._.box(r-a,s-a,2*a,2*a)}function s(t,n){function i(t,e){for(var n=(e-p)/(t-d),i=d;i<t;i++)s[i].offset=+(+p+n*(i-d)).toFixed(2);d=t,p=e}var o,r=e("snap.util.grad.parse",null,n).firstDefined();if(!r)return null;r.params.unshift(t),o="l"==r.type.toLowerCase()?l.apply(0,r.params):c.apply(0,r.params),r.type!=r.type.toLowerCase()&&u(o.node,{gradientUnits:"userSpaceOnUse"});var s=r.stops,a=s.length,p=0,d=0;a--;for(var h=0;h<a;h++)"offset"in s[h]&&i(h,s[h].offset);for(s[a].offset=s[a].offset||100,i(a,s[a].offset),h=0;h<=a;h++){var f=s[h];o.addStop(f.color,f.offset)}return o}function l(t,e,s,a,l){var c=n._.make("linearGradient",t);return c.stops=i,c.addStop=o,c.getBBox=r,null!=e&&u(c.node,{x1:e,y1:s,x2:a,y2:l}),c}function c(t,e,s,a,l,c){var p=n._.make("radialGradient",t);return p.stops=i,p.addStop=o,p.getBBox=r,null!=e&&u(p.node,{cx:e,cy:s,r:a}),null!=l&&null!=c&&u(p.node,{fx:l,fy:c}),p}var u=n._.$;a.gradient=function(t){return s(this.defs,t)},a.gradientLinear=function(t,e,n,i){return l(this.defs,t,e,n,i)},a.gradientRadial=function(t,e,n,i,o){return c(this.defs,t,e,n,i,o)},a.toString=function(){var t,e=this.node.ownerDocument,i=e.createDocumentFragment(),o=e.createElement("div"),r=this.node.cloneNode(!0);return i.appendChild(o),o.appendChild(r),n._.$(r,{xmlns:"http://www.w3.org/2000/svg"}),t=o.innerHTML,i.removeChild(i.firstChild),t},a.toDataURL=function(){if(t&&t.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},a.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):a.clear.call({node:e}),e=t}}()}),i.plugin(function(t,e,n,i){function o(t){var e=o.ps=o.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[F](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]}function r(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:j.min(n,i)/2,r2:j.max(n,i)/2,r0:j.sqrt(n*n+i*i)/2,path:S(t,e,n,i),vb:[t,e,n,i].join(" ")}}function s(){return this.join(",").replace(H,"$1")}function a(t){var e=W(t);return e.toString=s,e}function l(t,e,n,i,o,r,s,a,l){return null==l?g(t,e,n,i,o,r,s,a):u(t,e,n,i,o,r,s,a,m(t,e,n,i,o,r,s,a,l))}function c(n,i){function o(t){return+(+t).toFixed(3)}return t._.cacher(function(t,r,s){t instanceof e&&(t=t.attr("d")),t=O(t);for(var a,c,p,d,h,f="",g={},m=0,y=0,v=t.length;y<v;y++){if(p=t[y],"M"==p[0])a=+p[1],c=+p[2];else{if(d=l(a,c,p[1],p[2],p[3],p[4],p[5],p[6]),m+d>r){if(i&&!g.start){if(h=l(a,c,p[1],p[2],p[3],p[4],p[5],p[6],r-m),f+=["C"+o(h.start.x),o(h.start.y),o(h.m.x),o(h.m.y),o(h.x),o(h.y)],s)return f;g.start=f,f=["M"+o(h.x),o(h.y)+"C"+o(h.n.x),o(h.n.y),o(h.end.x),o(h.end.y),o(p[5]),o(p[6])].join(),m+=d,a=+p[5],c=+p[6];continue}if(!n&&!i)return h=l(a,c,p[1],p[2],p[3],p[4],p[5],p[6],r-m)}m+=d,a=+p[5],c=+p[6]}f+=p.shift()+p}return g.end=f,h=n?m:i?g:u(a,c,p[0],p[1],p[2],p[3],p[4],p[5],1)},null,t._.clone)}function u(t,e,n,i,o,r,s,a,l){var c=1-l,u=V(c,3),p=V(c,2),d=l*l,h=d*l,f=u*t+3*p*l*n+3*c*l*l*o+h*s,g=u*e+3*p*l*i+3*c*l*l*r+h*a,m=t+2*l*(n-t)+d*(o-2*n+t),y=e+2*l*(i-e)+d*(r-2*i+e),v=n+2*l*(o-n)+d*(s-2*o+n),C=i+2*l*(r-i)+d*(a-2*r+i),b=c*t+l*n,w=c*e+l*i,x=c*o+l*s,_=c*r+l*a,S=90-180*j.atan2(m-v,y-C)/z;return{x:f,y:g,m:{x:m,y:y},n:{x:v,y:C},start:{x:b,y:w},end:{x:x,y:_},alpha:S}}function p(e,n,i,o,s,a,l,c){t.is(e,"array")||(e=[e,n,i,o,s,a,l,c]);var u=A.apply(null,e);return r(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function d(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function h(t,e){return t=r(t),e=r(e),d(e,t.x,t.y)||d(e,t.x2,t.y)||d(e,t.x,t.y2)||d(e,t.x2,t.y2)||d(t,e.x,e.y)||d(t,e.x2,e.y)||d(t,e.x,e.y2)||d(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function f(t,e,n,i,o){var r=-3*e+9*n-9*i+3*o,s=t*r+6*e-12*n+6*i;return t*s-3*e+3*n}function g(t,e,n,i,o,r,s,a,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var c=l/2,u=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,g=0;g<u;g++){var m=c*p[g]+c,y=f(m,t,n,o,s),v=f(m,e,i,r,a),C=y*y+v*v;h+=d[g]*j.sqrt(C)}return c*h}function m(t,e,n,i,o,r,s,a,l){if(!(l<0||g(t,e,n,i,o,r,s,a)<l)){var c,u=1,p=u/2,d=u-p,h=.01;for(c=g(t,e,n,i,o,r,s,a,d);$(c-l)>h;)p/=2,d+=(c<l?1:-1)*p,c=g(t,e,n,i,o,r,s,a,d);return d}}function y(t,e,n,i,o,r,s,a){if(!(q(t,n)<U(o,s)||U(t,n)>q(o,s)||q(e,i)<U(r,a)||U(e,i)>q(r,a))){var l=(t*i-e*n)*(o-s)-(t-n)*(o*a-r*s),c=(t*i-e*n)*(r-a)-(e-i)*(o*a-r*s),u=(t-n)*(r-a)-(e-i)*(o-s);if(u){var p=l/u,d=c/u,h=+p.toFixed(2),f=+d.toFixed(2);if(!(h<+U(t,n).toFixed(2)||h>+q(t,n).toFixed(2)||h<+U(o,s).toFixed(2)||h>+q(o,s).toFixed(2)||f<+U(e,i).toFixed(2)||f>+q(e,i).toFixed(2)||f<+U(r,a).toFixed(2)||f>+q(r,a).toFixed(2)))return{x:p,y:d}}}}function v(t,e,n){var i=p(t),o=p(e);if(!h(i,o))return n?0:[];for(var r=g.apply(0,t),s=g.apply(0,e),a=~~(r/8),l=~~(s/8),c=[],d=[],f={},m=n?0:[],v=0;v<a+1;v++){var C=u.apply(0,t.concat(v/a));c.push({x:C.x,y:C.y,t:v/a})}for(v=0;v<l+1;v++)C=u.apply(0,e.concat(v/l)),d.push({x:C.x,y:C.y,t:v/l});for(v=0;v<a;v++)for(var b=0;b<l;b++){var w=c[v],x=c[v+1],_=d[b],S=d[b+1],E=$(x.x-w.x)<.001?"y":"x",T=$(S.x-_.x)<.001?"y":"x",k=y(w.x,w.y,x.x,x.y,_.x,_.y,S.x,S.y);if(k){if(f[k.x.toFixed(4)]==k.y.toFixed(4))continue;f[k.x.toFixed(4)]=k.y.toFixed(4);var L=w.t+$((k[E]-w[E])/(x[E]-w[E]))*(x.t-w.t),I=_.t+$((k[T]-_[T])/(S[T]-_[T]))*(S.t-_.t);L>=0&&L<=1&&I>=0&&I<=1&&(n?m++:m.push({x:k.x,y:k.y,t1:L,t2:I}))}}return m}function C(t,e){return w(t,e)}function b(t,e){return w(t,e,1)}function w(t,e,n){t=O(t),e=O(e);for(var i,o,r,s,a,l,c,u,p,d,h=n?0:[],f=0,g=t.length;f<g;f++){var m=t[f];if("M"==m[0])i=a=m[1],o=l=m[2];else{"C"==m[0]?(p=[i,o].concat(m.slice(1)),i=p[6],o=p[7]):(p=[i,o,i,o,a,l,a,l],i=a,o=l);for(var y=0,C=e.length;y<C;y++){var b=e[y];if("M"==b[0])r=c=b[1],s=u=b[2];else{"C"==b[0]?(d=[r,s].concat(b.slice(1)),r=d[6],s=d[7]):(d=[r,s,r,s,c,u,c,u],r=c,s=u);var w=v(p,d,n);if(n)h+=w;else{for(var x=0,_=w.length;x<_;x++)w[x].segment1=f,w[x].segment2=y,w[x].bez1=p,w[x].bez2=d;h=h.concat(w)}}}}}return h}function x(t,e,n){var i=_(t);return d(i,e,n)&&w(t,[["M",e,n],["H",i.x2+10]],1)%2==1}function _(t){var e=o(t);if(e.bbox)return W(e.bbox);if(!t)return r();t=O(t);for(var n,i=0,s=0,a=[],l=[],c=0,u=t.length;c<u;c++)if(n=t[c],"M"==n[0])i=n[1],s=n[2],a.push(i),l.push(s);else{var p=A(i,s,n[1],n[2],n[3],n[4],n[5],n[6]);a=a.concat(p.min.x,p.max.x),l=l.concat(p.min.y,p.max.y),i=n[5],s=n[6]}var d=U.apply(0,a),h=U.apply(0,l),f=q.apply(0,a),g=q.apply(0,l),m=r(d,h,f-d,g-h);return e.bbox=W(m),m}function S(t,e,n,i,o){if(o)return[["M",+t+ +o,e],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,i-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-i],["a",o,o,0,0,1,o,-o],["z"]];var r=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return r.toString=s,r}function E(t,e,n,i,o){if(null==o&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=o)var r=Math.PI/180,a=t+n*Math.cos(-i*r),l=t+n*Math.cos(-o*r),c=e+n*Math.sin(-i*r),u=e+n*Math.sin(-o*r),p=[["M",a,c],["A",n,n,0,+(o-i>180),0,l,u]];else p=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];
return p.toString=s,p}function T(e){var n=o(e),i=String.prototype.toLowerCase;if(n.rel)return a(n.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var r=[],l=0,c=0,u=0,p=0,d=0;"M"==e[0][0]&&(l=e[0][1],c=e[0][2],u=l,p=c,d++,r.push(["M",l,c]));for(var h=d,f=e.length;h<f;h++){var g=r[h]=[],m=e[h];if(m[0]!=i.call(m[0]))switch(g[0]=i.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":u=m[1],p=m[2];default:for(var y=1,v=m.length;y<v;y++)g[y]=+(m[y]-(y%2?l:c)).toFixed(3)}else{g=r[h]=[],"m"==m[0]&&(u=m[1]+l,p=m[2]+c);for(var C=0,b=m.length;C<b;C++)r[h][C]=m[C]}var w=r[h].length;switch(r[h][0]){case"z":l=u,c=p;break;case"h":l+=+r[h][w-1];break;case"v":c+=+r[h][w-1];break;default:l+=+r[h][w-2],c+=+r[h][w-1]}}return r.toString=s,n.rel=a(r),r}function k(e){var n=o(e);if(n.abs)return a(n.abs);if(R(e,"array")&&R(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var i,r=[],l=0,c=0,u=0,p=0,d=0;"M"==e[0][0]&&(l=+e[0][1],c=+e[0][2],u=l,p=c,d++,r[0]=["M",l,c]);for(var h,f,g=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),m=d,y=e.length;m<y;m++){if(r.push(h=[]),f=e[m],i=f[0],i!=i.toUpperCase())switch(h[0]=i.toUpperCase(),h[0]){case"A":h[1]=f[1],h[2]=f[2],h[3]=f[3],h[4]=f[4],h[5]=f[5],h[6]=+f[6]+l,h[7]=+f[7]+c;break;case"V":h[1]=+f[1]+c;break;case"H":h[1]=+f[1]+l;break;case"R":for(var v=[l,c].concat(f.slice(1)),C=2,b=v.length;C<b;C++)v[C]=+v[C]+l,v[++C]=+v[C]+c;r.pop(),r=r.concat(P(v,g));break;case"O":r.pop(),v=E(l,c,f[1],f[2]),v.push(v[0]),r=r.concat(v);break;case"U":r.pop(),r=r.concat(E(l,c,f[1],f[2],f[3])),h=["U"].concat(r[r.length-1].slice(-2));break;case"M":u=+f[1]+l,p=+f[2]+c;default:for(C=1,b=f.length;C<b;C++)h[C]=+f[C]+(C%2?l:c)}else if("R"==i)v=[l,c].concat(f.slice(1)),r.pop(),r=r.concat(P(v,g)),h=["R"].concat(f.slice(-2));else if("O"==i)r.pop(),v=E(l,c,f[1],f[2]),v.push(v[0]),r=r.concat(v);else if("U"==i)r.pop(),r=r.concat(E(l,c,f[1],f[2],f[3])),h=["U"].concat(r[r.length-1].slice(-2));else for(var w=0,x=f.length;w<x;w++)h[w]=f[w];if(i=i.toUpperCase(),"O"!=i)switch(h[0]){case"Z":l=+u,c=+p;break;case"H":l=h[1];break;case"V":c=h[1];break;case"M":u=h[h.length-2],p=h[h.length-1];default:l=h[h.length-2],c=h[h.length-1]}}return r.toString=s,n.abs=a(r),r}function L(t,e,n,i){return[t,e,n,i,n,i]}function I(t,e,n,i,o,r){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*i,s*o+a*n,s*r+a*i,o,r]}function B(e,n,i,o,r,s,a,l,c,u){var p,d=120*z/180,h=z/180*(+r||0),f=[],g=t._.cacher(function(t,e,n){var i=t*j.cos(n)-e*j.sin(n),o=t*j.sin(n)+e*j.cos(n);return{x:i,y:o}});if(u)S=u[0],E=u[1],x=u[2],_=u[3];else{p=g(e,n,-h),e=p.x,n=p.y,p=g(l,c,-h),l=p.x,c=p.y;var m=(j.cos(z/180*r),j.sin(z/180*r),(e-l)/2),y=(n-c)/2,v=m*m/(i*i)+y*y/(o*o);v>1&&(v=j.sqrt(v),i=v*i,o=v*o);var C=i*i,b=o*o,w=(s==a?-1:1)*j.sqrt($((C*b-C*y*y-b*m*m)/(C*y*y+b*m*m))),x=w*i*y/o+(e+l)/2,_=w*-o*m/i+(n+c)/2,S=j.asin(((n-_)/o).toFixed(9)),E=j.asin(((c-_)/o).toFixed(9));S=e<x?z-S:S,E=l<x?z-E:E,S<0&&(S=2*z+S),E<0&&(E=2*z+E),a&&S>E&&(S-=2*z),!a&&E>S&&(E-=2*z)}var T=E-S;if($(T)>d){var k=E,L=l,I=c;E=S+d*(a&&E>S?1:-1),l=x+i*j.cos(E),c=_+o*j.sin(E),f=B(l,c,i,o,r,0,a,L,I,[E,k,x,_])}T=E-S;var A=j.cos(S),O=j.sin(S),N=j.cos(E),P=j.sin(E),M=j.tan(T/4),R=4/3*i*M,W=4/3*o*M,F=[e,n],H=[e+R*O,n-W*A],D=[l+R*P,c-W*N],U=[l,c];if(H[0]=2*F[0]-H[0],H[1]=2*F[1]-H[1],u)return[H,D,U].concat(f);f=[H,D,U].concat(f).join().split(",");for(var q=[],V=0,G=f.length;V<G;V++)q[V]=V%2?g(f[V-1],f[V],h).y:g(f[V],f[V+1],h).x;return q}function A(t,e,n,i,o,r,s,a){for(var l,c,u,p,d,h,f,g,m=[],y=[[],[]],v=0;v<2;++v)if(0==v?(c=6*t-12*n+6*o,l=-3*t+9*n-9*o+3*s,u=3*n-3*t):(c=6*e-12*i+6*r,l=-3*e+9*i-9*r+3*a,u=3*i-3*e),$(l)<1e-12){if($(c)<1e-12)continue;p=-u/c,0<p&&p<1&&m.push(p)}else f=c*c-4*u*l,g=j.sqrt(f),f<0||(d=(-c+g)/(2*l),0<d&&d<1&&m.push(d),h=(-c-g)/(2*l),0<h&&h<1&&m.push(h));for(var C,b=m.length,w=b;b--;)p=m[b],C=1-p,y[0][b]=C*C*C*t+3*C*C*p*n+3*C*p*p*o+p*p*p*s,y[1][b]=C*C*C*e+3*C*C*p*i+3*C*p*p*r+p*p*p*a;return y[0][w]=t,y[1][w]=e,y[0][w+1]=s,y[1][w+1]=a,y[0].length=y[1].length=w+2,{min:{x:U.apply(0,y[0]),y:U.apply(0,y[1])},max:{x:q.apply(0,y[0]),y:q.apply(0,y[1])}}}function O(t,e){var n=!e&&o(t);if(!e&&n.curve)return a(n.curve);for(var i=k(t),r=e&&k(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(t,e,n){var i,o;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(B.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,o=2*e.y-e.by):(i=e.x,o=e.y),t=["C",i,o].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(I(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(I(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(L(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(L(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(L(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(L(e.x,e.y,e.X,e.Y))}return t}),u=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)d[e]="A",r&&(h[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),y=q(i.length,r&&r.length||0)}},p=function(t,e,n,o,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],y=q(i.length,r&&r.length||0))},d=[],h=[],f="",g="",m=0,y=q(i.length,r&&r.length||0);m<y;m++){i[m]&&(f=i[m][0]),"C"!=f&&(d[m]=f,m&&(g=d[m-1])),i[m]=c(i[m],s,g),"A"!=d[m]&&"C"==f&&(d[m]="C"),u(i,m),r&&(r[m]&&(f=r[m][0]),"C"!=f&&(h[m]=f,m&&(g=h[m-1])),r[m]=c(r[m],l,g),"A"!=h[m]&&"C"==f&&(h[m]="C"),u(r,m)),p(i,r,s,l,m),p(r,i,l,s,m);var v=i[m],C=r&&r[m],b=v.length,w=r&&C.length;s.x=v[b-2],s.y=v[b-1],s.bx=D(v[b-4])||s.x,s.by=D(v[b-3])||s.y,l.bx=r&&(D(C[w-4])||l.x),l.by=r&&(D(C[w-3])||l.y),l.x=r&&C[w-2],l.y=r&&C[w-1]}return r||(n.curve=a(i)),r?[i,r]:i}function N(t,e){if(!e)return t;var n,i,o,r,s,a,l;for(t=O(t),o=0,s=t.length;o<s;o++)for(l=t[o],r=1,a=l.length;r<a;r+=2)n=e.x(l[r],l[r+1]),i=e.y(l[r],l[r+1]),l[r]=n,l[r+1]=i;return t}function P(t,e){for(var n=[],i=0,o=t.length;o-2*!e>i;i+=2){var r=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?o-4==i?r[3]={x:+t[0],y:+t[1]}:o-2==i&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[o-2],y:+t[o-1]}:o-4==i?r[3]=r[2]:i||(r[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return n}var M=e.prototype,R=t.is,W=t._.clone,F="hasOwnProperty",H=/,?([a-z]),?/gi,D=parseFloat,j=Math,z=j.PI,U=j.min,q=j.max,V=j.pow,$=j.abs,G=c(1),X=c(),K=c(0,1),Y=t._unit2px,J={path:function(t){return t.attr("path")},circle:function(t){var e=Y(t);return E(e.cx,e.cy,e.r)},ellipse:function(t){var e=Y(t);return E(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=Y(t);return S(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=Y(t);return S(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return S(e.x,e.y,e.width,e.height)}};t.path=o,t.path.getTotalLength=G,t.path.getPointAtLength=X,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return K(t,e).end;var i=K(t,n,1);return e?K(i,e).end:i},M.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},M.getPointAtLength=function(t){return X(this.attr("d"),t)},M.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=r,t.path.findDotsAtSegment=u,t.path.bezierBBox=p,t.path.isPointInsideBBox=d,t.closest=function(e,n,i,o){for(var s=100,a=r(e-s/2,n-s/2,s,s),l=[],c=i[0].hasOwnProperty("x")?function(t){return{x:i[t].x,y:i[t].y}}:function(t){return{x:i[t],y:o[t]}},u=0;s<=1e6&&!u;){for(var p=0,h=i.length;p<h;p++){var f=c(p);if(d(a,f.x,f.y)){u++,l.push(f);break}}u||(s*=2,a=r(e-s/2,n-s/2,s,s))}if(1e6!=s){var g,m=1/0;for(p=0,h=l.length;p<h;p++){var y=t.len(e,n,l[p].x,l[p].y);m>y&&(m=y,l[p].len=y,g=l[p])}return g}},t.path.isBBoxIntersect=h,t.path.intersection=C,t.path.intersectionNumber=b,t.path.isPointInside=x,t.path.getBBox=_,t.path.get=J,t.path.toRelative=T,t.path.toAbsolute=k,t.path.toCubic=O,t.path.map=N,t.path.toString=s,t.path.clone=a}),i.plugin(function(t,i,o,r){var s=Math.max,a=Math.min,l=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},c=l.prototype;c.push=function(){for(var t,e,n=0,i=arguments.length;n<i;n++)t=arguments[n],t&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},c.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},c.forEach=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(t.call(e,this.items[n],n)===!1)return this;return this},c.animate=function(i,o,r,s){"function"!=typeof r||r.length||(s=r,r=n.linear),i instanceof t._.Animation&&(s=i.callback,r=i.easing,o=r.dur,i=i.attr);var a=arguments;if(t.is(i,"array")&&t.is(a[a.length-1],"array"))var l=!0;var c,u=function(){c?this.b=c:c=this.b},p=0,d=this,h=s&&function(){++p==d.length&&s.call(this)};return this.forEach(function(t,n){e.once("snap.animcreated."+t.id,u),l?a[n]&&t.animate.apply(t,a[n]):t.animate(i,o,r,h)})},c.remove=function(){for(;this.length;)this.pop().remove();return this},c.bind=function(t,e,n){var i={};if("function"==typeof e)this.bindings[t]=e;else{var o=n||t;this.bindings[t]=function(t){i[o]=t,e.attr(i)}}return this},c.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var i=0,o=this.items.length;i<o;i++)this.items[i].attr(e);return this},c.clear=function(){for(;this.length;)this.pop()},c.splice=function(t,e,n){t=t<0?s(this.length+t,0):t,e=s(0,a(this.length-t,e));var i,o=[],r=[],c=[];for(i=2;i<arguments.length;i++)c.push(arguments[i]);for(i=0;i<e;i++)r.push(this[t+i]);for(;i<this.length-t;i++)o.push(this[t+i]);var u=c.length;for(i=0;i<u+o.length;i++)this.items[t+i]=this[t+i]=i<u?c[i]:o[i-u];for(i=this.items.length=this.length-=e-u;this[i];)delete this[i++];return new l(r)},c.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},c.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},c.getBBox=function(){for(var t=[],e=[],n=[],i=[],o=this.items.length;o--;)if(!this.items[o].removed){var r=this.items[o].getBBox();t.push(r.x),e.push(r.y),n.push(r.x+r.width),i.push(r.y+r.height)}return t=a.apply(0,t),e=a.apply(0,e),n=s.apply(0,n),i=s.apply(0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e,cx:t+(n-t)/2,cy:e+(i-e)/2}},c.clone=function(t){t=new l;for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},c.toString=function(){return"Snap‘s set"},c.type="set",t.Set=l,t.set=function(){var t=new l;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}}),i.plugin(function(t,n,i,o){function r(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function s(e,n,i){n=y(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var o,s,a,l,c=Math.max(e.length,n.length),u=[],h=[],f=0;f<c;f++){if(a=e[f]||r(n[f]),l=n[f]||r(a),a[0]!=l[0]||"r"==a[0].toLowerCase()&&(a[2]!=l[2]||a[3]!=l[3])||"s"==a[0].toLowerCase()&&(a[3]!=l[3]||a[4]!=l[4])){e=t._.transform2matrix(e,i()),n=t._.transform2matrix(n,i()),u=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],h=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(u[f]=[],h[f]=[],o=0,s=Math.max(a.length,l.length);o<s;o++)o in a&&(u[f][o]=a[o]),o in l&&(h[f][o]=l[o])}return{from:d(u),to:d(h),f:p(u)}}function a(t){return t}function l(t){return function(e){return+e.toFixed(3)+t}}function c(t){return t.join(" ")}function u(e){return t.rgb(e[0],e[1],e[2])}function p(t){var e,n,i,o,r,s,a=0,l=[];for(e=0,n=t.length;e<n;e++){for(r="[",s=['"'+t[e][0]+'"'],i=1,o=t[e].length;i<o;i++)s[i]="val["+a++ +"]";r+=s+"]",l[e]=r}return Function("val","return Snap.path.toString.call(["+l+"])")}function d(t){for(var e=[],n=0,i=t.length;n<i;n++)for(var o=1,r=t[n].length;o<r;o++)e.push(t[n][o]);return e}function h(t){return isFinite(parseFloat(t))}function f(e,n){return!(!t.is(e,"array")||!t.is(n,"array"))&&e.toString()==n.toString()}var g={},m=/[a-z]+$/i,y=String;g.stroke=g.fill="colour",n.prototype.equal=function(t,n){return e("snap.util.equal",this,t,n).firstDefined()},e.on("snap.util.equal",function(e,n){var i,o,r=y(this.attr(e)||""),v=this;if(h(r)&&h(n))return{from:parseFloat(r),to:parseFloat(n),f:a};if("colour"==g[e])return i=t.color(r),o=t.color(n),{from:[i.r,i.g,i.b,i.opacity],to:[o.r,o.g,o.b,o.opacity],f:u};if("viewBox"==e)return i=this.attr(e).vb.split(" ").map(Number),o=n.split(" ").map(Number),{from:i,to:o,f:c};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return n instanceof t.Matrix&&(n=n.toTransformString()),t._.rgTransform.test(n)||(n=t._.svgTransform2string(n)),s(r,n,function(){return v.getBBox(1)});if("d"==e||"path"==e)return i=t.path.toCubic(r,n),{from:d(i[0]),to:d(i[1]),f:p(i[0])};if("points"==e)return i=y(r).split(t._.separator),o=y(n).split(t._.separator),{from:i,to:o,f:function(t){return t}};var C=r.match(m),b=y(n).match(m);return C&&f(C,b)?{from:parseFloat(r),to:parseFloat(n),f:l(C)}:{from:this.asPX(e),to:this.asPX(e,n),f:a}})}),i.plugin(function(t,n,i,o){for(var r=n.prototype,s="hasOwnProperty",a=("createTouch"in o.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=(function(t,e){var n="y"==t?"scrollTop":"scrollLeft",i=e&&e.node?e.node.ownerDocument:o.doc;return i[n in i.documentElement?"documentElement":"body"][n]}),p=function(){return this.originalEvent.preventDefault()},d=function(){return this.originalEvent.stopPropagation()},h=function(t,e,n,i){var o=a&&c[e]?c[e]:e,r=function(o){var r=u("y",i),l=u("x",i);if(a&&c[s](e))for(var h=0,f=o.targetTouches&&o.targetTouches.length;h<f;h++)if(o.targetTouches[h].target==t||t.contains(o.targetTouches[h].target)){var g=o;o=o.targetTouches[h],o.originalEvent=g,o.preventDefault=p,o.stopPropagation=d;break}var m=o.clientX+l,y=o.clientY+r;return n.call(i,o,m,y)};return e!==o&&t.addEventListener(e,r,!1),t.addEventListener(o,r,!1),function(){return e!==o&&t.removeEventListener(e,r,!1),t.removeEventListener(o,r,!1),!0}},f=[],g=function(t){for(var n,i=t.clientX,o=t.clientY,r=u("y"),s=u("x"),l=f.length;l--;){if(n=f[l],a){for(var c,p=t.touches&&t.touches.length;p--;)if(c=t.touches[p],c.identifier==n.el._drag.id||n.el.node.contains(c.target)){i=c.clientX,o=c.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var d=n.el.node;d.nextSibling,d.parentNode,d.style.display;i+=s,o+=r,e("snap.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,o-n.el._drag.y,i,o,t)}},m=function(n){t.unmousemove(g).unmouseup(m);for(var i,o=f.length;o--;)i=f[o],i.el._drag={},e("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n),e.off("snap.drag.*."+i.el.id);f=[]},y=l.length;y--;)!function(e){t[e]=r[e]=function(n,i){if(t.is(n,"function"))this.events=this.events||[],this.events.push({name:e,f:n,unbind:h(this.node||document,e,n,i||this)});else for(var o=0,r=this.events.length;o<r;o++)if(this.events[o].name==e)try{this.events[o].f.call(this)}catch(s){}return this},t["un"+e]=r["un"+e]=function(t){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==e&&(n[i].f==t||!t))return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(l[y]);r.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},r.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var v=[];r.drag=function(n,i,o,r,s,a){function l(l,c,p){(l.originalEvent||l).preventDefault(),u._drag.x=c,u._drag.y=p,u._drag.id=l.identifier,!f.length&&t.mousemove(g).mouseup(m),f.push({el:u,move_scope:r,start_scope:s,end_scope:a}),i&&e.on("snap.drag.start."+u.id,i),n&&e.on("snap.drag.move."+u.id,n),o&&e.on("snap.drag.end."+u.id,o),e("snap.drag.start."+u.id,s||r||u,c,p,l)}function c(t,n,i){e("snap.draginit."+u.id,u,t,n,i)}var u=this;if(!arguments.length){var p;return u.drag(function(t,e){this.attr({transform:p+(p?"T":"t")+[t,e]})},function(){p=this.transform().local})}return e.on("snap.draginit."+u.id,l),u._drag={},v.push({el:u,start:l,init:c}),u.mousedown(c),u},r.undrag=function(){for(var n=v.length;n--;)v[n].el==this&&(this.unmousedown(v[n].init),v.splice(n,1),e.unbind("snap.drag.*."+this.id),e.unbind("snap.draginit."+this.id));return!v.length&&t.unmousemove(g).unmouseup(m),this}}),i.plugin(function(t,n,i,o){var r=(n.prototype,i.prototype),s=/^\s*url\((.+)\)/,a=String,l=t._.$;t.filter={},r.filter=function(e){var i=this;"svg"!=i.type&&(i=i.paper);var o=t.parse(a(e)),r=t._.id(),s=(i.node.offsetWidth,i.node.offsetHeight,l("filter"));return l(s,{id:r,filterUnits:"userSpaceOnUse"}),s.appendChild(o.node),i.defs.appendChild(s),new n(s)},e.on("snap.util.getattr.filter",function(){e.stop();var n=l(this.node,"filter");if(n){var i=a(n).match(s);return i&&t.select(i[1])}}),e.on("snap.util.attr.filter",function(i){if(i instanceof n&&"filter"==i.type){e.stop();var o=i.node.id;o||(l(i.node,{id:i.id}),o=i.id),l(this.node,{filter:t.url(o)})}i&&"none"!=i||(e.stop(),this.node.removeAttribute("filter"))}),t.filter.blur=function(e,n){null==e&&(e=2);var i=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,i,o,r){return"string"==typeof i&&(o=i,r=o,i=4),"string"!=typeof o&&(r=o,o="#000"),o=o||"#000",null==i&&(i=4),null==r&&(r=1),null==e&&(e=0,n=2),null==n&&(n=e),o=t.color(o),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:o,dx:e,dy:n,blur:i,opacity:r})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}}),i.plugin(function(t,e,n,i,o){var r=t._.box,s=t.is,a=/^[^a-z]*([tbmlrc])/i,l=function(){return"T"+this.dx+","+this.dy};e.prototype.getAlign=function(t,e){null==e&&s(t,"string")&&(e=t,t=null),t=t||this.paper;var n=t.getBBox?t.getBBox():r(t),i=this.getBBox(),o={};switch(e=e&&e.match(a),e=e?e[1].toLowerCase():"c"){case"t":o.dx=0,o.dy=n.y-i.y;break;case"b":o.dx=0,o.dy=n.y2-i.y2;break;case"m":o.dx=0,o.dy=n.cy-i.cy;break;case"l":o.dx=n.x-i.x,o.dy=0;break;case"r":o.dx=n.x2-i.x2,o.dy=0;break;default:o.dx=n.cx-i.cx,o.dy=0}return o.toString=l,o},e.prototype.align=function(t,e){return this.transform("..."+this.getAlign(t,e))}}),i}(window,window.uLiB.eve),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){function e(e,o){var s="move";o.axis=o.axis||{},e.addClass("dragon"),e.on("dragstart",p),o.noCursor||("x"===o.axis?s="ew-resize":"y"===o.axis&&(s="ns-resize"),o.handle?e.find(o.handle).css("cursor",s):e.css("cursor",s)),e.each(function(e,s){var a=t(s),c=a.position(),u=c.top,p=c.left;a.data("isDragonEnabled",!0),a.css({top:u,left:p}).data("dragon",{}).data("dragon-opts",o),a.on("touchend",t.proxy(r,a)),a.on("touchmove",t.proxy(l,a));var d=o.handle;if(d){var h="string"==typeof d?a.find(d):d;h.on("mousedown",t.proxy(n,a)),h.on("touchstart",t.proxy(i,a))}else a.on("mousedown",t.proxy(n,a)),a.on("touchstart",t.proxy(i,a))})}function n(e){var n=this.data("dragon");if(!n.isDragging&&this.data("isDragonEnabled")){var i=t.proxy(o,this),r=t.proxy(a,this),s=this.offset();this.data("dragon",{onMouseUp:i,onMouseMove:r,isDragging:!0,left:s.left,top:s.top,grabPointX:s.left-e.pageX,grabPointY:s.top-e.pageY}),g.on("mouseup",i).on("blur",i).on("mousemove",r),f.on("blur",i),g.on("selectstart",u),d("dragStart",this,e)}}function i(e){e.preventDefault();var n=this.data("dragon");if(!n.isDragging&&this.data("isDragonEnabled")){var i=t.proxy(r,this),o=t.proxy(l,this),s=this.offset();this.data("dragon",{onTouchEnd:i,onTouchMove:o,isDragging:!0,left:s.left,top:s.top,grabPointX:s.left-e.originalEvent.pageX,grabPointY:s.top-e.originalEvent.pageY}),g.on("touchend",i).on("blur",i).on("touchmove",o),f.on("blur",i),g.on("selectstart",u),d("dragStart",this,e)}}function o(t){s(this,t,!1)}function r(t){t.preventDefault(),s(this,t,!0)}function s(t,e,n){var i=t.data("dragon");i.isDragging=!1,n?(g.off("touchend",i.onTouchEnd).off("blur",i.onTouchEnd).off("touchmove",i.onTouchMove).off("selectstart",u),f.off("blur",i.onTouchEnd),delete i.onTouchEnd,delete i.onTouchMove):(g.off("mouseup",i.onMouseUp).off("blur",i.onMouseUp).off("mousemove",i.onMouseMove).off("selectstart",u),f.off("blur",i.onMouseUp),delete i.onMouseUp,delete i.onMouseMove),d("dragEnd",t,e)}function a(t){c(this,t,t.pageX,t.pageY)}function l(t){t.preventDefault(),c(this,t,t.originalEvent.pageX,t.originalEvent.pageY)}function c(e,n,i,o){var r=e.data("dragon"),s=e.data("dragon-opts"),a={};s.axis!==t.fn.dragon.AXIS_X&&(a.top=Math.round(o+r.grabPointY)),s.axis!==t.fn.dragon.AXIS_Y&&(a.left=Math.round(i+r.grabPointX)),s.within&&h(e,a),e.css(m).offset(a),d("drag",e,n)}function u(t){t.preventDefault(),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.clear()}function p(t){t.preventDefault()}function d(t,e,n){var i=e.data("dragon-opts")[t];n.target=e[0],i&&i.call(e,n),e.trigger(t)}function h(t,e){e=e||{};var n=(t.data("dragon"),t.data("dragon-opts")),i=n.within,o=i===window,r=o?{left:0,top:0}:i.offset(),s=n.withinPaddingH||0,a=n.withinPaddingV||0,l=r.left+(o?0:parseInt(i.css("padding-left"),10))+(o?0:parseInt(i.css("border-left-width"),10))+s,c=r.top+(o?0:parseInt(i.css("padding-top"),10))+(o?0:parseInt(i.css("border-top-width"),10))+a,u=r.left+(o?i.innerWidth:i.outerWidth())-(o?0:parseInt(i.css("border-right-width"),10))-(o?0:parseInt(i.css("padding-right"),10))+(o?0:parseInt(t.css("margin-left"),10))+(o?0:parseInt(t.css("margin-right"),10))-t.outerWidth(!0)-s,p=r.top+(o?i.innerHeight:i.outerHeight())-(o?0:parseInt(i.css("border-bottom-width"),10))-(o?0:parseInt(i.css("padding-bottom"),10))+(o?0:parseInt(t.css("margin-top"),10))+(o?0:parseInt(t.css("margin-bottom"),10))-t.outerHeight(!0)-a;return e.top=Math.min(e.top,p),e.top=Math.max(e.top,c),e.left=Math.min(e.left,u),e.left=Math.max(e.left,l),e}var f=t(window),g=t(document.documentElement);t.noop||function(){};t.fn.dragon=function(t){return e(this,t||{}),this},t.fn.dragonDisable=function(){return this.data("isDragonEnabled",!1),this},t.fn.dragonEnable=function(){return this.data("isDragonEnabled",!0),this},t.extend(t.fn.dragon,{AXIS_X:"x",AXIS_Y:"y"});var m={right:"",bottom:""}}(i)}(window,"uLiB."),function(t,e){var n=t.uLiB.util,i=uLiB.$;if(!i.ionSound){var o,r,s,a,l={},c={},u=!1,p=function(){return"function"==typeof Audio||"object"==typeof Audio},d=function(t){var e,n;t.indexOf(":")!==-1?(e=t.split(":")[0],n=t.split(":")[1]):e=t,c[e]=new Audio,r=c[e].canPlayType("audio/mp3"),s="probably"===r||"maybe"===r?l.path+e+".mp3":l.path+e+".ogg",i(c[e]).prop("src",s),c[e].load(),c[e].preload="auto",c[e].volume=n||l.volume},h=function(t){var e,n,i,o;if(t.indexOf(":")!==-1?(n=t.split(":")[0],i=t.split(":")[1]):n=t,e=c[n],"object"==typeof e&&null!==e)if(i&&(e.volume=i),l.multiPlay||u){if(l.multiPlay)if(e.ended)e.play();else{try{e.currentTime=0}catch(r){}e.play()}}else e.play(),u=!0,o=setInterval(function(){e.ended&&(clearInterval(o),u=!1)},250)},f=function(t){var e=c[t];if("object"==typeof e&&null!==e){e.pause();try{e.currentTime=0}catch(n){}}},g=function(t){var e=c[t];if("object"==typeof e&&null!==e){try{c[t].src=""}catch(n){}c[t]=null}};i.ionSound=function(t){if(l=i.extend({sounds:["water_droplet"],path:"static/sounds/",multiPlay:!0,volume:"0.5"},t),o=l.sounds.length,p())for(a=0;a<o;a+=1)d(l.sounds[a]);i.ionSound.play=function(t){h(t)},i.ionSound.stop=function(t){f(t)},i.ionSound.kill=function(t){g(t)}},i.ionSound.destroy=function(){for(a=0;a<o;a+=1)c[l.sounds[a]]=null;o=0,i.ionSound.play=function(){},i.ionSound.stop=function(){},i.ionSound.kill=function(){}},n.apply(n.ns(e),{supportAudio:p,initSound:function(t){t.disableMultipleWindowsSounds&&(this.disableMultipleWindowsSounds=!!t.disableMultipleWindowsSounds),i.ionSound(t)},playSound:function(e){var n=this,o=function(){n.isSoundPlaying(e)||(i.ionSound.play(e),n.setLastSoundInfo(e))};this.disableMultipleWindowsSounds?t.setTimeout(o,Math.floor(100*Math.random())):i.ionSound.play(e)},getStorageInfoKey:function(t){return"sound_player_lock-"+t},getLastSoundInfo:function(t){return this.storageGet(this.getStorageInfoKey(t))},setLastSoundInfo:function(t){this.storageSet(this.getStorageInfoKey(t),this.dnow())},getSoundDuration:function(t){return 1e3*c[t].duration},isSoundPlaying:function(t){return this.dnow()-this.getLastSoundInfo(t)-this.getSoundDuration(t)<0}})}}(window,"uLiB.util"),function(t,e){var n=t.uLiB,i=(n.util,uLiB.$);!function(t){var e,n=navigator.userAgent,i=/iphone/i.test(n),o=/chrome/i.test(n),r=/android/i.test(n);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(n,s){var a,l,c,u,p,d,h,f;if(!n&&this.length>0){a=t(this[0]);var g=a.data(t.mask.dataName);return g?g():void 0}return s=t.extend({autoclear:t.mask.autoclear,placeholder:t.mask.placeholder,completed:null},s),l=t.mask.definitions,c=[],u=h=n.length,p=null,t.each(n.split(""),function(t,e){"?"==e?(h--,u=t):l[e]?(c.push(new RegExp(l[e])),null===p&&(p=c.length-1),u>t&&(d=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function a(){if(s.completed){for(var t=p;d>=t;t++)if(c[t]&&L[t]===g(t))return;s.completed.call(k)}}function g(t){return s.placeholder.charAt(t<s.placeholder.length?t:0)}function m(t){for(;++t<h&&!c[t];);return t}function y(t){for(;--t>=0&&!c[t];);return t}function v(t,e){var n,i;if(!(0>t)){for(n=t,i=m(e);h>n;n++)if(c[n]){if(!(h>i&&c[n].test(L[i])))break;L[n]=L[i],L[i]=g(i),i=m(i)}E(),k.caret(Math.max(p,t))}}function C(t){var e,n,i,o;for(e=t,n=g(t);h>e;e++)if(c[e]){if(i=m(e),o=L[e],L[e]=n,!(h>i&&c[i].test(o)))break;n=o}}function b(){var t=k.val(),e=k.caret();if(f&&f.length&&f.length>t.length){for(T(!0);e.begin>0&&!c[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<p&&!c[e.begin];)e.begin++;k.caret(e.begin,e.begin)}else{for(T(!0);e.begin<h&&!c[e.begin];)e.begin++;k.caret(e.begin,e.begin)}a()}function w(){T(),k.val()!=B&&k.change()}function x(t){if(!k.prop("readonly")){var e,n,o,r=t.which||t.keyCode;f=k.val(),8===r||46===r||i&&127===r?(e=k.caret(),n=e.begin,o=e.end,o-n===0&&(n=46!==r?y(n):o=m(n-1),o=46===r?m(o):o),S(n,o),v(n,o-1),t.preventDefault()):13===r?w.call(this,t):27===r&&(k.val(B),k.caret(0,T()),t.preventDefault())}}function _(e){if(!k.prop("readonly")){var n,i,o,s=e.which||e.keyCode,l=k.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>s)&&s&&13!==s){if(l.end-l.begin!==0&&(S(l.begin,l.end),v(l.begin,l.end-1)),n=m(l.begin-1),h>n&&(i=String.fromCharCode(s),c[n].test(i))){if(C(n),L[n]=i,E(),o=m(n),r){var u=function(){t.proxy(t.fn.caret,k,o)()};setTimeout(u,0)}else k.caret(o);l.begin<=d&&a()}e.preventDefault()}}}function S(t,e){var n;for(n=t;e>n&&h>n;n++)c[n]&&(L[n]=g(n))}function E(){k.val(L.join(""))}function T(t){var e,n,i,o=k.val(),r=-1;for(e=0,i=0;h>e;e++)if(c[e]){for(L[e]=g(e);i++<o.length;)if(n=o.charAt(i-1),c[e].test(n)){L[e]=n,r=e;break}if(i>o.length){S(e+1,h);break}}else L[e]===o.charAt(i)&&i++,u>e&&(r=e);return t?E():u>r+1?s.autoclear||L.join("")===I?(k.val()&&k.val(""),S(0,h)):E():(E(),k.val(k.val().substring(0,r+1))),u?e:p}var k=t(this),L=t.map(n.split(""),function(t,e){return"?"!=t?l[t]?g(e):t:void 0}),I=L.join(""),B=k.val();k.data(t.mask.dataName,function(){return t.map(L,function(t,e){return c[e]&&t!=g(e)?t:null}).join("")}),k.one("unmask",function(){k.off(".mask").removeData(t.mask.dataName)}).on("focus.mask",function(){if(!k.prop("readonly")){clearTimeout(e);var t;B=k.val(),t=T(),e=setTimeout(function(){k.get(0)===document.activeElement&&(E(),t==n.replace("?","").length?k.caret(0,t):k.caret(t))},10)}}).on("blur.mask",w).on("keydown.mask",x).on("keypress.mask",_).on("input.mask paste.mask",function(){k.prop("readonly")||setTimeout(function(){var t=T(!0);k.caret(t),a()},0)}),o&&r&&k.off("input.mask").on("input.mask",b),T()})}})}(i)}(window,"uLiB.jplugin"),function(t,e){var n=t.uLiB,i=n.$,o=n.util,r={ATTR_COMAGIC_TOOLTIP:"title",ATTR_COMAGIC_TOOLTIP_RICH:"original-title",ATTR_COMAGIC_CTYPE:"comagic-type",ATTR_UNSELECTABLE:"unselectable",BASE_ZINDEX:10,CTYPE_DELIMITER:"--",CSS_SELECTOR_PREFIX:"comagic-",CSS_FIELD_ERROR:"field-error",CSS_FIELD_CONTAINER_ERROR:"field-container-error",CSS_ELEMENT_MASK:"element-mask",CSS_ELEMENT_MASK_FIXED:"element-mask-fixed",
CSS_ELEMENT_MASKED:"element-masked",CSS_UNSELECTABLE:"unselectable",CSS_CONSULTANT_INPUT:"input-area",CSS_IE_LT_10:"ie-lt-10",CSS_IE_LT_9:"ie-lt-9",CSS_IE_LT_8:"ie-lt-8",CW_CONSULTANT:"consultant",CW_SITE_PHONE:"site_phone",CW_SITE_REQUEST:"site_request",CW_VISITOR_INFO_REQUEST:"visitor_info_request",CW_CONSULTANT_PREVIEW:"consultant_preview",CW_CALL_GENERATOR:"call_generator",CW_SITE_PHONE_FORM:"site_phone_form",CW_SITE_PHONE_BUTTON:"site_phone_button",CW_PERSONAL_FORM:"personal_form",CW_OFFLINE_MESSAGE_FORM:"offline_message_generator",DURATION_INPUT_CMP_ANIMATION:50,TPL_CSS_LINK:"//{comagic_web_url}static/banner/build/css/consultant_{banner_skin}-{banner_color}.css",TPL_SITEPHONE_CSS_LINK:"//{comagic_web_url}/static/banner/build/css/sitephone_{css_theme}-{widget_color}.css",TPL_CSS_LINK_DEBUG:"{url}{banner_skin}-{banner_color}.css",TPL_LEADGEN_CSS_LINK:"//{comagic_web_url}/static/banner/build/css/lead_main.css",TPL_HREF:'$1<a href="$3$5">$5</a>',SRC_IMG_BLANK:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",VALID_FILE_EXTENSIONS:["png","xpm","jpg","doc","docx","txt","xls","xlsx","csv","odt","ods","pdf","djvu","xml","fb2","epub"],ZZZZZZ:"ZZZZZZ"},s={ensure$:function(t){return t instanceof i?t:i(t)},getBody:function(){return document.body},maskElement:function(t,e,n){t=this.ensure$(t);var i=t.find("."+this.getCssSelector(this.C.CSS_ELEMENT_MASK,!0));return i.length?i:("static"==t.css("position")&&t.addClass(this.getCssSelector(this.C.CSS_ELEMENT_MASKED,!0)),i=new uLiB.el.Div({cls:this.C.CSS_ELEMENT_MASK,renderTo:t,renderBefore:n}),i.css("z-index",this.comagicTopZIndex()+1),e&&i.addClass(this.getCssSelector(this.C.CSS_ELEMENT_MASK_FIXED,!0)),i)},unmaskElement:function(t){t=this.ensure$(t);var e=t.find("."+this.getCssSelector(this.C.CSS_ELEMENT_MASK,!0));e.length&&(e.remove(),t.removeClass(this.getCssSelector(this.C.CSS_ELEMENT_MASKED,!0)))},zoomElement:function(t){t=t?this.ensure$(t):i("body"),t.css({zoom:window.innerWidth<window.innerHeight?window.innerWidth/480:window.innerHeight/640})},getScrollWidth:function(){return window.innerWidth-document.body.clientWidth},getCssSelector:function(t,e,n){t=t.replace(/_/g,"-"),t=t.replace(/\s{2,}/g," ");for(var i,r=t.split(" "),s=[];i=r.shift();)o.arrayIsContain([">","*"],i)?s.push(i):(n===!0&&0!==i.indexOf(".")&&(i="."+i),0===i.indexOf(".")?i=i.replace(".","."+this.C.CSS_SELECTOR_PREFIX):e&&0!=i.indexOf(this.C.CSS_SELECTOR_PREFIX)&&(i=this.C.CSS_SELECTOR_PREFIX+i),s.push(i));return s.join(" ")},elementHeight:function(t){return t&&t!==window?(t=this.ensure$(t),t.height()):window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},elementWidth:function(t){return t?(t=this.ensure$(t),t.width()):window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},appendCssSelector:function(t){var e=Array.prototype.slice.call(arguments,1),n=[];o.isObject(t)&&t["class"]&&(e=e.concat(t["class"].split(" ")));for(var i,r=0;i=e[r];r++)n.push(i);return o.isString(t)?(n.unshift(t),this.getCssSelector(n.join(" "),!0)):o.isObject(t)?(t["class"]=this.getCssSelector(n.join(" "),!0),t):void 0},hasCls:function(t,e){return!(!e||!t)&&(e=this.getCssSelector(e,!0),t.className.split(" ").indexOf(e)!==-1)},addCls:function(t,e,n){return t.addClass(this.getCssSelector(e,!0),n)},removeCls:function(t,e,n){if("array"!==i.type(e))return t.removeClass(this.getCssSelector(e,!0),n);for(var o,r=0;o=e[r];r++)this.removeCls(t,o)},topZIndex:function(t,e){var n="*"===(t||"*")?uLiB.$.makeArray(document.getElementsByTagName("*")):uLiB.$(t);return o.isFunction(e)&&(n=i.grep(n,e)),Math.max(0,Math.max.apply(null,i.map(n,function(t){var e=parseFloat(i(t).css("z-index"));return 2147483647!==e&&e?e:null})))},zIndexFilterFn:function(t){return t.style&&"static"!==t.style.position},comagicTopZIndex:function(){var t=this.topZIndex("*",this.zIndexFilterFn);return t>1e4?t:1e4},getZIndex:function(t){return t=t||0,this.C.BASE_ZINDEX+ +t},getZIndexStr:function(t){return""+this.getZIndex(t)},addStyle:function(t,e){e=e||(new Date).getTime();var n='<style type="text/css" id="{prefix}{id}">{styles}</style>',o={prefix:"comagic-dynamic-style-",id:e,styles:t},r=i("#"+e),s=this.sformat(n,o);return r.length?r.replace(s):i(s).appendTo("head")},removeStyle:function(t){i("#"+t).remove()},addCssLink:function(t){t.widget_color&&(t=o.apply({banner_color:t.widget_color},t));var e=t.css_url?t.css_url:this.sformat(this.C.TPL_CSS_LINK,this.apply({},{comagic_web_url:this.ensureEndsWith(t.comagic_web_url,"/")},t)),n=this.getDebugParam("cssurl"),r=e.split("-")[0].split("/").pop(),s="comagic-banner-stylesheet-"+r,a=i("#"+s);n&&(e=this.endsWith(n,".css")?n+"?"+Math.floor(100*Math.random()+1):this.sformat(this.C.TPL_CSS_LINK_DEBUG,this.apply({url:n},t))),a.length&&!t.iframe?a.attr("href",e):i("<link/>").attr("rel","stylesheet").attr("id",s).attr("type","text/css").attr("href",e).appendTo(t.iframe?t.iframe.find("head"):"head")},removeCssSkinLink:function(t){var e=t.css_url?t.css_url:this.sformat(this.C.TPL_CSS_LINK,t),n=e.split("-")[0].split("/").pop(),o="comagic-banner-stylesheet-"+n,r=i("#"+o);r.length&&r.remove()},addSitePhoneCssLink:function(t){var e=this.sformat(this.C.TPL_SITEPHONE_CSS_LINK,t),n="comagic-sitephone-stylesheet",o=i("#"+n);o.length?o.attr("href",e):i("<link/>").attr("rel","stylesheet").attr("id",n).attr("type","text/css").attr("href",e).appendTo(t.iframe?t.iframe.find("head"):"head")},addLeadgenCssLink:function(t){var e=this.sformat(this.C.TPL_LEADGEN_CSS_LINK,t),n="comagic-leadgen-stylesheet",o=i("#"+n);o.length||i("<link/>").attr("rel","stylesheet").attr("id",n).attr("type","text/css").attr("href",e).appendTo(t.iframe?t.iframe.find("head"):"head")},removeCssLinkById:function(t){var e=i("#"+t);e.length&&e.remove()},jfind:function(t,e){return t.find(this.getCssSelector(e,!0,!0))},jhasClass:function(t,e){return t.hasClass(this.getCssSelector(e,!0))},getCTypeOf:function(t,e){e=e||"",t=this.isInstance(t,"uLiB.cmp.Component")?t.getEl():t,t=this.ensure$(t);var n=t.attr(this.C.ATTR_COMAGIC_CTYPE)||"",i=t.parent(),o=n&&e?[n,e].join(this.C.CTYPE_DELIMITER):n||e;return i.length?this.getCTypeOf(i,o):o},label:function(t){return t=t||"-------------------------------",new uLiB.el.TestLabel({text:t})},hereDoc:function(t){return t.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},isParentWindowOpen:function(){return!!window.opener&&!window.opener.closed},buildUrl:function(t){return t=t||"",o.startsWith(t,["http://","https://","ftp://","//"])?t:o.startsWith(t,"/")?this.comagic_web_url+t:""},hasConnectWayEnabled:function(t,e){"string"===uLiB.$.type(t)&&(e=t,t=this);var n="available_connect_ways",i=t[n];return!!i&&o.arrayIsContain(i,e)},haveToDisplayLabelOnDevice:function(t){return!t||t.indexOf(this.getDeviceType())!==-1},init:function(){r.BASE_ZINDEX=this.comagicTopZIndex()+1}};s.init(),o.apply(o.C,r),o.apply(o.ns(e,t),s)}(window,"uLiB.util"),function(t,e){function n(t){}var i=t.uLiB,o=i.util;uLiB.$;n.prototype.globalStateId="global-state",n.prototype.initStateful=function(t){this.restoreState(t),this.changeState()},n.prototype.saveState=function(){this.stateId&&(o.storageSet(this.stateId,this.state),this.hasGlobalState&&o.storageSet(this.globalStateId,this.globalState))},n.prototype.restoreState=function(t){this.stateId&&(t=o.storageGet(this.stateId)),this.state=t||this.state||this.states[0],this.hasGlobalState&&(this.globalState=o.storageGet(this.globalStateId)||{})},n.prototype.changeState=function(){this.saveState()},o.apply(o.ns(e),{Stateful:n})}(window,"uLiB.util"),function(t,e){function n(t,e,n,i,o){var r;return r="object"===uLiB.$.type(e)?e:{effect:e,el:n},"show"===i&&(i=B),"hide"===i&&(i=A),L.applyIf(r,{duration:void 0===i?B:i,easing:void 0===o?I:o}),r.complete=function(){L.maybeCall(t.callback),L.maybeCall(r.callback)},r}function i(t,e,i,o,r){void 0===o&&(o="show");var s=n(t,e,i,o,r);L.maybeCall(t.beforeCallback),i=L.opop(s,"el"),i||(i=t.component.getEl()),i.show(s)}function o(t,e,i,o,r){void 0===o&&(o="hide");var s=n(t,e,i,o,r);L.maybeCall(t.beforeCallback),i=L.opop(s,"el"),i||(i=t.component.getEl()),i.hide(s)}function r(t,e,n,i){"string"!==uLiB.$.type(e)&&(n=e,e=void 0),"boolean"!==uLiB.$.type(n)&&(i=n),e=e?L.getCssSelector(e,!0,!0):"> *",t.component.getEl().find(e).animate({opacity:1},{easing:I,duration:n?0:O,complete:i})}function s(t,e,n,i){t.component.isDestroyed||("string"!==uLiB.$.type(e)&&(n=e,e=void 0),"boolean"!==uLiB.$.type(n)&&(i=n),e=e?L.getCssSelector(e,!0,!0):"> *",t.component.getEl().find(e).animate({opacity:0},{easing:I,duration:n?0:O,complete:i}))}function a(t,e){var n;if(t=t.component?t.component:t,t.respectBannerPlace||t.parentCmp&&t.parentCmp.respectBannerPlace||t.ownerComponent&&t.ownerComponent.respectBannerPlace){var i=t.banner_place||t.parentCmp&&t.parentCmp.banner_place;i=i.split("_"),n="middle"===i[0]?i[1]:{bottom:"down",top:"up"}[i[0]],e||(n=P[n])}return n}function l(t,e){i(e,"fade")}function c(t,e){L.jhasClass(e.component.getEl(),"single-way-common")?i(e,{effect:"fade"}):(e.component.getEl().show(),e.component.getInnerEl("collapsed").hide(),i(e,{effect:L.C.IS_IE_LT_10?"fade":"slide",direction:a(e.component,!0),el:e.component.getInnerEl("collapsed")}))}function u(t,e){e.component.getEl().show(),e.component.getInnerEl("expanded").hide(),i(e,{effect:"slide",direction:a(e.component,!0),el:e.component.getInnerEl("expanded")})}function p(t,e){var n=t.component.getEl(),l=e.component.getEl(),c=n.width(),u=l.width(),p=a(e.component,!0),d=e.component.getEl().height(),h="mobile"!==t.component.parentCmp.banner_skin?8:74,f="right"===p||"down"===p?d-h:h-d,g=function(){o(t,{effect:"fade",duration:0,el:t.component.getEl()}),i(e,{effect:"slide",start:f,direction:p,el:e.component.getEl(),callback:function(){r(e,"way-item")}})};s(e,"way-item",!0),c>u?(n.origWidth=c,n.animate({width:u},{easing:I,duration:100,complete:g})):g()}function d(t,e){s(t,"way-item"),o(t,{effect:"slide",direction:a(t.component,!0),el:t.component.getEl(),distance:100,callback:function(){i(e,"",e.component.getEl(),0),e.component.getEl().origWidth&&e.component.getEl().animate({width:e.component.getEl().origWidth},{easing:I,duration:100})}})}function h(t,e){var n=N;o(t,{effect:"fade",callback:function(){s(e,n,!0),i(e,{effect:"slide",direction:a(e.component,!0),callback:function(){r(e,n)}})}})}function f(t,e){o(t,{effect:"slide",direction:a(t.component,!0),callback:function(){i(e,"fade")}})}function g(t,e){var n=N,l=function(){s(e,n,!0),i(e,{effect:"slide",direction:a(e.component,!0),callback:function(){r(e,n)}})};L.jhasClass(t.component.getEl(),"single-way-common")?o(t,{effect:"fade",callback:l}):o(t,{effect:"slide",direction:a(t.component,!0),callback:l})}function m(t,e){var n=N;s(t,n),o(t,{effect:"slide",direction:a(t.component,!0),callback:function(){t.el&&r(t,n,!0),L.jhasClass(e.component.getEl(),"single-way-common")?i(e,{effect:"fade"}):i(e,{effect:"slide",direction:a(t.component,!0)})}})}function y(t,e){s(t,"way-item > *"),o(t,{effect:"slide",direction:a(t,!0),callback:function(){s(e,N,!0),i(e,{effect:"slide",direction:a(e,!0),callback:function(){r(e,N),r(t,"way-item > *",!0)}})}})}function v(t,e){s(e,N),o(t,{effect:"slide",direction:a(e,!0),callback:function(){s(t,"way-item > *"),i(e,{effect:"slide",direction:a(e,!0),callback:function(){r(t,"way-item > *"),r(e,N,!0)}})}})}function C(t,e){s(e,!0),e.component.ownerComponent.showToolButtons&&e.component.ownerComponent.showToolButtons(!1),i(e,{effect:"slide",direction:a(e,!0),duration:100}),r(e)}function b(t,e){o(t,{effect:"slide",direction:a(t,!0),duration:50}),s(t)}function w(t,e){s(t,N),o(t,{effect:"slide",direction:a(t,!0),callback:function(){r(t,N,!0),s(e,N,!0),i(e,{effect:"slide",direction:a(t,!0),callback:function(){r(e,N)}})}})}function x(t,e){var n=t.component,a=n.getEl(),l=e.component.getEl(),c=l.height()-a.height(),u=n.parentCmp;u.logCmp.getEl().animate({height:"-="+c},{queue:!1,duration:O}),o(t,{effect:"fade",duration:O,callback:function(){s(e,!0),r(e),i(e,{effect:"slide",direction:"up",duration:O})}})}function _(t,e){var n=t.component,a=n.getEl(),l=e.component.getEl(),c=a.height()-l.height(),u=n.parentCmp;o(t,{effect:"fade",duration:O,callback:function(){s(e,!0),r(e),i(e,{effect:"slide",direction:"up",duration:O})}}),u.logCmp.getEl().animate({height:"+="+c},{queue:!1,duration:O})}function S(t,e){o(t,{effect:"fade",duration:O}),i(e,{effect:"fade",duration:O})}function E(t,e){S(t,e)}function T(){this.currentAnimation={},this.actionTimeoutId=null,this.easing=I,this.durationInnerFade=O,this.durationIn=B,this.durationOut=A}var k=t.uLiB,L=k.util,I=(uLiB.$,"easeInCubic"),B=300,A=200,O=80,N="common-form-panel-container > *",P={left:"right",right:"left",up:"down",down:"up"},M={"undefined:Banner":l,"undefined:Slider":c,"undefined:Buttons":u,"slider-expanded:slider-collapsed":d,"slider-collapsed:slider-expanded":p,"Banner:CommonFormPanel":h,"CommonFormPanel:Banner":f,"Slider:CommonFormPanel":g,"CommonFormPanel:Slider":m,"Buttons:CommonFormPanel":y,"CommonFormPanel:Buttons":v,"undefined:PopupMessagePanel":C,"PopupMessagePanel:undefined":b,"CommonFormPanel:CommonFormPanel":w,"main-input-cmp:main-email-chat-cmp":x,"main-email-chat-cmp:main-input-cmp":_,"simple-input-cmp:simple-email-chat-cmp":S,"simple-email-chat-cmp:simple-input-cmp":E};T.prototype.waitForAction=20,T.prototype.push=function(e,n,i,o){var r=n?"show":"hide";this.currentAnimation[r]={component:e,callback:i,beforeCallback:o},null!==this.actionTimeoutId&&t.clearTimeout(this.actionTimeoutId),this.actionTimeoutId=t.setTimeout(L.bind(this.doActions,this),this.waitForAction)},T.prototype.doActions=function(){this.actionTimeoutId=null,this.doAnimation()},T.prototype.doAnimation=function(){var t=this.currentAnimation,e=t.hide,n=t.show,i=this.getAnimationFn(e,n);this.clearCurrentAnimation(),i?i(e,n):(e&&(L.maybeCall(e.beforeCallback),e.component.getEl()&&e.component.getEl().hide(),L.maybeCall(e.callback)),n&&(L.maybeCall(n.beforeCallback),n.component.getEl().show(),L.maybeCall(n.callback)))},T.prototype.clearCurrentAnimation=function(){this.currentAnimation={}},T.prototype.getAnimationKey=function(t,e){return L.sformat("{0}:{1}",this.getComponentAnimaitonKey(t),this.getComponentAnimaitonKey(e))},T.prototype.getAnimationFn=function(t,e){return L.log(this.getAnimationKey(t,e),t,e),M[this.getAnimationKey(t,e)]},T.prototype.getComponentAnimaitonKey=function(t){return t&&t.component.animationKey||t&&t.component.constructor.name};var R=new T;R.getSlideDirection=a,L.apply(L.ns(e),{AnimationManager:R})}(window,"uLiB.util"),function(t,e){function n(t){if(i.isString(t))return o(t);var e=t.tag||this.tag,s=t.renderTo||this.renderTo,a=t.renderBefore||this.renderBefore,l=t.text||this.text,c=t.children||this.children,u=t.cls||this.cls,p=t.defaults||this.defaults,d=t.unselectable||this.unselectable,h=t.ctype||this.ctype,f={};for(var g in t)t.hasOwnProperty(g)&&i.inArray(g,r)==-1&&(f[g]=t[g]);u&&(f["class"]=i.getCssSelector(u,!0)),h&&(f[i.C.ATTR_COMAGIC_CTYPE]=h),"on"===d&&i.appendCssSelector(f,i.C.CSS_UNSELECTABLE);var m=o(i.sformat("<{0}/>",e),f);if(void 0!==l&&m.text(l),c)for(var y,v=0;y=c[v];v++)y.__eventNormalizer&&y._idPrefix?m.append(y.getEl()):y.jquery?m.append(y):o.isPlainObject(y)&&void 0===y.length?new n(i.apply(y,{renderTo:m},p)):m.append(y);return a?m.insertBefore(t.renderBefore):s&&(i.isInstance(s,"uLiB.cmp.Component")?m.appendTo(s.getEl()):m.appendTo(s)),m}var i=t.uLiB.util,o=uLiB.$,r=["tag","renderTo","text","children","cls","defaults","ctype","renderBefore"];i.apply(i.ns(e),{Element:n})}(window,"uLiB.el"),function(t,e){function n(t){return t.tag="div",n.superclass.constructor.call(this,t)}function i(t){t.cls="footer",i.superclass.constructor.apply(this,arguments)}function o(t){t.cls="test-div",this.renderTo="body",o.superclass.constructor.apply(this,arguments)}var r=t.uLiB.util;r.extend(n,"uLiB.el.Element"),r.extend(i,n),r.extend(o,n),r.apply(r.ns(e),{Div:n,Footer:i,TestDiv:o})}(window,"uLiB.el"),function(t,e){function n(t){this.tag="label",n.superclass.constructor.apply(this,arguments)}function i(t){this.cls="test-label",this.renderTo="body",i.superclass.constructor.apply(this,arguments)}var o=t.uLiB,r=o.util,s=o.el.Element;uLiB.$;r.extend(n,s),r.extend(i,n),r.apply(r.ns(e),{Label:n,TestLabel:i})}(window,"uLiB.el"),function(t,e){function n(t){this.tag="table",n.superclass.constructor.apply(this,arguments)}function i(t){this.cls="test-table",this.children=[{tag:"tr",children:[{tag:"td",id:"f"},{tag:"td",id:"s"},{tag:"td",id:"t"}]}],this.renderTo="body",i.superclass.constructor.apply(this,arguments)}var o=t.uLiB,r=o.util,s=o.el.Element;uLiB.$;r.extend(n,s),r.extend(i,n),r.apply(r.ns(e),{Table:n,TestTable:i})}(window,"uLiB.el"),function(t,e){function n(t){}var i=t.uLiB,o=i.util,r=uLiB.$;n.prototype.clearOnSubmit=!0,n.prototype.clearValues=function(){for(var e,n=this.getFields(),i=0;e=n[i];i++)!e.dontClear&&e.setValue(t.uLiB.field.Field.prototype.emptyValue)},n.prototype.clearInvalid=function(){for(var t,e=this.getFields(),n=0;t=e[n];n++)t.setError()},n.prototype.getField=function(t){for(var e,n=this.getFields(),i=0;e=n[i];i++)if(e.name==t)return e;return null},n.prototype.getFields=function(t){t=!!t;for(var e,n=t?{}:[],i=0;e=this.items[i];i++)o.isInstance(e,"uLiB.field.Field")&&(t?n[e.name]=e:n.push(e));return n},n.prototype.isValid=function(){for(var t,e=this.getFields(),n=!0,i=0;t=e[i];i++)n=t.isValid()&&n;return n},n.prototype.getValues=function(){for(var t,e,n=this.getFields(),i={},s=0;e=n[s];s++)t=e.getValue(),r.isPlainObject(t)?o.apply(i,t):i[e.name]=e.getValue();return i},n.prototype.setValues=function(t){var e=this.getFields(!0);for(var n in t)t.hasOwnProperty(n)&&e[n]&&e[n].setValue(t[n])},n.prototype.hasChanges=function(){return!0},o.apply(o.ns(e),{Form:n})}(window,"uLiB.form"),function(t,e){function n(e){var n=this;e=o.apply({},e),this.id=this.genId(),e.cls&&(this.addCls(e.cls),delete e.cls),e._onClick&&this._onClick&&(this.__onClick=e._onClick,delete e._onClick),this.addCls("component"),o.C.IS_IE_LT_10&&this.addCls(o.C.CSS_IE_LT_10),o.C.IS_IE_LT_9&&this.addCls(o.C.CSS_IE_LT_9),o.C.IS_IE_LT_8&&this.addCls(o.C.CSS_IE_LT_8),o.apply(this,e),this.o=e,!this.is_lead_gen_preview&&this.respectBannerPlace&&this.banner_place&&(this.addCls(this.banner_place.replace("_"," ")),this.banner_place.indexOf("middle")!=-1&&(this.onShow=o.bind(function(t){t&&(this.state&&this.state.css&&this.state.css.top||this.delayUntilCssLoad(o.bind(function(){this.getEl().center(this.is_preview?this.getEl().parent("body"):window,"v",!0)},this)))},this))),this.monitorResize&&s(t).resize(o.bind(n._onResize,n)),(e.stateful||this.stateful)&&this.initStateful(e.state),(e.floating||this.floating)&&(this.zIndex=this.zIndex||11),this.initComponent(),(e.floating||this.floating)&&this.getEl().css({position:"absolute"}),this.monitorZoom&&"mobile"===this.o.banner_skin&&setInterval(function(){n.getEl()&&o.zoomElement(n.getEl())},100),u.register(this)}var i=t.uLiB,o=i.util,r=i.el.Element,s=(o.Stateful,uLiB.$),a=o.C.ATTR_COMAGIC_CTYPE,l=["click","mouseover","mouseout"],c=o.C.CTYPE_DELIMITER,u=new function(){var t={},e={};this.register=function(e){t[e.id]=e},this.registerCType=function(t){var n=t.prototype.ctype;n&&(e[n]=t)},this.get=function(e){return t[e]},this.create=function(t,n){var i=t.__class;return i||(i=e[t.ctype]),delete t.__class,new i(t,n)},this.getBy=function(e){var n;for(var i in t)if(t.hasOwnProperty(i)){if(n=t[i],o.isFunction(e)&&o.isinstance(n,e))return n;if(o.isString(e)&&n.ctype===e)return n}return null}};o.mixIn(n,"uLiB.util.Stateful","Stateful"),n.prototype.ctype="component",n.prototype.destroyOnHide=!1,n.prototype.respectBannerPlace=!1,n.prototype.trackOwnEvents=!1,n.prototype.animationEnabled=!1,n.prototype._idPrefix="comagic-cmp-",n.prototype._namePrefix="cmg-",n.prototype._typeAttr=a,n.prototype._typePrefix="",n.prototype._idCounter=0,n.prototype.skipCmp=!1,n.prototype.isDestroyed=!1,n.prototype.__eventNormalizer=function(t){var e=o.getCTypeOf(t.target),n=e.split(c),i=n.pop();return!(!e||e==i&&!this.trackOwnEvents)&&[this,e,i,t,t.target,e==i]},n.prototype.genId=function(){return n.prototype._idPrefix+n.prototype._idCounter++},n.prototype.getCType=function(){return this.ctype&&n.prototype._typePrefix+this.ctype},n.prototype.getHtml=function(){return this.html},n.prototype.getCls=function(){return this.cls},n.prototype.hasCls=function(t){return this.getCls().indexOf(o.getCssSelector(t,!0))!==-1},n.prototype.destroy=function(){this.onDestroy&&this.onDestroy(),this.el&&(this.el.remove(),this.el=null,this.isDestroyed=!0)},n.prototype.reRender=function(t){this.destroy(),t&&o.apply(this,t),this.beforeRender(),this.render(),this.afterRender()},n.prototype.buildEl=function(){return new r(this.autoEl||this.getHtml())},n.prototype.initComponent=function(){this.beforeRender(),this.render(),this.afterRender()},n.prototype.render=function(){var t=this.getCType();if(this.el=this.buildEl(),this.renderHidden&&this.el.hide(),this.el.attr("id",this.id),this.name&&this.el.attr("name",this._namePrefix+this.name),this.getCls()&&this._setElClass(o.getCssSelector(this.getCls(),!0)),t&&this.el.attr(n.prototype._typeAttr,t),this.style)for(var e in this.style)this.style.hasOwnProperty(e)&&this.el.css(e,this.style[e]);void 0!==this.zIndex&&this.el.css("z-index",o.getZIndexStr(this.zIndex)),void 0!==this.width&&this.getEl().width(this.width),void 0!==this.height&&this.getEl().height(this.height),void 0!==this.disabled&&this.setDisabled(this.disabled),this.renderTo&&this.getEl().appendTo(this.renderTo instanceof n?this.renderTo.getEl():this.renderTo)},n.prototype.beforeRender=function(){this.banner_skin&&this.addCls("skin-"+this.banner_skin),this.html&&(this.html=o.sformat(this.html,this))},n.prototype.renderItems=function(t){t=t||this.items;for(var e,n,i=this._getBodyEl(),o=0;n=t[o];o++)e=this.buildItem(n),t[o]=e,i.append(e.getEl());return this.items=t,this},n.prototype.getEventsEl=function(){return this.getEl()},n.prototype.afterRender=function(){this.tooltip&&this.setTooltip(this.tooltip),this.initEvents&&this.initEvents(),this.monitorResize===!0&&this.delayUntilCssLoad(o.bind(this._adjustPosition,this))},n.prototype.initEvents=function(){var t=l;this.trackClick&&this._onClick&&this.getEl().on("click",o.wrapEvent(this.__eventNormalizer,this._onClick,this)),this.trackClick&&this.__onClick&&this.getEl().on("click",o.wrapEvent(this.__eventNormalizer,this.__onClick,this)),this._onKeyup&&this.getEl().on("keyup",o.wrapEvent(this.__eventNormalizer,this._onKeyup,this)),this._onKeydown&&this.getEl().on("keydown",o.wrapEvent(this.__eventNormalizer,this._onKeydown,this));for(var e,n,i=0;e=t[i];i++)n=this["on"+o.camelize(e)],o.isFunction(n)&&this.getEventsEl().on(e,o.wrapEvent(this.__eventNormalizer,n,this))},n.prototype.calculateTooltipGravity=function(t){if(this.tooltipGravity)return this.tooltipGravity;t=t||this._getTooltipEl();var e=t.offset();return e.left<200?"w":"e"},n.prototype._setTooltip=function(t){var e={title:o.C.ATTR_COMAGIC_TOOLTIP,rich:o.C.ATTR_COMAGIC_TOOLTIP_RICH}[this.tooltipType]||o.C.ATTR_COMAGIC_TOOLTIP,n=t||this.tooltip,i=this._getTooltipEl();i&&(i.attr(e,n),"div"===this.tooltipType&&this._setDivTooltip(n),"rich"===this.tooltipType&&this._setRichTooltip(n,i))},n.prototype._setRichTooltip=function(t,e){e.tipsy(o.apply({className:o.bind(this.getTooltipClass,this),gravity:o.bind(this.calculateTooltipGravity,this),trigger:"manual"},this.tooltipOptions)),e.tipsy(t?"show":"hide")},n.prototype.getTooltipClass=function(){return o.getCssSelector(o.getCTypeOf(event.target).split(c).shift()+"-tooltip",!0)},n.prototype.setTooltip=function(t){this.tooltip=this.tooltip||t,this._setTooltip()},n.prototype._getClsParts=function(t){return t=t||this.cls,t?t.split(/\s+/):[]},n.prototype._setElClass=function(t){this.el&&this.el.attr("class",this.cls=t)},n.prototype._onResize=function(){this._adjustPosition()},n.prototype.delayUntilCssLoad=function(t){var e=this,n=t;this.getEl()&&"0.99"===this.getEl().css("opacity").substr(0,4)?n():setTimeout(function(){e.delayUntilCssLoad(n)},150)},n.prototype._getWidth=function(){return o.elementWidth(this.getEl())},n.prototype._getHeight=function(){return o.elementHeight(this.getEl())},n.prototype._adjustPosition=function(){if("mobile"!==this.o.banner_skin&&!this.is_preview&&!("label"===this.ctype&&(this.hasCls("right")||this.hasCls("left"))||this instanceof uLiB.cmp.ModalPanel)){var t=this,e=8,n=o.sformat("{0}px",e),i=o.elementWidth(),r=o.elementHeight(),s=t.getEl(),a=t._getWidth(),l=t._getHeight(),c=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";if(s){if(a+2*e>i||l+2*e>r?s.css("position","absolute").css("left",n).css("right","auto").css("top",n).css("bottom","auto"):s.css("position","").css("right","").css("bottom","").css(o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"top":"left",""),this.state=this.globalState||this.state,"x"===c&&this.state&&this.state.moveToRightBorder)return s.css("left",o.elementWidth()-a-30),void this.savePosition();if("y"===c&&this.state&&this.state.moveToBottomBorder)return s.css("top",o.elementHeight()-l-10),void this.savePosition();this.state&&this.state.css&&(o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?o.elementWidth()-this.state.css.left-a<30&&s.css("left",o.elementWidth()-a-30):o.elementHeight()-this.state.css.top-s.height()<10&&s.css("top",o.elementHeight()-l-10)),o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?o.elementWidth()-s.offset().left-a<50&&this.globalState&&(this.globalState.moveToRightBorder=!0):o.elementHeight()-s.offset().top-l<25&&this.globalState&&(this.globalState.moveToBottomBorder=!0),this.savePosition()}}},n.prototype.savePosition=function(){if(this.isVisible()){var t=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";this.state=this.state||{},this.state.css=this.state.css||{},this.respectBannerPlace&&("x"===t?this.state.css.left=parseInt(this.getEl().css("left"))||this.getEl().offset().left||this.globalState.css.left:this.state.css.top=parseInt(this.getEl().css("top"))||this.getEl().offset().top||this.globalState.css.top),this.globalState=o.apply(this.globalState,this.state),this.saveState()}},n.prototype.restorePosition=function(){if("mobile"!==this.o.banner_skin&&(this.restoreState(),this.hasGlobalState&&(this.state.css=this.globalState.css),!this.o.is_preview&&this.getEl()&&this.state.css&&Object.keys(this.state.css).length)){var t=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";"x"===t?(this.state.css.left&&this.hasCls("right")&&this.removeCls("right"),o.elementWidth()<this.state.css.left+this._getWidth()?this.getEl().css("left",o.elementWidth()-this._getWidth()-30):this.getEl().css("left",this.state.css.left)):o.elementHeight()<this.state.css.top+this._getHeight()?this.getEl().css("top",o.elementHeight()-this._getHeight()-30):this.getEl().css("top",this.state.css.top)}},n.prototype.addCls=function(t){t=o.getCssSelector(t,!0);var e=this._getClsParts();o.inArray(t,e)==-1&&(e.push(t),this._setElClass(this.cls=e.join(" ")))},n.prototype.removeCls=function(t,e){t=o.getCssSelector(t,!0);var n=this._getClsParts();if(e){for(var i,r=[],s=0;i=n[s];s++)0!==i.indexOf(t)&&r.push(i);if(n.length===r.length)return;n=r}else{var a=o.inArray(t,n);if(a==-1)return;n.splice(a,1)}this._setElClass(this.cls=n.join(" "))},n.prototype.toggleCls=function(t,e){return"boolean"==typeof e?e?this.addCls(t):this.removeCls(t):this.hasCls(t)?(this.removeCls(t),!1):(this.addCls(t),!0)},n.prototype.isVisible=function(){return this.showing||this.hiding?this.showing:this.getEl().is(":visible")},n.prototype.show=function(t,e){var n=e===!0;if(this.animationEnabled||n){var i=this.isVisible();if(!(t^i))return;t&&(this.showing=t),!t&&(this.hiding=!t),uLiB.util.AnimationManager.push(this,t,o.bind(function(){this.showing=!1,this.hiding=!1,o.maybeCall(e,"callback",this),o.maybeCall(e,"afterCallback",this),t&&this.initDraggable(),!t&&this.destroyOnHide&&this.destroy()},this),o.bind(function(){o.maybeCall(e,"beforeCallback",this)},this)),this.onShow&&this.onShow(t,e)}else e&&e.callback&&(e.complete=e.callback),this.getEl()[t?"show":"hide"](e),this.onShow&&this.onShow(t,e),t&&this.initDraggable()},n.prototype.getEl=function(){return this.el},n.prototype._getTooltipEl=function(){return this.el},n.prototype._getBodyEl=function(){return this.bodyEl||this.el},n.prototype.add=function(t){return this._getBodyEl().append(t instanceof n?t.getEl():t),t},n.prototype.setDisabled=function(t){this[t?"addCls":"removeCls"]("component-disabled"),this.disabled=t},n.prototype.isDisabled=function(){return this.disabled},n.prototype.getInnerEl=function(t,e,n){return e=void 0===e||e,n=void 0===n||n,this.getEl().find(o.getCssSelector(t,e,n))},n.prototype.changeState=function(){},n.prototype.initDraggable=function(){this.getEl().dragon&&!this.isDraggableInited&&this.draggable&&(this.getEl().dragon(this.getDraggableOpts()),this.isDraggableInited=!0)},n.prototype.getDraggableOpts=function(){return{}},n.prototype.getParentByCType=function(t){var e=this.getEl().parents(o.sformat("[comagic-type={0}]",t)).get(0);return e?u.get(e.id):null},n.prototype.getContrastColor=function(t,e){var n=e||!1,i={"#232426":"#FFFFFF","#CFCCCC":"#4D4C4C","#E6E9E9":"#555656","#7BCC78":"#2A4C29","#FAD331":"#574E07","#F8B200":"#564300","#BBA68A":"#463D32","#FFD441":"#000000"};return i[t]||(n?"#000000":"#FFFFFF")},n.prototype._onKeydown=function(){},o.apply(o.ns(e),{ComponentManager:u,Component:n})}(window,"uLiB.cmp"),function(t,e){function n(t){this.addCls("button");var e=this.action||t.action,i=t.icon||this.icon;if(e&&(this.ctype=[this.ctype,e].join("-")),i){var o,r=i.anchor||"left",s=i.tpl||this[_.sformat("iconTpl{0}",_.camelize(r))];o=_.sformat(s,_.apply({},i,{src:this.defaultIconSrc})),this.html=_.sformat(this.html,{text:o}),this.addCls("button-icon"),this.addCls("button-icon-"+r)}this.html=_.sformat(this.html,{text:this.textTpl}),(t.menu||this.menu)&&(this.stateful=!0,this.state=this.states[1]),(this.enableToggle||t.enableToggle)&&(this.pressed=!(!this.pressed&&!t.pressed)),n.superclass.constructor.apply(this,arguments),this.menu&&this.initMenu()}function i(t){this.addCls("standard-button"),this.addCls("standard-button"),i.superclass.constructor.apply(this,arguments)}function o(t){this.addCls("small-button"),o.superclass.constructor.apply(this,arguments)}function r(t){this.addCls("tool-button"),r.superclass.constructor.apply(this,arguments)}function s(t){this.addCls("tool-button-close"),this.action="close",s.superclass.constructor.apply(this,arguments)}function a(t){this.addCls("tool-button-close-char"),this.action="close",this.html="<div>&times;</div>",a.superclass.constructor.apply(this,arguments)}function l(t){this.addCls("tool-button-close-image"),this.action="close",this.html="<div></div>",l.superclass.constructor.apply(this,arguments)}function c(t){this.addCls("tool-button-unpin"),this.action="unpin",c.superclass.constructor.apply(this,arguments)}function u(t){this.addCls("tool-button-pin"),this.action="pin",u.superclass.constructor.apply(this,arguments)}function p(t){this.addCls("tool-button-minimize"),this.action="minimize",p.superclass.constructor.apply(this,arguments)}function d(t){this.addCls("ms-button"),this.addCls("unselectable"),d.superclass.constructor.apply(this,arguments)}function h(t){this.addCls("common-button"),h.superclass.constructor.apply(this,arguments)}function f(t){this.addCls(_.sformat("panel-tool-button panel-tool-button-{0}",t.action)),this.icon={},f.superclass.constructor.apply(this,arguments)}function g(t){this.addCls("call-button"),this.icon={},g.superclass.constructor.apply(this,arguments)}function m(t){this.addCls("rating-button"),this.icon={},m.superclass.constructor.apply(this,arguments)}function y(t){this.addCls("text-button"),y.superclass.constructor.apply(this,arguments)}function v(t){this.addCls("chat-send-button"),v.superclass.constructor.apply(this,arguments)}function C(t){
var e="functional-button-"+t.type;this.addCls("functional-button"),this.addCls(e),this.ctype=e,this.icon={},C.superclass.constructor.apply(this,arguments)}function b(t){this.addCls("retention-main-button"),b.superclass.constructor.apply(this,arguments),this.getEl().css("background-color",t.color),this.getTextEl().css("color",this.getContrastColor(t.color))}function w(t){this.addCls("lead-request-form-send-button"),w.superclass.constructor.apply(this,arguments)}var x=t.uLiB,_=x.util;uLiB.$;_.extend(n,"uLiB.cmp.Component"),n.prototype.trackClick=!0,n.prototype.ctype="button",n.prototype.text="&nbsp;",n.prototype.html='<div><a tabindex="0" unselectable="on">{text}</a></div>',n.prototype.textTpl="{text}",n.prototype.iconTplLeft='<img src="{src}">{text}',n.prototype.defaultIconSrc=_.C.SRC_IMG_BLANK,n.prototype.states=["on","off"],n.prototype.stateClsPrefix="button-state-",n.prototype.enableToggle=!1,n.prototype.initMenu=function(){this.trackOwnEvents=!0,this.menu=new x.cmp.Menu(this.menu),this.menu.button=this},n.prototype.changeState=function(t){if(!this.disabled){var e=this.state,n=void 0===t||t!==e&&_.arrayIsContain(this.states,t);this.state=t||e,n&&this._onBeforeStateChange(this.state,e)!==!1&&(this.removeCls(this.stateClsPrefix+e),this.addCls(this.stateClsPrefix+this.state),this.mixins.Stateful.changeState.apply(this,arguments),this.setStateText(),this._onStateChange(t,e))}},n.prototype._onBeforeStateChange=function(t,e){return this.onBeforeStateChange(t,e)},n.prototype.onBeforeStateChange=function(t,e){},n.prototype._onStateChange=function(t,e){this.onStateChange(t,e)},n.prototype.onStateChange=function(t,e){},n.prototype.setStateText=function(){var t=_.sformat("textState{0}",_.camelize(this.state)),e=this[t];void 0!==e&&this.setText(e)},n.prototype._onClick=function(t,e,n,i){if(this.disabled)return void i.stopPropagation();if(this.stateful){var o=_.arrayIndexOf(this.states,this.state),r=this.states.length,s=(o+1)%r;this.changeState(this.states[s]),this.showMenu("on"===this.state)}this.enableToggle&&this.getEl().toggleClass(_.getCssSelector("active",!0),this.pressed=!this.pressed)},n.prototype.showMenu=function(t){!this.disabled&&this.menu&&(t?this.menu.showAt(this.getEl(),"tl-bl"):this.menu.show(!1))},n.prototype.setText=function(t){this.text=t;var e=this.getTextEl();e&&e.text(t)},n.prototype.getTextEl=function(){var t=this.getEl();return t&&t.find("span")},_.extend(i,n),i.prototype.ctype="standard-button",_.extend(o,n),o.prototype.ctype="small-button",_.extend(r,n),r.prototype.ctype="tool-button",_.extend(s,r),_.extend(a,r),_.extend(l,r),_.extend(c,r),_.extend(u,r),_.extend(p,r),_.extend(d,n),d.prototype.ctype="ms-button",d.prototype.iconTplLeft='<img src="{src}">{text}',d.prototype.iconTplRight='{text}<img src="{src}">',d.prototype.title="",d.prototype.textTpl="<span>{text}</span>",d.prototype.html='<a tabindex="0" unselectable="on">{text}</a>',_.extend(h,d),h.prototype.ctype="common-button",_.extend(f,d),f.prototype.ctype="tool-button",_.extend(g,d),g.prototype.ctype="call-button",_.extend(m,d),m.prototype.ctype="rating-button",_.extend(y,d),y.prototype.ctype="text-button",_.extend(v,h),v.prototype.ctype="chat-send-button",_.extend(C,d),C.prototype.ctype="functional-button",C.prototype.trackOwnEvents=!0,_.extend(b,h),b.prototype.ctype="common-button-send",b.prototype.setText=function(t){this.getInnerEl("span",!1,!1).text(t)},_.extend(w,h),w.prototype.ctype="common-button-send",_.apply(_.ns(e),{Button:n,StandardButton:i,SmallButton:o,ToolButton:r,ToolButtonClose:s,ToolButtonCloseWithChar:a,ToolButtonCloseWithImage:l,ToolButtonUnpin:c,ToolButtonPin:u,ToolButtonMinimize:p,MsButton:d,CommonButton:h,PanelToolButton:f,CallButton:g,RatingButton:m,LinklikeButton:y,ChatSendButton:v,FunctionalButton:C,CallGeneratorMainButton:b,LeadRequestFormButton:w})}(window,"uLiB.cmp"),function(t,e){function n(t){this.addCls("menu"),this.autoEl={tag:"div"},this.zIndex=3,this.renderTo=t.o&&t.o.renderTo?t.o.renderTo:"body",this.trackClick=!0,this.trackOwnEvents=!0,n.superclass.constructor.apply(this,arguments),this.show(!1),this.renderItems()}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=i.cmp.MsButton,a=i.cmp.Button;uLiB.$;o.extend(n,r),n.prototype.ctype="menu",n.prototype.menuItemCls="menu-item",n.prototype.buildItem=function(t){return o.isinstance(t,a)?(t.addCls(this.menuItemCls),t):new s(o.apply({cls:this.menuItemCls,onClick:o.bind(this._onItemClick,this)},t))},n.prototype.showAt=function(t,e){this.getEl().anchor(t,e,!0),this.show(!0)},n.prototype._onClick=function(t,e,n,i,o,r){this.show(!1),this.button.changeState("off")},n.prototype._onItemClick=function(t){this.onItemClick(t,t.action)},n.prototype.onItemClick=function(t,e){},n.prototype.getItem=function(t){for(var e,n=this.items,i=0;e=n[i];i++)if(e.action===t)return e;return null},o.apply(o.ns(e),{Menu:n})}(window,"uLiB.cmp"),function(t,e){function n(t){this.is_preview=t.is_preview,this.addCls("panel"),this.addCls(this.ctype),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=uLiB.$,s=i.el.Div;o.extend(n,"uLiB.cmp.Component"),n.prototype.ctype="panel",n.prototype.respectBannerPlace=!0,n.prototype.titleCls="panel-title",n.prototype.titleIconCls="panel-title-icon",n.prototype.toolsCls="panel-tools",n.prototype.headerCls="panel-title",n.prototype.bodyCls="panel-body",n.prototype.buttonsCls="panel-buttons",n.prototype.html="<div/>",n.prototype.title=null,n.prototype.tools=null,n.prototype.subtitle=null,n.prototype.items=null,n.prototype.buttons=null,n.prototype.footer=null,n.prototype.afterRender=function(){n.superclass.afterRender.apply(this,arguments),this.title&&(this.titleEl=new s({cls:this.titleCls,text:this.title,renderTo:this.getEl()}),this.titleIconCls!=n.prototype.titleIconCls&&(this.titleIconCls=[n.prototype.titleIconCls,this.titleIconCls].join(" ")),this.titleEl.prepend(new s({cls:this.titleIconCls}))),this.subtitleEl=this._renderElement("subtitle"),this._renderContainer(["tools","items","buttons"]),this.footerEl=this._renderElement("footer")},n.prototype._renderElement=function(t){var e;r.isPlainObject(this[t])?e=new s(this[t]):this[t]instanceof r?e=this[t]:o.isString(this[t])&&(e=r(this[t])),e&&(e.addClass(o.getCssSelector("panel-"+t,!0)),this.getEl().append(e))},n.prototype._renderContainer=function(t,e){if(o.isArray(t))for(var n,i=0;n=t[i];i++)o.isString(n)?this._renderContainer(n):this._renderContainer(n.name,n.opts);else{var a=this[t],l={tools:"tools",items:"body",buttons:"buttons"}[t],c=l+"El",u=[];if(a){this.initialItems=this.initialItems||{},this.initialItems[t]=a,this[c]||(this[c]=new s({cls:this[l+"Cls"]}));for(var p,i=0;p=a[i];i++)o.isString(p)?u.push(r(p).appendTo(this[c])):o.isObject(p)&&p.__class?u.push(new p.__class(o.apply({renderTo:this[c]},p))):o.isInstance(p,"uLiB.cmp.Component")?(u.push(p),this[c].append(p.getEl())):o.isFunction(p)?u.push(new p(o.apply({renderTo:this[c]},e||{}))):(u.push(p),this[c].append(p));this[t]=u,this[c].appendTo(this.getEl())}}},n.prototype._showModal=function(t){var e=o.ensure$(this.targetEl),n=this;if(t){this.hide?this.hide():this.show(!1);!this.is_preview&&o.maskElement(e,this.isMaskPositionFixed,n.getEl());n.addCls("form-panel-fixed"),n.getEl().center(e.is("body")?void 0:this.is_preview?o.ensure$("body"):e,"hv",!0).css("z-index",o.comagicTopZIndex()+2),setTimeout(function(){n.getEl().show()},100)}else this.getEl().hide(),o.unmaskElement(e)},o.apply(o.ns(e),{Panel:n})}(window,"uLiB.cmp"),function(t,e){function n(t){this.addCls("file-upload"),n.superclass.constructor.apply(this,arguments);var e=this.getEl().find("input[type=file]");this.validExtensions?e.attr("accept","."+this.validExtensions.join(",.")):e.removeAttr("accept"),e.fileupload({action:this.action||"/upload/",onSubmit:this.onSubmit,onReceive:this.onReceive,onUnsupportedFileExtension:this.onUnsupportedFileExtension,validExtensions:this.validExtensions,acceptCharset:this.acceptCharset||"utf-8"}),this.getEl().mousemove(function(t){var e=s(this).offset(),n=e.top,i=s(this).find("input"),o=i.width();i.css({left:t.pageX-(o-30),top:t.pageY-n-10})})}var i=t.uLiB,o=i.util,r=i.cmp.Button,s=uLiB.$;o.extend(n,r),n.prototype.ctype="file-upload",n.prototype.html='<a tabindex="0">{text}<input type="file" name="{id}" id="{id}-file-upload"/></a>',n.prototype.onSubmit=function(t){console.log("onSubmit",arguments)},n.prototype.onReceive=function(t){var e=JSON.stringify(t);console.log("onReceive",e,arguments)},n.prototype.onUnsupportedFileExtension=function(t,e){console.log("onUnsupportedFileExtension",arguments)},n.prototype.validExtensions=null,n.prototype.setUploadUrl=function(t){this.getEl().find("form").attr("action",t)},o.apply(o.ns(e),{FileUpload:n})}(window,"uLiB.cmp"),function(t,e){function n(t){this.o=t,this.addCls("form-panel"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB.util;t.uLiB.form.Form,uLiB.$;i.extend(n,"uLiB.cmp.Panel"),i.mixIn(n,"uLiB.form.Form","Form"),n.prototype.destroyCssLink=function(){i.removeCssSkinLink(this.o)},i.apply(i.ns(e),{FormPanel:n})}(window,"uLiB.cmp"),function(t,e){function n(e){var i=this.targetEl||(o.isInstance(e.target,"uLiB.cmp.Component")?e.target.getEl():e.target);i=o.ensure$(i),this.renderTo="body",this.trackClick=!0,n.superclass.constructor.apply(this,arguments),this.show(!1),t.setTimeout(o.bind(function(){!e.is_preview&&this._showModal(!0)},this),100)}var i=t.uLiB,o=i.util,r=i.cmp.FormPanel,s=i.cmp.ToolButtonClose;uLiB.$;o.extend(n,r),n.prototype.respectBannerPlace=!1,n.prototype.ctype="modal-panel",n.prototype.isModal=!0,n.prototype.tools=[s],n.prototype.onDestroy=function(){n.superclass.onDestroy&&n.superclass.onDestroy.apply(this,arguments),o.unmaskElement(this.targetEl)},o.apply(o.ns(e),{ModalPanel:n})}(window,"uLiB.cmp"),function(t,e){function n(e){this.renderTo="body","flat"==e.banner_skin&&this.addCls({info:"popup-message-panel-info",error:"popup-message-panel-error"}[e.type]),this.ttl=2e3,this.hidingDuration=400,n.superclass.constructor.call(this,e),!e.doNotHide&&t.setTimeout(o.bind(this.onTtlExpired,this),this.ttl),this.getEl().css("z-index",o.comagicTopZIndex()+1)}var i=t.uLiB,o=i.util,r=i.cmp.Panel;uLiB.$;o.extend(n,r),n.prototype.ctype="popup-message",n.prototype.respectBannerPlace=!0,n.prototype.onTtlExpired=function(){this.getEl().hide(this.hidingDuration,o.bind(function(){this.afterClose&&this.afterClose(this),this.destroy()},this))},o.apply(o.ns(e),{PopupMessagePanel:n})}(window,"uLiB.cmp"),function(t,e){function n(t){}function i(){i.superclass.constructor.apply(this,arguments),this.name="notempty",this.errorMessage="Необходимо заполнить"}function o(t){d.apply(this,t),i.superclass.constructor.apply(this,arguments),this.errorMessage="Поле содержит недопустимые символы"}function r(){r.superclass.constructor.apply(this,arguments),this.name="number",this.regexp=/^\d+$/,this.errorMessage="Поле должно содержать только цифры"}function s(){s.superclass.constructor.apply(this,arguments),this.name="email",this.noErrorMessage=!d.C.IS_TOUCH_DEVICE,this.regexp=d.C.RE_EMAIL,this.errorMessage="Пожалуйста, введите адрес электронной почты"}function a(){a.superclass.constructor.apply(this,arguments),this.name="phone",this.noErrorMessage=!d.C.IS_TOUCH_DEVICE,this.regexp=/^\d{11}$/,this.errorMessage="Поле должно содержать 11 цифр"}function l(){l.superclass.constructor.apply(this,arguments),this.name="mobilephone",this.noErrorMessage=!0,this.regexp=/^\d{11}$/}function c(t){this.name="maxlength"}function u(t){this.name="minlength"}var p=t.uLiB,d=p.util;uLiB.$;n.prototype.errorMessage="",n.prototype.isValid=function(t,e){return!0},n.prototype.validate=function(e){if(e.allowBlank&&e.getValue()===t.uLiB.field.Field.prototype.emptyValue)return!0;var n=this.isValid(e.getValidationValue(),e);return e.markInvalid&&e.setError(n?null:this.errorMessage,this.name,this),n},d.extend(i,n),i.prototype.isValid=function(e,n){return e!==t.uLiB.field.Field.prototype.emptyValue},d.extend(o,n),o.prototype.isValid=function(t,e){return this.regexp.test(t)},d.extend(r,o),d.extend(s,o),d.extend(a,o),d.extend(l,o),d.extend(c,n),c.prototype.isValid=function(t,e){return t.length<=e.maxLength},c.prototype.errorMessage=function(t,e){return d.sformat("Максимальная длина: {0}",e.maxLength)},d.extend(u,n),u.prototype.isValid=function(t,e){return t.length>=e.minLength},u.prototype.errorMessage=function(t,e){return d.sformat("Минимальная длина: {0}",e.minLength)},d.apply(d.ns(e),{NotEmptyFieldValidator:i,RegexpFieldValidator:o,NumberFieldValidator:r,EmailFieldValidator:s,PhoneFieldValidator:a,MaxLengthFieldValidator:c,MinLengthFieldValidator:u,MobilePhoneFieldValidator:l})}(window,"uLiB.field"),function(t,e){function n(t){t=t||{},this.addCls("field"),this._validators=[],t.validators&&(this._validators=this._validators.concat(t.validators)),this.fieldContainerCls="field-container",this.fieldWrapperCls="field-wrapper",this.fieldInnerErrorCls="field-inner-error",this.fieldErrorNoMessageCls="field-error-no-message",this.errorIconCls="error-icon",this.value=t.value||"",n.superclass.constructor.apply(this,arguments),this.extraFieldWrapperCls&&c.addCls(this.wrapperEl,this.extraFieldWrapperCls)}function i(t){this.autoEl={tag:"input",maxlength:1e3},i.superclass.constructor.apply(this,arguments)}function o(t){o.superclass.constructor.apply(this,arguments),this.addValidator("number")}function r(t){this.mask="+7 (999) 999-99-99",this.valueFilterCharsRegexp=/[^\d]/g,r.superclass.constructor.apply(this,arguments),!t.validators&&this.addValidator("phone"),"function"==u.type(u.fn.mask)&&this.getInputEl().mask(this.mask),this.getInputEl().attr("type","tel")}function s(t){this._captchaUrlProp="url",this._captchaKeyProp="key",this.allowBlank=!1,this.addCls("captcha-field"),this.tooltipGravity="nw",this.tooltipOptions={offsetH:-41},s.superclass.constructor.apply(this,arguments),this.getInputEl().attr("type","number")}function a(t){this.autoEl={tag:"textarea",maxlength:1e3},a.superclass.constructor.apply(this,arguments)}var l=t.uLiB,c=l.util,u=uLiB.$,p=l.el.Element,d=l.cmp.Component;c.extend(n,d),n.prototype.ctype="field",n.prototype.extraFieldWrapperCls=null,n.prototype.labelSeparator="",n.prototype.mandatoryMarkSymbol="",n.prototype.labelWidth=105,n.prototype.valueFilterCharsRegexp=null,n.prototype.stripCharsRegexp=null,n.prototype.allowBlank=!0,n.prototype.markInvalid=!0,n.prototype.emptyValue="",n.prototype.tooltipType="title",n.prototype.blankImgSrc=c.C.SRC_IMG_BLANK,n.prototype.__validators={notempty:new uLiB.field.NotEmptyFieldValidator,number:new uLiB.field.NumberFieldValidator,email:new uLiB.field.EmailFieldValidator,phone:new uLiB.field.PhoneFieldValidator,maxlength:new uLiB.field.MaxLengthFieldValidator,minlength:new uLiB.field.MinLengthFieldValidator,mobilephone:new uLiB.field.MobilePhoneFieldValidator},n.prototype.initComponent=function(){n.superclass.initComponent.apply(this,arguments),this.allowBlank||this.addValidator("notempty",0),void 0!==this.maxLength&&this.addValidator("maxlength"),void 0!==this.minLength&&this.addValidator("minlength")},n.prototype.addValidator=function(t,e){void 0!==e?this._validators.splice(e,0,t):this._validators.push(t)},n.prototype._getTooltipEl=function(){return this.getInputEl()},n.prototype.beforeRender=function(){n.superclass.beforeRender.apply(this,arguments),this.mandatoryMark=this.allowBlank?"":n.prototype.mandatoryMarkSymbol},n.prototype.getMarkRequired=function(){return this.markRequired&&!this.allowBlank?"*":""},n.prototype.render=function(){var t=this.renderTo,e=this.width,i=this.style;delete this.renderTo,delete this.width,delete this.style,n.superclass.render.apply(this,arguments);var o=u(c.sformat('<div class="{fieldContainerCls}">'+(this.label?'<label for="{id}">{label}{mandatoryMark}{labelSeparator}</label>':"")+'<div class="{fieldWrapperCls}"><img class="{errorIconCls}" src="{blankImgSrc}"></div></div>',this));t&&o.appendTo(t),this.inputEl=this.getEl(),this.wrapperEl=o.find("."+c.getCssSelector(this.fieldWrapperCls,!0)),this.wrapperEl.append(this.inputEl),this.el=o,void 0!==e&&this.el.width(e),void 0!==i&&this.el.css(i),this.value&&this.setValue(this.value),this.placeholder&&this.getInputEl().watermark(this.placeholder+this.getMarkRequired(),{className:c.getCssSelector("watermark",!0)})},n.prototype.initEvents=function(){n.superclass.initEvents.apply(this,arguments);var t=this.getInputEl();t&&(t.on("keyup",c.bind(this._doProcessValue,this)),t.on("keydown",c.bind(this._onKeydownCheckValue,this)),t.on("blur",c.bind(this._doProcessValue,this)),"rich"===this.tooltipType&&t.on("focus",c.bind(this._onInputFocus,this)))},n.prototype._onInputFocus=function(t){this.setError(!1)},n.prototype._onKeydownCheckValue=function(t){var e=this.getEl(),n=this.getInputEl();13!==t.keyCode&&this._clearError(n,e)},n.prototype._clearError=function(t,e){t.addClass(c.getCssSelector(this.fieldErrorNoMessageCls)),t.removeClass(c.getCssSelector(c.C.CSS_FIELD_ERROR,!0)),e.removeClass(c.getCssSelector(c.C.CSS_FIELD_CONTAINER_ERROR,!0))},n.prototype._doProcessValue=function(t){var e=this,n=this.getInputEl(),i=function(){var t=n.val();e.lastErrorMessage!==t&&(e.value=t,e.stripCharsRegexp&&(e.value=n.val(n.val().replace(e.stripCharsRegexp,""))))};window.setTimeout(i,100)},n.prototype.getInputEl=function(){return this.inputEl||this.getEl()},n.prototype._setRawValue=function(t){this.getInputEl().val(t)},n.prototype._setValue=function(){this._setRawValue(this.value)},n.prototype.setValue=function(t){this.value=t,this.getInputEl()&&this._setValue()},n.prototype.getValue=function(){var t;return t=this.mask?this.getInputEl().val():this.value,this.valueFilterCharsRegexp&&(t=t.replace(this.valueFilterCharsRegexp,"")),t},n.prototype.getValidationValue=function(){return this.getValue()},n.prototype.isValid=function(){for(var t,e=0;t=this._validators[e];e++)if(!n.prototype.__validators[t].validate(this))return!1;return!0},n.prototype.setError=function(t,e,n){var i=this[e+"Text"];t&&i&&(t=i),t&&c.isFunction(t)&&(t=t.call(this,this.getValidationValue(),this)),t&&n&&!n.noErrorMessage&&(this.lastErrorMessage=t,this._setTooltip(t||null));var o=this.getEl(),r=this.getInputEl();t?(n.noErrorMessage&&r.addClass(c.getCssSelector(this.fieldErrorNoMessageCls,!0)),r.addClass(c.getCssSelector(c.C.CSS_FIELD_ERROR,!0)),o.addClass(c.getCssSelector(c.C.CSS_FIELD_CONTAINER_ERROR,!0))):(this._setTooltip(),this._clearError(r,o))},n.prototype._setRichTooltip=function(t,e){if(this.renderTooltipInside){var i=this.getInputEl(),o=c.getCssSelector(this.fieldInnerErrorCls,!0);t?(this._setRawValue(t),i.addClass(o)):(this._setRawValue(this.value),i.removeClass(o))}else n.superclass._setRichTooltip.apply(this,arguments)},n.prototype._setDivTooltip=function(t){t?(this.tooltipEl&&this.tooltipEl.remove(),this.tooltipEl=new p({tag:"div",cls:"error-tooltip",text:t,renderTo:this.getInnerEl(this.fieldWrapperCls)}),c.getSizeByVminRatio&&this.tooltipEl.css(c.getSizeByVminRatio({"font-size":3.6,"margin-top":2.2}))):this.tooltipEl&&this.tooltipEl.remove()},c.extend(i,n),c.extend(o,i),c.extend(r,o),u.mask&&(u.mask.autoclear=!1),c.extend(s,i),s.prototype.autoRefresh=!1,s.prototype.hasRefreshButton=!1,s.prototype.imagePosition="top",s.prototype.extraFieldWrapperCls="captcha-field-wrapper",s.prototype.render=function(){s.superclass.render.apply(this,arguments),this.imgEl=new p({tag:"img",cls:"captcha-field-image"}),this.wrapperEl["top"===this.imagePosition?"prepend":"append"](this.imgEl),this.hasRefreshButton&&(this.refreshEl=new p({tag:"div",cls:"captcha-field-refresh-button"}),this.refreshEl.click(c.bind(this.onRefreshButtonClick,this)),this.wrapperEl.prepend(this.refreshEl)),this.autoRefresh&&this.refreshCaptcha()},s.prototype.getCaptchaProvider=function(){var t=this;return this.is_preview?{get_captcha:function(e){var n={};n[t._captchaUrlProp]="http://ksv.dev.ulab.ru/captcha.jpg",n[t._captchaKeyProp]="SDAFdf3f2fqw3fw3efdsAFSDAf23",e(n)}}:window.Comagic.Captcha},s.prototype.refreshCaptcha=function(){this.setValue(n.prototype.emptyValue),this.getCaptchaProvider().get_captcha(c.bind(this._onCaptcha,this),this.getCaptchaParams())},s.prototype._onCaptcha=function(t){this._setCaptchaUrl(t[this._captchaUrlProp]),this.captchaKey=t[this._captchaKeyProp]},s.prototype._setCaptchaUrl=function(t){this.imgEl.attr("src",t)},s.prototype.getValidationValue=function(){return s.superclass.getValue.apply(this)},s.prototype.getValue=function(){return{captcha_key:this.captchaKey,captcha_val:s.superclass.getValue.apply(this)}},s.prototype.onRefreshButtonClick=function(t){this.refreshCaptcha()},s.prototype.getCaptchaParams=function(){return this.captchaBackgroundColor?{bg:this.captchaBackgroundColor}:{}},c.extend(a,n),a.prototype.applySlimScroll=function(t,e){c.isBoolean(t)&&(e=t),this.slimscrollApplied&&!e||(this.getInputEl().slimscroll({height:t||"auto"}),this.slimscrollApplied=!0)},c.apply(c.ns(e),{Field:n,TextField:i,NumberField:o,PhoneField:r,CaptchaField:s,TextAreaField:a})}(window,"uLiB.field"),function(t,e){function n(e){t.setTimeout(o.bind(this.onTtlExpired,this),this.ttl),this.addCls("popup-message-panel"),e.cls&&this.addCls(e.cls);var i=e.code,r=o.apply({},this.codeToText[i]),s=i.charAt(0);if(o.apply(this,r),this.processCode(i),r.tpl&&(r.text=this.processTpl()),this.text=r.text||"",this.zIndex=o.comagicTopZIndex(),this.addCls(this.codeTypeToCls[s]),this.respectBannerPlace=!1,n.superclass.constructor.apply(this,arguments),this.show(!0),o.C.IS_PHONE){var a=this;this.popupMessageIntervalID=setInterval(function(){a.ownerComponent.opts.banner_place.split("_").indexOf("top")===-1?a.getEl().css("top",parseInt(a.ownerComponent.getEl().css("top"),10)-a.getEl().height()-a.ownerComponentPadding||a.ownerComponent.getEl().offset().top-a.getEl().height()-a.ownerComponentPadding):a.getEl().css("top",parseInt(a.ownerComponent.getEl().css("top"),10)+a.ownerComponent.getEl().height()+a.ownerComponentPadding||a.ownerComponent.getEl().offset().top+a.ownerComponent.getEl().height()+a.ownerComponentPadding),a.getEl().css("left",parseInt(a.ownerComponent.getEl().css("left"),10)||a.ownerComponent.getEl().offset().left)},100)}}var i=t.uLiB,o=i.util;uLiB.$;o.extend(n,"uLiB.cmp.Component"),n.prototype.ctype="popup-message-panel",n.prototype.renderHidden=!0,n.prototype.ownerComponentPadding=10,n.prototype.animationEnabled=!0,n.prototype.animationKey="PopupMessagePanel",n.prototype.html="<div><div><h1>{title}</h1><p>{text}</p></div></div>",n.prototype.ttl=2e3,n.prototype.codeTypeToCls={0:"popup-message-panel-success",1:"popup-message-panel-failure",9:"popup-message-panel-system"},n.prototype.codeToText={"010":{title:"Чат отправлен",tpl:"на почту {email}"},110:{title:"Отправка не удалась"},"020":{title:"Ожидайте звонка",text:"Мы позвоним в течение минуты"},121:{title:"Неверно введен код"},122:{title:"Система не отвечает",text:"В данный момент звонок невозможен"},124:{title:"Система не отвечает",text:"Повторите попытку через минуту"},"030":{title:"Заявка принята",text:"Спасибо за обращение"}},n.prototype.respectBannerPlace=!0,n.prototype.onTtlExpired=function(){var t=this;clearInterval(this.popupMessageIntervalID),this.show(!1,{callback:function(){t.ownerComponent.showToolButtons&&t.ownerComponent.showToolButtons(!0),t.afterClose&&t.afterClose(t),t.destroy()}})},n.prototype.processTpl=function(){return this.text=o.sformat(this.tpl,this)},n.prototype.processCode=function(t){"010"===t&&(this.email=i.cmp.ComponentManager.getBy(ComagicWidget.widget.consultant.form.MainConsultantPanel).getEmailToSendChatTo())},n.prototype.show=function(t){if(this.calculateShowStrategy(),"in-replace"===this.showStrategy)this.ownerComponent.show(!1);else{this.getEl().css({position:o.C.IS_TOUCH_DEVICE?this.ownerComponent.getEl().css("position"):"absolute"}),o.removeCls(this.getEl(),["top","bottom","left","right"]);var e=this.ownerComponentPadding,i=this.ownerComponent.getEl(),r=i.find(o.getCssSelector(this.ownerComponent.containerCls,!0,!0));this.getEl().anchor(r.length?r:i,"above"===this.showStrategy?"tc-bc":"bc-tc",{y:"above"===this.showStrategy?this.ownerComponent.isLeadForm?-10:-11:e})}n.superclass.show.apply(this,arguments)},n.prototype.calculateShowStrategy=function(){var t=uLiB.$(window).height(),e=this.getEl().height(),n=this.ownerComponent&&this.ownerComponent.getEl().outerHeight(!0),i=this.ownerComponentPadding,o=t-n,r=this.banner_place;return r.indexOf("middle")!=-1&&(o/=2),o<e+i?void(this.showStrategy="in-replace"):void(this.showStrategy=r.indexOf("top")!=-1?"below":"above")},o.apply(o.ns(e),{PopupMessagePanel:n})}(window,"ComagicWidget.widget.common.cmp"),function(t,e){var n=t.uLiB,i=n.util,o=(uLiB.$,{show:function(t,e,n,o){return new ComagicWidget.widget.common.cmp.PopupMessagePanel(i.apply({code:e.code,ownerComponent:t,renderTo:"body",afterClose:function(t){t.ownerComponent.deferredClearOnSubmit&&t.ownerComponent.clearValues(),t.ownerComponent.setSendBtnDisabled&&t.ownerComponent.setSendBtnDisabled(!1),n&&n(t.ownerComponent,t)}},o||t.o))},getCallback:function(t,e){var n=this;return function(i){i.response&&(i=JSON.parse(i.response)),i.success&&(t.hasBeenSubmitted=!0),n.show(t,i.result,function(){e(i,t,n)})}}});i.apply(i.ns(e),{PopupMessageManager:o})}(window,"ComagicWidget.widget.common.cmp"),function(t,e){function n(t){this.addCls("common-form-panel"),t.is_preview&&this.addCls("preview"),t.scenario_id&&this.addCls("leadgen-preview"),t.is_preview||(this.zIndex=1),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.el.Element,s=(i.cmp.Component,i.form.Form,i.cmp.PanelToolButton),a=i.cmp.CommonButton,l=uLiB.$;o.extend(n,"uLiB.cmp.Component"),o.mixIn(n,"uLiB.form.Form","Form"),n.prototype.ctype=null,n.prototype.renderHidden=!0,n.prototype.trackClick=!0,n.prototype.respectBannerPlace=!0,n.prototype.disableSendBtnOnSubmit=!0,n.prototype.toolsCls="common-form-panel-tools",n.prototype.headerCls="common-form-panel-header",n.prototype.containerCls="common-form-panel-container",n.prototype.itemsCls="common-form-panel-items",n.prototype.buttonsCls="common-form-panel-buttons",n.prototype.footerCls="common-form-panel-footer",n.prototype.resizableCls="common-form-panel-resizable",n.prototype.blankImgSrc=o.C.SRC_IMG_BLANK,n.prototype.animationEnabled=!0,n.prototype.html='<div><div class="{toolsCls}"></div><div class="{containerCls}"><div class="{headerCls}"><img src="{blankImgSrc}"><div>{title}</div></div><div class="{itemsCls}"></div><div class="{buttonsCls}"></div><div class="{footerCls}"></div></div></div>',n.prototype.animationKey="CommonFormPanel",n.prototype.ftype=null,n.prototype.defaultTooltipType="rich",n.prototype.elementsToRender=["tools","header","items","buttons","footer"],n.prototype.tools=[],n.prototype.states=[{}],n.prototype.isResize=!1,n.prototype.minFormPanelHeight=250,n.prototype.resizedFormMargin=40,n.prototype.afterRender=function(){this.addCls(this.ftype),n.superclass.afterRender.apply(this,arguments),this.renderPanelElement(this.elementsToRender)},n.prototype.getChildEl=function(t){return t=0!=t.indexOf(".")&&0!=t.indexOf("#")?"."+t:t,this.getEl().find(o.getCssSelector(t))},n.prototype.renderPanelElement=function(t){if(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),"array"===uLiB.$.type(t))for(var e,n=0;e=t[n];n++)this.renderPanelElement(e);else{var i=this[t+"Ct"]=this.getChildEl(this[t+"Cls"]),r=this["render"+o.camelize(t)];i&&r&&r.apply(this)}},n.prototype.renderTools=function(){for(var t,e,n=[],i={close:"Закрыть",minimize:"Свернуть",unpin:"Открыть в новом окне"},o=0;t=this.tools[o];o++)e="string"==typeof t?{action:t,title:i[t]||""}:t,n.push(new s({action:e.action,title:e.title||i[e.action]||"",renderTo:this.toolsCt}));this.tools=n},n.prototype.getToolBtn=function(t){for(var e,n=this.tools,i=0;e=n[i];i++)if(e.action===t)return e;return null},n.prototype.renderHeader=function(){},n.prototype.renderItems=function(){var t,e=[];this.items.length<4&&o.addCls(this.itemsCt,"common-form-panel-items-few");for(var n,i=0;n=this.items[i];i++)"string"==l.type(n)?t=l(n).appendTo(this.itemsCt):"object"==l.type(n)&&n.__class?t=new n.__class(o.apply({renderTo:this.itemsCt,tooltipType:this.defaultTooltipType},n)):o.isInstance(n,"uLiB.cmp.Component")?this.itemsCt.append(t=n.getEl()):this.itemsCt.append(t=n),e.push(t);this.items=e},n.prototype.getItem=function(t){"string"===uLiB.$.type(t)&&(t=o.getObjByName(t));for(var e,n=0;e=this.items[n];n++)if("function"===uLiB.$.type(t)&&e instanceof t)return e;return null},n.prototype.renderButtons=function(){this.sendBtn=new a({text:this.buttonText,action:"send",renderTo:this.buttonsCt})},n.prototype.renderFooter=function(){this.o.banner_branding_text&&this.o.banner_branding_url&&!o.C.IS_TOUCH_DEVICE&&new r({tag:"a",href:this.o.banner_branding_url,renderTo:this.footerCt,target:"_blank",text:this.o.banner_branding_text})},n.prototype.show=function(t){if(n.superclass.show.apply(this,arguments),t){for(var e,i=this.items,r=this.getEl(),s=0;e=i[s];s++)e.applySlimScroll&&e.applySlimScroll();this.hasGlobalState&&this.restorePosition(),o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"auto"===r.css("left")&&parseInt(r.css("right"))&&(this.globalState.moveToRightBorder=!0):"auto"===r.css("top")&&parseInt(r.css("bottom"))&&(this.globalState.moveToBottomBorder=!0)}else uLiB.$(o.getCssSelector("tipsy",!0,!0)).remove(),this.clearInvalid&&this.clearInvalid()},n.prototype.__onClick=function(){o.log("CommonFormPanel.prototype.__onClick",arguments)},n.prototype.setSendBtnDisabled=function(t){this.sendBtn&&this.sendBtn.setDisabled(t)},n.prototype.showToolButtons=function(t,e){this.getInnerEl("common-form-panel-tools").css({opacity:t?1:0},{duration:0})},n.prototype.getDraggableOpts=function(){var t={within:window,handle:o.getCssSelector("common-form-panel-header",!0,!0),dragEnd:o.bind(this.onDragEnd,this)};if(this.respectBannerPlace){var e=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";t.axis=e,"x"===e?t.withinPaddingH=30:t.withinPaddingV=20}return t},n.prototype.saveState=function(){var t=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";this.state=this.state||{},this.state.css=this.state.css||{},this.respectBannerPlace&&!o.C.IS_TOUCH_DEVICE&&("x"===t?this.state.css.left=this.getEl().offset().left||this.globalState.css.left:this.state.css.top=this.getEl().offset().top||this.globalState.css.top),this.globalState=o.apply(this.globalState,this.state),n.superclass.saveState.apply(this,arguments)},n.prototype.restoreState=function(){if(n.superclass.restoreState.apply(this,arguments),this.hasGlobalState&&(this.state.css=this.globalState.css,this.state.isAlreadyRated=this.globalState.isAlreadyRated),"mobile"!==this.banner_skin&&this.getEl()&&this.state.css&&Object.keys(this.state.css).length){var t=o.arrayIsContain((this.o.banner_place||"").split("_"),["bottom","top"])?"x":"y";"x"===t&&this.getEl().css("left",o.elementWidth()>=this.state.css.left?this.state.css.left:o.elementWidth()/2),"x"===t&&this.state.css.left&&this.hasCls("right")&&this.removeCls("right"),"x"===t&&this.state.css.left&&this.hasCls("left")&&this.removeCls("left"),"y"===t&&this.getEl().css("top",o.elementHeight()>=this.state.css.top?this.state.css.top:20)}},n.prototype.onDragEnd=function(){this.state.moveToRightBorder=o.arrayIsContain(this.o.banner_place.split("_"),["bottom","top"])&&o.elementWidth()-(parseInt(this.getEl().css("left"))+o.elementWidth(this.getEl()))<60,this.state.moveToBottomBorder=!o.arrayIsContain(this.o.banner_place.split("_"),["bottom","top"])&&o.elementHeight()-(parseInt(this.getEl().css("top"))+o.elementHeight(this.getEl()))<20,this.savePosition()},n.prototype._onResize=function(){"consultant"===this.ctype&&o.elementHeight()<=this.getEl().height()&&this.setHeight(o.elementHeight()-20),this._adjustPosition()},n.prototype.setHeight=function(t){if(!(t<=this.minFormPanelHeight)){var e=this.getEl().height()-this.getChildEl(this.containerCls).height();o.elementHeight()-t-e<this.resizedFormMargin||(this.getEl().height(t+e),this.getChildEl(this.containerCls).height(t),this._adjustPosition(),this.adjustLogHeight());
}},n.prototype.onResizeStart=function(){this.isResize=!0,document.body.style.cursor="s-resize"},n.prototype.onResizeEnd=function(){this.isResize&&(this.isResize=!1,this.startHeight=null,this.startCurY=null,document.body.style.cursor="default")},n.prototype.onResizeMove=function(t){if(this.isResize){var e;this.startHeight=this.startHeight||this.getChildEl(this.containerCls).height(),this.startCurY=this.startCurY||t.clientY,e="bottom"!==this.banner_place.split("_")[0]?this.startHeight+(t.clientY-this.startCurY):this.startHeight-(t.clientY-this.startCurY),o.elementHeight()-t.clientY>this.resizedFormMargin&&this.setHeight(e+1)}},n.prototype._getWidth=function(){var t=n.superclass._getWidth.apply(this,arguments);return this.o.banner_place.split("_").indexOf("top")!==-1&&(t+=o.getScrollWidth()),t},o.apply(o.ns(e),{CommonFormPanel:n})}(window,"ComagicWidget.widget.common.form"),function(t,e){function n(t,e){this.s=this.s||e,this.s.message=this.s.message.replace(/\n/g,"<br />"),this.title=this.s.message,this.ftype=this.ctype,n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.field.TextField,s=i.field.TextAreaField,a=i.field.PhoneField,l=ComagicWidget.widget.common.form.CommonFormPanel;uLiB.$;o.extend(n,l),n.prototype.ctype=null,n.prototype.tools=["close"],n.prototype.markRequiredFields=!1,n.prototype.fieldsMap={name:{__class:r,placeholder:"Как вас зовут",notemptyText:"Укажите имя",renderTooltipInside:!0,maxLength:100},phone:{__class:a,placeholder:"Телефон для связи",renderTooltipInside:!0,notemptyText:"Укажите телефон"},email:{__class:r,placeholder:"E-mail для ответа",validators:["email"],renderTooltipInside:!0,notemptyText:"Укажите ваш email",maxLength:100},message:{__class:s,placeholder:"Ваш вопрос",renderTooltipInside:!0,maxLength:1e3}},n.prototype.renderItems=function(){this.items=this.items||[];for(var t in this.fieldsMap)this.fieldsMap.hasOwnProperty(t)&&this.isItemRequired(t)&&this.items.push(o.apply({name:t,allowBlank:"required"!=this.getItemRequirement(t),markRequired:this.markRequiredFields},this.fieldsMap[t]));n.superclass.renderItems.apply(this,arguments)},n.prototype.isItemRequired=function(t){var e=this.getItemRequirement(t);return e&&"unused"!==e},n.prototype.getItemRequirement=function(t){var e=this.s["require_"+t]||this.s["consultant_require_"+t];return void 0===e&&(e=this["require_"+t]||this["consultant_require_"+t]),e},o.apply(o.ns(e),{DynamicFormPanel:n})}(window,"ComagicWidget.widget.common.form"),function(t,e){function n(t){this.cls="way-item",this.ctype=t.ctype,this.text=t.title,n.superclass.constructor.apply(this,arguments),this.addCls(this.ctype)}function i(t){i.superclass.constructor.apply(this,arguments)}function o(){this.autoEl={tag:"div",defaults:{unselectable:"on"},children:[{tag:"div",cls:"slider-way-item-icon",unselectable:"on"},{tag:"div",cls:"slider-way-item-text",unselectable:"on"}]},o.superclass.constructor.apply(this,arguments)}function r(){this.autoEl={tag:"div",children:[{tag:"div",cls:"buttons-way-item-inner"}]},r.superclass.constructor.apply(this,arguments)}var s=t.uLiB,a=s.util,l=s.el.Div,c=s.cmp.Component;uLiB.$;a.extend(n,c),n.prototype.html="<div></div>",n.prototype.getTextEl=function(){return this.getEl()},n.prototype.setText=function(t){var e=this.getTextEl();e&&e.text(t),this.setTooltip(t)},n.prototype.afterRender=function(){n.superclass.afterRender.apply(this,arguments),this.setText(this.text)},a.extend(i,n),i.prototype.render=function(){this.html=this.isPrimary?n.prototype.html:"<div/>",i.superclass.render.apply(this,arguments),this.isPrimary&&(this.iconEl=new l({cls:"icon",renderTo:this,children:[{tag:"img",src:a.C.SRC_IMG_BLANK}]}),this.textEl=new l({cls:"text",renderTo:this,unselectable:"on"}),this.labelEl=new l({cls:"way-label",renderTo:this,text:this.bannerLabel,unselectable:"on"}))},i.prototype.getTextEl=function(){return this.isPrimary?this.textEl:null},a.extend(o,n),o.prototype.getTextEl=function(){return this.getEl().find(a.getCssSelector(".slider-way-item-text"))},a.extend(r,n),r.prototype.getTextEl=function(){return null},a.apply(a.ns(e),{WayItem:n,BannerWayItem:i,SliderWayItem:o,ButtonsWayItem:r})}(window,"ComagicWidget.widget.consultant.label"),function(t,e){function n(t){this.ctype&&this.connectWayItemClass||o.error('Properties "ctype" and "connectWayItemClass" must be specified'),this.trackClick=!0,this.html="<div/>",this.connectWays=[],this.active=null;var e=this.hasConsultantWayEnabled(t);this.doActivate=e&&this._getConnectWays(t).length>1,this.isConsultantSingleWay=e&&1==this._getConnectWays(t).length,n.superclass.constructor.apply(this,arguments),this.addCls("abstract-label"),this.updateSingleWayItem(),this.is_preview&&this.show(!0)}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=uLiB.$;o.extend(n,r),n.prototype.ctype="label",n.prototype.renderHidden=!0,n.prototype.connectWayItemClass=null,n.prototype.singleWayClsTpl="single-way-{0}",n.prototype.respectBannerPlace=!0,n.prototype.monitorResize=!0,n.prototype.monitorZoom=!1,n.prototype.respectIsBannerDefaultMinimize=!0,n.prototype.animationEnabled=!0,n.prototype.stateful=!0,n.prototype.stateId="label",n.prototype.states=[{}],n.prototype.hasGlobalState=!0,n.prototype.initComponent=function(){n.superclass.initComponent.apply(this,arguments),this.buildInnerElements()},n.prototype.buildInnerElements=function(){},n.prototype.hasConsultantWayEnabled=function(t){return o.hasConnectWayEnabled(t||this.o,o.C.CW_CONSULTANT)},n.prototype.getSingleWayCType=function(){return(this.active!==!1&&this.hasConsultantWayEnabled()?this._getConsultantItem():this._getFirstNonConsultantItem()).ctype},n.prototype._getActiveWaysCount=function(){var t=this._getConnectWays().length;return this.active||!this.hasConsultantWayEnabled()?t:t-1},n.prototype._hasSingleActiveWayCount=function(){return 1===this._getActiveWaysCount()},n.prototype.getSingleWayCls=function(){return 1!==this._getActiveWaysCount()?"":o.sformat(this.singleWayClsTpl,this.getSingleWayCType())},n.prototype.updateSingleWayItem=function(){this.removeCls(o.sformat(this.singleWayClsTpl,""),!0);var t=this.getSingleWayCls();if(this.addCls(t),t){this.addCls(o.sformat(this.singleWayClsTpl,"common"));var e=this.labelCmp.getEl?this.labelCmp.getEl():this.labelCmp;e.attr(o.C.ATTR_COMAGIC_CTYPE,this.getSingleWayCType())}},n.prototype.processConnectWays=function(){for(var t,e=this._getConnectWays(),n=0;t=e[n];n++)this.addConnectWay(t)},n.prototype._getConnectWays=function(t){t=t||this.o;var e=t.available_connect_ways.slice(0),n=e.indexOf(o.C.CW_SITE_PHONE);return t.is_callback_schedule_active||n===-1||e.splice(n,1),e},n.prototype._getPrimaryWayMnemonic=function(){return this.is_callback_schedule_active||this.preferred_connect_way!==o.C.CW_SITE_PHONE?this.preferred_connect_way:this._getConnectWays()[0]},n.prototype.addConnectWay=function(t){var e=this["cw_"+t+"_title"];this.connectWays.push(new this.connectWayItemClass({ctype:t,title:e,isPrimary:t===this._getPrimaryWayMnemonic(),renderTo:this._getWayItemsContainer(t),bannerLabel:this.banner_label}))},n.prototype._getConnectWayItem=function(t){for(var e,n=this.connectWays,i=0;e=n[i];i++){if("string"===s.type(t)&&e.ctype===t)return e;if("function"===s.type(t)&&t(e.ctype))return e}return null},n.prototype._getConsultantItem=function(){return this._getConnectWayItem(o.C.CW_CONSULTANT)},n.prototype._getFirstNonConsultantItem=function(){return this._getConnectWayItem(function(t){return t!=o.C.CW_CONSULTANT})},n.prototype._onActivate=function(){this[this.active?"_onGettingActive":"_onGettingInactive"]()},n.prototype._onGettingInactive=function(){this._getConsultantItem().getEl().remove()},n.prototype._onGettingActive=function(){var t=this._getConsultantItem();t.reRender({renderTo:this._getWayItemsContainer(t)})},n.prototype._getWayItemsContainer=function(t){return null},n.prototype.activate=function(t){if(t!==this.active){var e=null===this.active;if(this.active=t,this.updateSingleWayItem(),this.is_not_showing_unactive_banner||this.isConsultantSingleWay)return void this.show(this.active);e&&this.show(!0),this.doActivate&&this._onActivate()}},n.prototype.show=function(){n.superclass.show.apply(this,arguments),this.hasGlobalState&&this.restorePosition()},o.apply(o.ns(e),{AbstractLabel:n})}(window,"ComagicWidget.widget.consultant.label"),function(t,e){function n(t){n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.el.Element,s=ComagicWidget.widget.consultant.label.BannerWayItem,a=i.cmp.Component,l=ComagicWidget.widget.consultant.label.AbstractLabel;uLiB.$;o.extend(n,l),n.prototype.cls="banner-container",n.prototype.connectWayItemClass=s,n.prototype.expanderClsTpl="expander-{0}",n.prototype.animationKey="Banner",n.prototype.buildInnerElements=function(){this.buildLabelEl(),this.buildExpandedEl()},n.prototype.buildLabelEl=function(){this.labelCmp=new a({html:'<div><img unselectable src="{imgSrc}"><span unselectable>{bannerLabel}</span></div>',cls:"label",parentCmp:this,imgSrc:o.C.SRC_IMG_BLANK,bannerLabel:this.banner_label||""}),this.add(this.labelCmp)},n.prototype.buildExpandedEl=function(){var t="secondaries";this.expandedCmp=new a({cls:"expanded",html:"<div/>",parentCmp:this}),this.expandedCmp.add(new r({cls:t,tag:"div"})),this.respectIsBannerDefaultMinimize?this.is_banner_default_minimize&&this.expandedCmp.getEl().hide():this.expandedCmp.getEl().hide(),this.secondariesEl=this.expandedCmp.getEl().find("div"),this.setSecondariesCls(this._getConnectWays().length-1),this.add(this.expandedCmp),this.expandedCmp.add(new a({cls:"collapser",html:"<div>×</div>",ctype:"collapser",zIndex:1})),this.processConnectWays()},n.prototype.getWaysCount=function(){var t=this._getConnectWays().length;return this.active===!1&&(t-=1),t},n.prototype.setSecondariesCls=function(t){if(this.secondariesEl){void 0===t&&this.doActivate?t=this._getConnectWays().length-(this.active?1:2):void 0!==t||this.doActivate||(t=this._getConnectWays().length-1);for(var e,n=["secondaries-none","secondaries-single","secondaries-couple"],i=0;e=n[i];i++)this.expandedCmp.getEl().removeClass(o.getCssSelector(e,!0));this.expandedCmp.getEl().addClass(o.getCssSelector(n[t],!0))}},n.prototype._onActivate=function(){this.setSecondariesCls(),n.superclass._onActivate.apply(this,arguments)},n.prototype._onGettingInactive=function(){if(n.superclass._onGettingInactive.apply(this,arguments),this._getPrimaryWayMnemonic()==o.C.CW_CONSULTANT){var t=this._getFirstNonConsultantItem();t.getEl().remove(),t.reRender({isPrimary:!0,renderTo:this.expandedCmp})}},n.prototype._onGettingActive=function(){if(n.superclass._onGettingActive.apply(this,arguments),this._getPrimaryWayMnemonic()==o.C.CW_CONSULTANT){var t=(this.getWaysCount(),this._getFirstNonConsultantItem());t.getEl().remove(),t.reRender({isPrimary:!1,renderTo:this.secondariesEl})}},n.prototype._getWayItemsContainer=function(t){var e="string"===uLiB.$.type(t)?t===this._getPrimaryWayMnemonic():t.isPrimary;return e?this.expandedCmp:this.secondariesEl},n.prototype._getWidth=function(){var t=n.superclass._getWidth.apply(this,arguments);return this.o.banner_place.split("_").indexOf("top")!==-1&&(t+=o.getScrollWidth()+26),t},n.prototype.expand=function(t){var e=this,n=this._getExpanderCls();t?this.labelCmp.getEl().hide({effect:"fade",duration:uLiB.util.AnimationManager.durationOut,complete:function(){e.expandedCmp.getEl().show({effect:"fade",duration:uLiB.util.AnimationManager.durationIn}),e.removeCls(n)}}):this.expandedCmp.getEl().hide({effect:"fade",duration:uLiB.util.AnimationManager.durationOut,complete:function(){e.labelCmp.getEl().show({effect:"fade",duration:uLiB.util.AnimationManager.durationIn}),!e._hasSingleActiveWayCount()&&e.labelCmp.getEl().attr(o.C.ATTR_COMAGIC_CTYPE,"expander"),e.addCls(n),e._adjustPosition()}}),this.onExpand&&this.onExpand(t)},n.prototype._getExpanderCls=function(){return o.sformat(this.expanderClsTpl,this._getPrimaryWayMnemonic())},n.prototype._getHeight=function(){var t=o.elementHeight(this.getEl());return this.hasCls("middle")&&this.hasCls(this._getExpanderCls())&&(t=192),t},n.prototype.show=function(t){this.expand(!this.is_banner_default_minimize),n.superclass.show.apply(this,arguments),t&&this.is_banner_default_minimize&&!this.isFirstShow&&(this.isFirstShow=!0)},o.apply(o.ns(e),{Banner:n})}(window,"ComagicWidget.widget.consultant.label"),function(t,e){function n(t){this.addCls("buttons"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=ComagicWidget.widget.consultant.label.AbstractLabel,a=ComagicWidget.widget.consultant.label.ButtonsWayItem;uLiB.$;o.extend(n,s),n.prototype.cls="buttons-container",n.prototype.expandedCls="expanded",n.prototype.connectWayItemClass=a,n.prototype.animationKey="Buttons",n.prototype.oneButtonWidth={main:50,simple:45},n.prototype.buildInnerElements=function(){this.buildExpandedEl()},n.prototype.buildExpandedEl=function(){this.wayItemsEl=this.expandedCmp=new r({cls:this.expandedCls,html:"<div/>"}),this.add(this.expandedCmp),this.processConnectWays()},n.prototype._getWayItemsContainer=function(){return this.wayItemsEl},n.prototype.buildCollapsedEl=function(){},n.prototype.expand=function(){},n.prototype.updateSingleWayItem=function(){},n.prototype.activate=function(t){n.superclass.activate.apply(this,arguments),o.arrayIndexOf(this.o.banner_place.split("_"),"middle")===-1?(this.getEl().css("width",(this.o.available_connect_ways.length-(this.hasConsultantWayEnabled()?t?0:1:0))*(this.oneButtonWidth[this.o.banner_skin]+10)),this.restorePosition()):this.getEl().css("width",this.oneButtonWidth[this.o.banner_skin])},n.prototype._onActivate=function(){n.superclass._onActivate.apply(this,arguments)},o.apply(o.ns(e),{Buttons:n})}(window,"ComagicWidget.widget.consultant.label"),function(t,e){function n(t){n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.el.Div,s=i.el.Element,a=i.cmp.Component,l=ComagicWidget.widget.consultant.label.AbstractLabel,c=ComagicWidget.widget.consultant.label.SliderWayItem;uLiB.$;o.extend(n,l),n.prototype.cls="slider-container",n.prototype.expandedCls="expanded",n.prototype.arrowWrapperCls="img-wrapper",n.prototype.animationKey="Slider",n.prototype.connectWayItemClass=c,n.prototype.isExpanded=!1,n.prototype.buildInnerElements=function(){this.buildLabelEl(),this.buildExpandedEl(),this.buildCollapsedEl()},n.prototype.buildLabelEl=function(){this.labelCmp=new r({cls:"label",defaults:{unselectable:"on"},children:[{tag:"img",src:o.C.SRC_IMG_BLANK},{tag:"span",text:this.banner_label}]}),this.add(this.labelCmp)},n.prototype.buildExpandedEl=function(){this.expandedCmp=new a({cls:this.expandedCls,html:"<div/>",animationKey:"slider-expanded",parentCmp:this}),this.expandedCmp.add(new r({cls:"slider-expanded-label-container",ctype:"collapser",defaults:{unselectable:"on"},children:[{tag:"span",text:this.banner_label},{tag:"div",cls:this.arrowWrapperCls,children:[{tag:"img",src:o.C.SRC_IMG_BLANK}]}]})),this.wayItemsEl=new r({cls:"connect-way-items"}),this.expandedCmp.add(this.wayItemsEl),this.expandedCmp.show(!1),this.add(this.expandedCmp),this.processConnectWays()},n.prototype.buildCollapsedEl=function(){this.collapsedCmp=new a({ctype:"expander",cls:"collapsed",html:"<div/>",animationKey:"slider-collapsed",parentCmp:this}),this.collapsedCmp.add(new s({tag:"span",text:this.banner_label,cls:"slider-collapsed-label",unselectable:"on"})),this.collapsedCmp.add(new s({tag:"div",cls:this.arrowWrapperCls,children:[{tag:"img",src:o.C.SRC_IMG_BLANK}]})),this.collapsedCmp.show(!0),this.add(this.collapsedCmp)},n.prototype.expand=function(t){var e=this.connectWays;return 1===e.length&&t?void("mobile"===this.o.banner_skin?this.o.comagicObj.onChatPopup(this,{action:e[0].ctype}):this.o.comagicObj.openCmp(this.connectWays[0].ctype,this.o)):(this.isExpanded=t,t?(this.expandedCmp.show(!0,!0),this.collapsedCmp.show(!1,!0)):(this.expandedCmp.show(!1,!0),this.collapsedCmp.show(!0,!0)),void(this.onExpand&&this.onExpand(t)))},n.prototype.addConnectWay=function(t){this.connectWays.push(new this.connectWayItemClass({ctype:t,renderTo:this.wayItemsEl,title:this["cw_"+t+"_title"]}))},n.prototype._getWayItemsContainer=function(t){return this.wayItemsEl},n.prototype.show=function(t){var e=this;this.isExpanded?t?(this.showing=!1,setTimeout(function(){e.expand(!0)},350)):(this.showing=!0,this.expandedCmp.show(!1)):this.collapsedCmp.show(!0),n.superclass.show.apply(this,arguments)},n.prototype._getHeight=function(){return this.hasCls("middle")?192:o.elementHeight(this.getEl())},o.apply(o.ns(e),{Slider:n})}(window,"ComagicWidget.widget.consultant.label"),function(t,e){function n(t){}var i=t.uLiB,o=i.util;uLiB.$;n.prototype.operatorAvatarCls="operator-avatar",n.prototype.operatorAvatarWrapperCls="operator-avatar-wrapper",n.prototype.operatorNameCls="operator-name",n.prototype.operatorPositionCls="operator-position",n.prototype.noAvatarCls="no-avatar",n.prototype.fileTransferDisabledMessage="Отправка файлов данному оператору невозможна",n.prototype.inputFieldSelector=o.C.CSS_CONSULTANT_INPUT,n.prototype.callBtnSelector="call-btn",n.prototype.ctype=o.C.CW_CONSULTANT,n.prototype.eventSounds=["incoming_message"],n.prototype.pollingStartTime=0,n.prototype.uploadUrlPollingInterval=114e4,n.prototype.initConsultant=function(){this.trackClick=!0,this.consultantLogCmp=this.getConsultantLogCmp(),this.is_preview||(this.initChatWatcher(),this.initSound())},n.prototype.initChatWatcher=function(){var e=this,n=function(){var i=e.getInnerEl(e.inputFieldSelector).val();e.oldInputFieldVal!==i&&(e.oldInputFieldVal=i,e._onTextAreaChange(i)),e.initChatWatcherTimeoutId=t.setTimeout(n,1e3)};e.chatWatcherEnabled=!0,n()},n.prototype.initSound=function(){this.supportAudio=o.supportAudio(),this.supportAudio&&(o.initSound({disableMultipleWindowsSounds:!0,sounds:this.eventSounds,path:"//"+this.comagic_web_url+"/static/banner/audio/",multiPlay:!0,volume:"0.5"}),this.isSoundOn=!0)},n.prototype.playSound=function(t){if(this.supportAudio&&this.isSoundOn){var e;"Оператор"===t.source&&(e="incoming_message"),e&&o.playSound(e)}},n.prototype.turnSoundOn=function(t){this.isSoundOn=!!t},n.prototype.notify=function(t){this.playSound(t)},n.prototype.addLogRecord=function(t){this.consultantLogCmp.addRecord(t,!1,!!this.socket)},n.prototype.setOperator=function(t,e,n,i){this.setOperatorName(t,n),this.setOperatorPic(e),this.setFileTransferEnable(i),this.pollForUploadUrl(t&&" "!==t)},n.prototype.setFileTransferEnable=function(t){var e=this.getFileUploadCmp(),n=e.getEl().find("input[type=file]"),i=this.getInputField();e.getEl()[t?"show":"hide"](),t&&e.getEl().css("display","inline-block"),i.css("width",t?"167px":"200px"),n[t?"removeAttr":"attr"]("disabled","disabled"),n.attr("title",t?"":this.fileTransferDisabledMessage)},n.prototype.setOperatorName=function(t,e){t=t||"",e=e||(t?"Консультант":"");var n=this.getInnerEl(this.operatorNameCls),i=this.getInnerEl(this.operatorPositionCls);n.text(t).attr("title",t),i.text(e).attr("title",e)},n.prototype.setOperatorPic=function(t){var e,n,i=this.getInnerEl(ComagicWidget.widget.common.form.CommonFormPanel.prototype.headerCls),r=this.getInnerEl(this.operatorAvatarCls);o.arrayIndexOf(["main","mobile"],this.banner_skin)!=-1?n=o.hasConnectWayEnabled(o.C.CW_SITE_PHONE)||null===t?"addCls":"removeCls":"simple"===this.banner_skin&&(n=t&&"default"!==t?"removeCls":"addCls"),e=t&&"default"!==t?t:o.C.SRC_IMG_BLANK,r.attr("src",e),t&&"default"!==t?r.resizecrop({wrapperCreated:!0,width:this.operatorPicSize,height:this.operatorPicSize}):r.width("100%").height("100%"),o[n](i,this.noAvatarCls)},n.prototype.operatorPicSize=50,n.prototype.setTypeNotifier=function(t){this.consultantLogCmp.setTypeNotifier(t)},n.prototype.loadHistory=function(t,e){var n=[];if(!e)for(var i,o=0;i=t[o];o++)i.from&&n.push(i);this.consultantLogCmp.innerAnimationEnabled=!1,this.consultantLogCmp.addRecord(e?t:n),this.consultantLogCmp.innerAnimationEnabled=!0},n.prototype.setOperatorRating=function(){var t=this.getItem&&this.getItem("ComagicWidget.widget.consultant.cmp.OperatorRatingCmp");t&&t.show(!1),this.adjustLogHeight&&this.adjustLogHeight()},n.prototype.onRateOperatorFieldRate=function(t){},n.prototype.onTextAreaChange=function(t){},n.prototype._onTextAreaChange=function(t){this.chatWatcherEnabled&&this.onTextAreaChange(t)},n.prototype._onRateOperatorFieldRate=function(t){this.onRateOperatorFieldRate(t)},n.prototype._printChatLog=function(){var t=window.open(),e=o.buildUrl.call(this,"/static/banner/build/css/print.css"),n=this.getLogHtml();t.document.title=document.title,t.document.write(o.sformat('<!DOCTYPE html"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="{0}"/></head><body onload="window.print();"><div class="comagic-consultant-log-inner">{1}</div><br/>Сервис предоставлен <a href="http://www.comagic.ru" target="_blank">www.comagic.ru</a></body></html>',e,n)),t.document.close()},n.prototype.getInputField=function(){return this.getInnerEl(this.inputFieldSelector)},n.prototype.getInputMessage=function(){return this.getInputField().val().replace(/[\n\r]$/,"")},n.prototype.getValues=function(){return{message:this.getInputMessage()}},n.prototype.isValid=function(){return!!o.strim(this.getInputMessage())},n.prototype.onClick=function(e,n,i){o.arrayIsContain(["common-button-send","standard-button-send"],i)&&t.setTimeout(o.bind(function(){this.getInputField().focus()},this),100)},n.prototype.isUploadUrlPollingIntervalExpired=function(){var t=this,e=(new Date).getTime();return e-t.pollingStartTime>t.uploadUrlPollingInterval},n.prototype.onDestroy=function(){this.initChatWatcherTimeoutId&&t.clearTimeout(this.initChatWatcherTimeoutId)},o.apply(o.ns(e),{Consultant:n})}(window,"ComagicWidget.widget.consultant.mixin"),function(t,e){function n(t){this.addCls("main-input-cmp"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=i.cmp.FileUpload,a=i.cmp.MsButton;uLiB.$;o.extend(n,r),n.prototype.ctype="main-input-cmp",n.prototype.leftContainerCls="left-container",n.prototype.textareaPlaceholderText="Введите сообщение сюда",n.prototype.sendMessageBtnPlaceholderCls="send-message-btn-placeholder",n.prototype.sendFileBtnPlaceholderCls="send-file-btn-placeholder",n.prototype.inputFieldCls=o.C.CSS_CONSULTANT_INPUT,n.prototype.renderFileSendingButton=!0,n.prototype.html='<div><div class="{leftContainerCls}"><textarea placeholder="{textareaPlaceholderText}" class="{inputFieldCls}"></textarea><div class="{sendFileBtnPlaceholderCls}"/></div><div class="{sendMessageBtnPlaceholderCls}"/></div>',n.prototype.afterRender=function(){n.superclass.afterRender.apply(this,arguments);var t=this.getEl();t.find("textarea").val(""),this.renderFileSendingButton&&t.find(o.getCssSelector(this.sendFileBtnPlaceholderCls,!0,!0)).replaceWith((this.fileUploadCmp=new s({icon:{},onReceive:this.onFileReceive,validExtensions:o.C.VALID_FILE_EXTENSIONS})).getEl()),t.find(o.getCssSelector(this.sendMessageBtnPlaceholderCls,!0,!0)).replaceWith(new a({icon:{},cls:"button-send",ctype:"common-button-send"}).getEl())},n.prototype._onTextareaHeightSet=function(t,e,n){this.onTextareaHeightSet(t,e,n)},n.prototype.onTextareaHeightSet=function(t,e,n){},n.prototype.onFileReceive=function(){},n.prototype.getValue=function(){return this.textarea.val()},n.prototype.applyAutogrow=function(){this.autogrowApplyed||(this.autogrowApplyed=!0,this.getEl().find("textarea").autogrow({maxHeight:74,animation:!1,onHeightSet:o.bind(this._onTextareaHeightSet,this)}))},o.apply(o.ns(e),{MainInputCmp:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.addCls("simple-sound-button"),this.icon={anchor:"right"},this.action="toggle-sound",this.stateful=!0,n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util;uLiB.$;o.extend(n,"uLiB.cmp.MsButton"),n.prototype.ctype="simple-sound-button",n.prototype.trackOwnEvents=!0,n.prototype.textStateOn="Отключить звуки",n.prototype.textStateOff="Включить звуки",o.apply(o.ns(e),{SimpleSoundButton:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.addCls("simple-input-cmp"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util;uLiB.$;o.extend(n,"ComagicWidget.widget.consultant.cmp.MainInputCmp"),n.prototype.ctype="simple-input-cmp",n.prototype.hintText="Отправка Enter",n.prototype.hintTextCls="hint-text",n.prototype.renderFileSendingButton=!1,n.prototype.html='<div><div class="{leftContainerCls}"><textarea placeholder="{textareaPlaceholderText}" class="{inputFieldCls}"/><div class="{hintTextCls}">{hintText}</div></div><div class="{sendMessageBtnPlaceholderCls}"/></div>',n.prototype.textareaPlaceholderText="",o.apply(o.ns(e),{SimpleInputCmp:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.autoEl={tag:"div",children:[{tag:"div",cls:this.innerCls}]},this.addCls("consultant-log"),this.innerAnimationEnabled=!0,n.superclass.constructor.apply(this,arguments),this.logEl=this.getEl().find(o.getCssSelector(this.innerCls,!0,!0));var e=o.dGetTimeDelta();this.o.is_preview&&(e=0),void 0!==e&&(this.timeDelta=e)}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=(i.el.Element,uLiB.$);o.extend(n,r),n.prototype.ctype="consultant-log",n.prototype.innerCls="consultant-log-inner",n.prototype.typingNotificationCls="consultant-log-message-box-typing-notification",n.prototype.logRecordTpl='<div class="{messageBoxCls} {sourceCls}"><div class="{sourceTextCls}">{source}</div><div class="{messageCls}">{message}</div><div class="{timeCls}">{time}</div><div class="{tailCls}"><div class="{tailInner1Cls}"/><div class="{tailInner2Cls}"/></div><div class="{clearerCls}"/></div>',n.prototype.logRecordSystemTpl='<div class="{messageBoxCls} {sourceCls}"><div class="{messageCls}">{message}</div><div class="{timeCls}">{time}</div></div>',n.prototype.logRecordFileLinkSubTpl='<a href="{fileLink}" target="_blank"><img src="{imgSrc}" class="{clipCls}"><span class="{fileNameCls}">{fileName}</span></a> <span class="{fileSizeCls}">{fileSize}</span>',n.prototype.logRecordTypingNotificationTpl='<div class="{messageBoxCls} {sourceCls} {typingNotificationCls}"><div class="{sourceTextCls}">{source}</div><div class="{messageCls}"><img src="{imgSrc}"></div><div class="{tailCls}"><div class="{tailInner1Cls}"/><div class="{tailInner2Cls}"/></div><div class="{clearerCls}"/></div>',n.prototype.logRecordButtonPhoneTpl='<div class="{messageBoxCls} {sourceCls}"><a class="comagic-common-button comagic-button"><span class="{retentionCls} {openSitePhoneCls}">Заказать звонок</span></a></div>',n.prototype.logRecordButtonRequestTpl='<div class="{messageBoxCls} {sourceCls}"><a class="comagic-common-button comagic-button"><span class="{retentionCls} {openSiteRequestCls}">Оставить заявку</span></a></div>',n.prototype.processMessage=function(t,e){return t=o.crLfToBr(o.textLinksToHtml(t)),e&&(t=t.replace(/<a[^>]+/g,'$& target="_blank"')),t},n.prototype.formatFileSize=function(t){return t<100?t+=" B":t=t<102400?(t/1024).toFixed(2)+" KB":(t/1024/1024).toFixed(2)+" MB",t},n.prototype.composeRecord=function(t,e){var n,i=!t.from,r=t.isTypingNotification,s="Оператор"==t.source,a=this.logRecordTpl;i?(n="consultant-log-message-box-system",a=this.logRecordSystemTpl):r?(n="consultant-log-message-box-operator",a=this.logRecordTypingNotificationTpl):"site_request"===t.communication_way?(n="consultant-log-message-box-button",a=this.logRecordButtonRequestTpl):"site_phone"===t.communication_way?(n="consultant-log-message-box-button",a=this.logRecordButtonPhoneTpl):n=s?"consultant-log-message-box-operator":"consultant-log-message-box-visitor";var l,c=t.date;l=t.fx_link?o.sformat(this.logRecordFileLinkSubTpl,{fileLink:s?t.fx_link:"javascript:void(0);",imgSrc:o.C.SRC_IMG_BLANK,clipCls:"consultant-log-message-box-clip",fileNameCls:"consultant-log-message-box-filename",fileSizeCls:"consultant-log-message-box-filesize",fileName:t.fx_name,fileSize:this.formatFileSize(t.fx_size)}):this.processMessage(t.message||"",e),t.is_preview&&(this.timeDelta=0);var u=void 0===this.timeDelta?ComagicWidget.widget.common.Ws.getTimeDelta():this.timeDelta;return c&&(c=o.dApplyTimeDelta(c,u)),o.sformat(a,{messageBoxCls:"consultant-log-message-box",sourceCls:n,sourceTextCls:"consultant-log-message-source",messageCls:"consultant-log-message",timeCls:"consultant-log-time",tailCls:"consultant-log-tail",tailInner1Cls:"tail-inner-1",tailInner2Cls:"tail-inner-2",retentionCls:"chat-retention",openSitePhoneCls:"open-site-phone",openSiteRequestCls:"open-site-request",clearerCls:"clearer",message:l.replace(/[\n]+$/,"").replace(/[\n\r]/g,"<br>"),time:o.tformat(c),source:this.getSourceText(t.source),imgSrc:o.C.SRC_IMG_BLANK,typingNotificationCls:this.typingNotificationCls})},n.prototype.getLogEl=function(){return this.logEl},n.prototype.addRecord=function(t,e,n){if(e===!0&&this.getLogEl().empty(),s.isArray(t))for(var i,o=0;i=t[o];o++)this.addRecord(i);else{var r=s(this.composeRecord(t,n)).css({opacity:0});this.getLogEl().append(r),this.scrollTop(),r.animate({opacity:1,easing:"easeInOutQuint",duration:50})}},n.prototype.scrollTop=function(){this.getLogEl().slimScroll({scrollTo:1e4})},n.prototype.setTypeNotifier=function(e){if(void 0!==e){var n=this.getInnerEl(this.typingNotificationCls);e?n.length||(this.addRecord({source:"Оператор",from:"Оператор",isTypingNotification:!0}),this.scrollTop()):n.remove()}else this.setTypeNotifier(!0),this.typeTimeoutId&&(clearTimeout(this.typeTimeoutId),this.typeTimeoutId=null),this.typeTimeoutId=t.setTimeout(o.bind(function(){this.typeTimeoutId=null,this.setTypeNotifier(!1)},this),2e4)},n.prototype.isEmpty=function(){return!this.getLogEl().text().replace(/\s+/g,"")},n.prototype.getLogHtml=function(){return this.getLogEl().html()},n.prototype.applySlimScroll=function(t){this.logEl.slimscroll({height:t||this.height||"auto"})},n.prototype.getSourceText=function(t){return{"Посетитель":"Я:","Оператор":"Оператор:"}[t]},n.prototype.setHeight=function(t,e){void 0===t&&(t=this.el.height()+e),this.logEl.height(t),this.el.height(t),this.el.find(".slimScrollDiv").height(t)},n.prototype.hideSystemMessages=function(){this.getInnerEl("consultant-log-message-box-system").hide(),this.hideAlternateCommunicationButtons()},n.prototype.showChatRetentionAction=function(t){this.addRecord({communication_way:t,from:"system"})},n.prototype.hideAlternateCommunicationButtons=function(){this.getInnerEl("consultant-log-message-box-button").hide()},o.apply(o.ns(e),{Log:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.addCls(c),n.superclass.constructor.apply(this,arguments)}function i(t){i.superclass.constructor.apply(this,arguments)}var o=t.uLiB,r=o.util,s=o.el.Label,a=o.cmp.Component,l=uLiB.cmp.FunctionalButton,c="wrapper-operator-rating-cmp";uLiB.$;r.extend(n,a),n.prototype.html="<div></div>",r.extend(i,n),i.prototype.ctype="operator-rating-cmp",i.prototype.functionalRaitingSectionCls="functional-raiting-section",i.prototype.html='<div><div class="{functionalRaitingSectionCls}"></div></div>',i.prototype.afterRender=function(){i.superclass.afterRender.apply(this,arguments);var t=(this.getEl(),this.getInnerEl(this.functionalRaitingSectionCls));new s({text:"Оценка консультации:",renderTo:t}),new l({type:"thumb-up",renderTo:t}),new l({type:"thumb-down",renderTo:t})},r.apply(r.ns(e),{OperatorRatingCmp:i,WrapperOperatorRatingCmp:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.addCls("functional-toolbar"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.cmp.Component,s=i.el.Element,a=uLiB.cmp.FunctionalButton;uLiB.$;o.extend(n,r),n.prototype.ctype="functional-toolbar",n.prototype.html="<div/>",n.prototype.renderBrandingLink=function(t,e){var n=this.getEl();new s({tag:"a",href:e,target:"_blank",cls:"branding-link",text:t,renderTo:n})},n.prototype.afterRender=function(){n.superclass.afterRender.apply(this,arguments);var t=this.getEl();this.emailBtn=new a({type:"email",renderTo:t,enableToggle:!0}),new a({
type:"print",renderTo:t}),o.supportAudio()&&(this.soundBtn=new a({type:"sound",stateful:!0,stateId:"consultant-functional-toolbar-sound-btn",renderTo:t}))},o.apply(o.ns(e),{FunctionalToolbar:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t){this.addCls("email-chat-cmp"),n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=i.el.Div,s=i.field.TextField,a=i.cmp.Component,l=i.cmp.LinklikeButton,c=i.cmp.CommonButton;uLiB.$;o.extend(n,a),n.prototype.html="<div/>",n.prototype.ctype="email-chat-cmp",n.prototype.afterRender=function(){n.superclass.afterRender.apply(this,arguments);var t=this.getEl();this.emailField=new s({plaseholder:"Email",tooltipType:"rich",label:"Отправить чат на электронную почту:",validators:["email"],maxLength:100,renderTooltipInside:!0,notemptyText:"Укажите email",allowBlank:!1,renderTo:t}),new r({cls:"buttons-wrapper",renderTo:t,children:[new c({text:"Отправить",action:"send-chat-by-email"}),new l({text:"Отмена",action:"cancel"}),new r({cls:"clearer"})]})},n.prototype.renderButtons=function(){n.superclass.renderButtons.apply(this,arguments)},n.prototype.isValid=function(){return this.emailField.isValid()},n.prototype.getValues=function(){return{email:this.emailField.getValue()}},o.apply(o.ns(e),{EmailChatCmp:n})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){var n=t.uLiB,i=n.util,o=(uLiB.$,function(t,e,n){var i=this;this.url=t,this.acceptCallback=e,this.cancelCallback=n,this.html='<!--[if lt IE 9]><div class="comagic-popup-overlay comagic-popup-overlay-ie"></div><![endif]--><div class="comagic-popup-overlay"><div class="comagic-popup"><p>Оператор предлагает Вам открыть страницу с адресом '+this.url+'.</p><input type="button" value="Да" name="comagic-popup-y"/><input type="button" value="Нет" name="comagic-popup-n" /></div><!--[if lt IE 9]><div class="comagic-popup-valign"></div><![endif]--></div>',this.css='<style type="text/css">.comagic-popup-overlay {display: none;position: fixed;left: 0;top: 0;width: 100%;height: 100%;background: rgba(255,255,255,.7);text-align: center; z-index: 16000;}.comagic-popup-overlay:after {display: inline-block;*display: inline;*zoom: 1;height: 100%;width: 0;vertical-align: middle;content: ""}.comagic-popup-overlay-ie {background: #fff;opacity: .7;filter: alpha(opacity=70)}.comagic-popup {font: 14px/125% Arial;display: inline-block;*display: inline;*zoom: 1;position: relative;max-width: 80%;padding: 20px;border: 1px solid #ccc;box-shadow: 0 0 10px rgba(120,120,120,0.5);background: #fff;vertical-align: middle}.comagic-popup p {margin: 1em 0;text-align: center}.comagic-popup-valign {display: inline-block;*display: inline;*zoom: 1;width: 0;height: 100%;vertical-align: middle}.comagic-popup input[type="button"] {padding: 6px 16px;border: 1px solid #ccc;border-radius: 2px;cursor: pointer;background: #fff;color: #333;}</style>',$(this.css).appendTo("head"),$(this.html).appendTo("body").hide(),$(".comagic-popup input[name=comagic-popup-y]").click(function(){i.hide(),i.acceptCallback(),window.location.href=i.url}),$(".comagic-popup input[name=comagic-popup-n]").click(function(){i.hide(),i.cancelCallback()}),this.show=function(){$(".comagic-popup-overlay").show()},this.hide=function(){$(".comagic-popup-overlay").hide()}});i.apply(i.ns(e),{OpenUrlDialog:o})}(window,"ComagicWidget.widget.consultant.cmp"),function(t,e){function n(t,e){this.s=e,t.monitorResize=!1,t.monitorZoom=!0,n.superclass.constructor.apply(this,arguments)}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.CommonFormPanel;uLiB.$;o.extend(n,r),n.prototype.destroyOnHide=!0,n.prototype.ftype="preview",n.prototype.elementsToRender=["tools","header","buttons"],n.prototype.tools=["close"],n.prototype.items=[],n.prototype.html='<div><div class="{containerCls}"><div class="{headerCls}"><img src="{blankImgSrc}"><div>{title}</div></div><div class="{buttonsCls}"></div><div class="{toolsCls}"></div></div></div>',o.apply(o.ns(e),{PreviewPanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t,e){this.addCls("consultant-preview"),t.title=e&&(e.message||e.cw_consultant_title)||"",this.buttonText="Начать чат",n.superclass.constructor.apply(this,arguments),this.operatorAvatarEl=this.getInnerEl(this.operatorAvatarCls),s.prototype.setOperatorPic.call(this,e.file_link)}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.consultant.form.PreviewPanel,s=ComagicWidget.widget.consultant.mixin.Consultant;uLiB.$;o.extend(n,r),n.prototype.operatorAvatarCls="operator-avatar",n.prototype.operatorPicSize=71,n.prototype.noAvatarCls="no-avatar",n.prototype.operatorAvatarWrapperCls="operator-avatar-wrapper",n.prototype.ctype=o.C.CW_CONSULTANT_PREVIEW,o.apply(o.ns(e),{ConsultantPreviewPanel:n}),n.prototype.html='<div><div class="{containerCls}"><div class="{headerCls}"><div>{title}<br><br></div></div><div class="{buttonsCls}"></div><div class="{toolsCls}"></div></div></div>'}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t,e){this.addCls("site-request"),this.buttonText="Отправить",this.clearOnSubmit=!1,this.deferredClearOnSubmit=!0,this.disableSendBtnOnSubmit=!0,n.superclass.constructor.call(this,t,{message:"Заявка с сайта",require_name:"required",require_email:"required",require_phone:"optional",require_message:"required"})}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.DynamicFormPanel;uLiB.$;o.extend(n,r),n.prototype.ctype=o.C.CW_SITE_REQUEST,n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="site-request",n.prototype.hasGlobalState=!0,n.prototype.markRequiredFields=!0,o.apply(o.ns(e),{SiteRequestPanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t){this.addCls("site-phone"),this.tools=["close"],this.title="Заказ звонка",this.buttonText="Перезвоните мне",this.items=[{__class:s,name:"phone",placeholder:"Ваш телефон",renderTooltipInside:!0,dontClear:!0,notemptyText:"Укажите телефон",allowBlank:!1}],t.is_captcha_enabled&&this.items.push({__class:a,name:"captcha_val",label:"Введите код с изображения",allowBlank:!1,is_preview:t.is_preview,notemptyText:"Введите код капчи",minLength:4,maxLength:4},{__class:l,action:"refresh-captcha",text:"Обновить код"}),n.superclass.constructor.apply(this,arguments),this.captchaField=t.is_captcha_enabled?this.getItem(a):null}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.CommonFormPanel,s=i.field.PhoneField,a=i.field.CaptchaField,l=i.cmp.LinklikeButton;uLiB.$;o.extend(n,r),n.prototype.ctype=o.C.CW_SITE_PHONE,n.prototype.ftype="site-phone",n.prototype.nonCaptchaCls="non-captcha",n.prototype.clearOnSubmit=!0,n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="site-phone",n.prototype.hasGlobalState=!0,n.prototype.refreshCaptcha=function(){this.o.is_captcha_enabled&&this.captchaField.refreshCaptcha()},n.prototype.show=function(t){this.getChildEl(this.containerCls)[this.o.is_captcha_enabled?"removeClass":"addClass"](this.nonCaptchaCls),t&&this.refreshCaptcha(),n.superclass.show.apply(this,arguments)},o.apply(o.ns(e),{SitePhonePanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t){this.addCls("consultant-main"),this.ftype=this.ctype,this.trackClick=!0,t.banner_place&&(o.arrayIsContain(t.banner_place.split("_"),"bottom")?(this.resizeHandleElementTop=o.sformat('<div class="{0}"/>',o.getCssSelector(this.resizableCls,!0)),this.addCls("resizable-top")):(this.resizeHandleElementBottom=o.sformat('<div class="{0}"/>',o.getCssSelector(this.resizableCls,!0)),this.addCls("resizable-bottom"))),n.superclass.constructor.apply(this,arguments),this.resizableCt=this.getChildEl(this.resizableCls),this.resizableCt.length&&(this.resizableCt[0].onmousedown=o.bind(this.onResizeStart,this),document.onmouseup=o.bind(this.onResizeEnd,this),document.onmousemove=o.bind(this.onResizeMove,this)),this.initConsultant(),this.turnSoundOn("on"===this.getSoundState()),this.state.isAlreadyRated&&!t.is_preview&&this.getItem(l)&&this.getItem(l).getEl().hide()}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.CommonFormPanel,s=ComagicWidget.widget.consultant.mixin.Consultant,a=i.cmp.CallButton,l=ComagicWidget.widget.consultant.cmp.OperatorRatingCmp,c=ComagicWidget.widget.consultant.cmp.FunctionalToolbar,u=ComagicWidget.widget.consultant.cmp.Log,p=ComagicWidget.widget.consultant.cmp.MainInputCmp,d=ComagicWidget.widget.consultant.cmp.EmailChatCmp;o.extend(n,r),o.mixIn(n,s,"Consultant"),n.prototype.callBtnPlaceholderCls="call-btn-placeholder",n.prototype.sendChatByEmailContainerCls="send-by-email-container",n.prototype.inputCmpPlaceholderCls="input-field-placeholder",n.prototype.operatorInfoCls="operator-info",n.prototype.emailChatCmpAnimationKey="main-email-chat-cmp",n.prototype.resizeHandleElementTop="",n.prototype.resizeHandleElementBottom="",n.prototype.isShowMinimizeButton=!0,n.prototype.initialLogHeight=232,n.prototype.tools=[{action:"close",title:"Закрыть чат"},"unpin",{action:"minimize",title:"Свернуть чат"}],n.prototype.html='<div style="height: 406px;"><div class="{toolsCls}"></div><div class="{containerCls}">{resizeHandleElementTop}<div class="{headerCls}"><span class="{operatorAvatarWrapperCls}"><img src="{blankImgSrc}" class="{operatorAvatarCls}"></span><div class="{operatorInfoCls}"><div class="{operatorNameCls}"></div><div class="{operatorPositionCls}"></div></div><div class="{callBtnPlaceholderCls}"></div></div><div class="{itemsCls}"></div><div class="{sendChatByEmailContainerCls}"></div><div class="{inputCmpPlaceholderCls}"></div><div class="{footerCls}"/>{resizeHandleElementBottom}</div></div>',n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="consultant-main",n.prototype.hasGlobalState=!0,n.prototype.elementsToRender=["tools","header","items","sendChatByEmailContainer","inputCmpPlaceholder"],n.prototype.renderHeader=function(){this.o.is_callback_schedule_active&&o.hasConnectWayEnabled.call(this,o.C.CW_SITE_PHONE)&&(this.callBtn=new a({action:"open-site-phone"}),this.getInnerEl(this.callBtnPlaceholderCls).replaceWith(this.callBtn.getEl()))},n.prototype.isShowRaiting=function(){return this.is_consultant_operator_rating&&!this.operator_rating},n.prototype.getItemsForRendring=function(){var t=[{__class:u,height:this.initialLogHeight},{__class:c}];return this.isShowRaiting()&&t.unshift({__class:l}),t},n.prototype.renderItems=function(){this.items=this.getItemsForRendring(),n.superclass.renderItems.apply(this,arguments),this.logCmp=this.getItem(u),this.o.banner_branding_text&&this.o.banner_branding_url&&this.getItem(c).renderBrandingLink(this.o.banner_branding_text,this.o.banner_branding_url)},n.prototype.renderSendChatByEmailContainer=function(){this.emailChatForm=new d({renderHidden:!0,animationKey:this.emailChatCmpAnimationKey,parentCmp:this}),this.getInnerEl(this.sendChatByEmailContainerCls).replaceWith(this.emailChatForm.getEl())},n.prototype.renderInputCmpPlaceholder=function(){this.inputCmpPlaceholderCt.replaceWith((this.inputCmp=new p({onFileReceive:o.bind(this.onFileReceive,this),onTextareaHeightSet:o.bind(this.onMainInputTextareaHeightSet,this),animationKey:"main-input-cmp",parentCmp:this})).getEl())},n.prototype.onFileReceive=function(){this.pollForUploadUrl(!1),this.pollForUploadUrl(!0)},n.prototype.getConsultantLogCmp=function(){return this.getItem(u)},n.prototype.getFunctionalToolbarCmp=function(){return this.getItem(c)},n.prototype.onMainInputTextareaHeightSet=function(e,n,i){if(n&&!i)this.adjustLogHeight();else if(n&&i){var r,s=this,a=(new Date).getTime();r=t.setInterval(function(){s.adjustLogHeight(),(new Date).getTime()>a+o.C.DURATION_INPUT_CMP_ANIMATION&&t.clearInterval(r)},1)}},n.prototype._onClick=function(t,e,n,i,o,r){var s=this;if("functional-button-email"===n)this.toggleEmailChatFormVisibility();else if("functional-button-thumb-up"===n||"functional-button-thumb-down"===n){var a="functional-button-thumb-up"===n?5:1,c=this.getItem(l);this._onRateOperatorFieldRate(a),this.state.isAlreadyRated=!0,this.saveState(),c.getEl().hide({effect:"slide",direction:"up",duration:uLiB.util.AnimationManager.durationInnerFade,easing:uLiB.util.AnimationManager.easing,complete:function(){s.adjustLogHeight()}})}else"text-button-cancel"===n?this.getFunctionalToolbarCmp().emailBtn.getEl().click():"functional-button-sound"===n?this.turnSoundOn("on"===this.getFunctionalToolbarCmp().soundBtn.state):"common-button-send-chat-by-email"===n&&this.emailChatForm.isValid()&&this.getFunctionalToolbarCmp().emailBtn.getEl().click()},n.prototype.toggleEmailChatFormVisibility=function(t){void 0===t&&(t=this.getFunctionalToolbarCmp().emailBtn.pressed),this.emailChatForm.show(t,this.animationEnabled),this.inputCmp.show(!t,this.animationEnabled),!this.animationEnabled&&this.adjustLogHeight()},n.prototype.adjustLogHeight=function(t,e){"boolean"===uLiB.$.type(t)&&(e=t);var n=this.getInnerEl(this.containerCls),i=n.height(),r=0;n.find(">:visible").each(function(){var t=uLiB.$(this);o.arrayIndexOf(["fixed"],t.css("position"))&&(r+=t.outerHeight(!0))}),this.logCmp.setHeight(void 0,i-r,e)},n.prototype.show=function(t){var e=this;n.superclass.show.apply(this,[t,{callback:function(){t?(e.inputCmp.applyAutogrow(),e.adjustLogHeight(!0),e.logCmp.applySlimScroll(e.initialLogHeight),e.logCmp.scrollTop()):!e.getIsMinimized()&&e.logCmp.hideSystemMessages()}}]),this.showMinimizeButton(this.isShowMinimizeButton)},n.prototype.showMinimizeButton=function(t){this.isShowMinimizeButton!==t&&(this.isShowMinimizeButton=t),this.tools.forEach(function(e){"minimize"===e.action&&e.show(t)})},n.prototype.isLogEmpty=function(){return this.logCmp.isEmpty()},n.prototype.clearValues=function(){this.getInputField().val(t.uLiB.field.Field.prototype.emptyValue).keyup()},n.prototype.getLogHtml=function(){return this.logCmp.getLogHtml()},n.prototype.getEmailToSendChatTo=function(){return this.emailChatForm.getValues().email},n.prototype.getSoundState=function(){var t=this.getFunctionalToolbarCmp().soundBtn;return t?t.state:"off"},n.prototype.getFileUploadCmp=function(){return this.inputCmp.fileUploadCmp},n.prototype.setUploadUrl=function(t){this.getFileUploadCmp().setUploadUrl(t)},n.prototype.requestUploadUrl=function(t){var e=this;Comagic.getUploadUrl&&Comagic.getUploadUrl(function(t){t&&t.success&&e.setUploadUrl(t.result.upload_url)})},n.prototype.pollForUploadUrl=function(e){var n=this,i=(new Date).getTime();if(!this.o.is_preview)if(e&&!n.pollingForUploadUrlIntervalId&&n.isUploadUrlPollingIntervalExpired()){n.pollingStartTime=i;var o=function(){n.requestUploadUrl()};o(),n.pollingForUploadUrlIntervalId=t.setInterval(o,n.uploadUrlPollingInterval)}else e||(n.pollingStartTime=0,t.clearInterval(n.pollingForUploadUrlIntervalId),n.pollingForUploadUrlIntervalId=null)},n.prototype.setIsMinimized=function(t){o.storageSet("isMinimized",t,!1)},n.prototype.getIsMinimized=function(){return o.storageGet("isMinimized")},n.prototype.destroyCssLink=function(){o.removeCssSkinLink(this.o)},o.apply(o.ns(e),{MainConsultantPanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t){this.addCls("consultant-simple"),this.ftype=this.ctype,t.banner_place&&(o.arrayIsContain(t.banner_place.split("_"),"bottom")?(this.resizeHandleElementTop=o.sformat('<div class="{0}"/>',o.getCssSelector(this.resizableCls,!0)),this.addCls("resizable-top")):(this.resizeHandleElementBottom=o.sformat('<div class="{0}"/>',o.getCssSelector(this.resizableCls,!0)),this.addCls("resizable-bottom"))),n.superclass.constructor.apply(this,arguments),this.resizableCt=this.getChildEl(this.resizableCls),this.resizableCt.length&&(this.resizableCt[0].onmousedown=o.bind(this.onResizeStart,this),document.onmouseup=o.bind(this.onResizeEnd,this),document.onmousemove=o.bind(this.onResizeMove,this)),this.headerCt[0].onmousedown=o.bind(this.closeSettingsMenuPanel,this),this.footerCt[0].onmousedown=o.bind(this.closeSettingsMenuPanel,this),this.state.isAlreadyRated&&this.getItem(l)&&this.getItem(l).getEl().hide()}var i=t.uLiB,o=i.util,r=i.el.Element,s=i.cmp.CallButton,a=ComagicWidget.widget.common.form.CommonFormPanel,l=ComagicWidget.widget.consultant.cmp.OperatorRatingCmp,c=ComagicWidget.widget.consultant.cmp.SimpleInputCmp,u=ComagicWidget.widget.consultant.cmp.Log,p=uLiB.cmp.LinklikeButton,d=(uLiB.cmp.FunctionalButton,i.cmp.FileUpload),h=ComagicWidget.widget.consultant.cmp.SimpleSoundButton;uLiB.$;o.extend(n,"ComagicWidget.widget.consultant.form.MainConsultantPanel"),n.prototype.elementsToRender=["tools","header","items","sendChatByEmailContainer","inputCmpPlaceholder","footer"],n.prototype.html='<div style="height: 380px;"><div class="{toolsCls}"/><div class="{containerCls}">{resizeHandleElementTop}<div class="{headerCls}"><span class="{operatorAvatarWrapperCls}"><img src="{blankImgSrc}" class="{operatorAvatarCls}"></span><div class="{operatorInfoCls}"><div class="{operatorNameCls}"/><div class="{operatorPositionCls}"/></div><div class="{callBtnPlaceholderCls}"/></div><div class="{itemsCls}"/><div class="{sendChatByEmailContainerCls}"/><div class="{inputCmpPlaceholderCls}"/><div class="{footerCls}"/></div>{resizeHandleElementBottom}</div>',n.prototype.emailChatCmpAnimationKey="simple-email-chat-cmp",n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="consultant-simple",n.prototype.hasGlobalState=!0,n.prototype.renderItems=function(){var t=[{__class:u}];this.is_consultant_operator_rating&&!this.operator_rating&&t.push({__class:l}),this.items=t,a.prototype.renderItems.apply(this,arguments),this.logCmp=this.getItem(u)},n.prototype.renderHeader=function(){this.o.is_callback_schedule_active&&o.hasConnectWayEnabled.call(this,o.C.CW_SITE_PHONE)&&(this.callBtn=new s({action:"open-site-phone",text:"Позвонить"}),this.getInnerEl(this.callBtnPlaceholderCls).replaceWith(this.callBtn.getEl()))},n.prototype.renderFooter=function(){this.footerCt.addClass("consultant-panel");var t=[{text:"Распечатать чат...",action:"print",ctype:"functional-button-print"},{text:"Отправить чат на почту...",action:"email-chat",ctype:"functional-button-email"}];t.unshift(this.fileUploadCmp=new d({text:"Прикрепить файл...",onReceive:o.bind(this.onFileReceive,this),validExtensions:o.C.VALID_FILE_EXTENSIONS})),o.supportAudio()&&t.push(new h({stateId:"consultant-simple-sound-btn",onClick:o.bind(this.onSimpleSoundButtonClick,this)})),this.settingsBtn=new p({text:"Настройки",cls:"settings-button",menu:{items:t,o:this.o,cls:"simple-consultant-settings-menu",onItemClick:o.bind(this.onMenuItemClick,this)},renderTo:this.footerCt}),this.o.banner_branding_text&&this.o.banner_branding_url&&new r({tag:"div",cls:"link-panel",children:[{tag:"a",href:this.o.banner_branding_url,target:"_blank",cls:"link",text:this.o.banner_branding_text}],renderTo:this.footerCt})},n.prototype.closeSettingsMenuPanel=function(){this.settingsBtn.menu.isVisible()&&(this.settingsBtn.menu.show(!1),this.settingsBtn.changeState("off"))},n.prototype.renderInputCmpPlaceholder=function(){this.inputCmpPlaceholderCt.replaceWith((this.inputCmp=new c({onTextareaHeightSet:o.bind(this.onMainInputTextareaHeightSet,this),animationKey:"simple-input-cmp",parentCmp:this})).getEl())},n.prototype._onClick=function(t,e,n,i,o,r){var s=this;if("consultant--text-button"!==e&&this.closeSettingsMenuPanel(),"functional-button-email"===n)this.toggleEmailChatFormVisibility();else if("functional-button-thumb-up"===n||"functional-button-thumb-down"===n){var a="functional-button-thumb-up"===n?5:1,c=this.getItem(l);this._onRateOperatorFieldRate(a),this.state.isAlreadyRated=!0,this.saveState(),c.getEl().hide({effect:"fade",duration:uLiB.util.AnimationManager.durationInnerFade,easing:uLiB.util.AnimationManager.easing,complete:function(){s.adjustLogHeight()}})}else"text-button-cancel"===n?this.toggleEmailChatFormVisibility(!1):"common-button-send-chat-by-email"===n&&this.emailChatForm.isValid()&&this.toggleEmailChatFormVisibility(!1)},n.prototype.toggleEmailChatFormVisibility=function(t){void 0===t&&(t=!0),this.emailChatForm.show(t,this.animationEnabled),this.inputCmp.show(!t,this.animationEnabled),this.itemsCt[t?"hide":"show"]({effect:"fade",duration:50}),this.footerCt[t?"hide":"show"]({effect:"fade",duration:50})},n.prototype.getSoundState=function(){var t=this.settingsBtn.menu.getItem("toggle-sound");return t?t.state:"off"},n.prototype.onMenuItemClick=function(t,e){var n=[this,"",t.ctype];this._onClick.apply(this,n),this.__onClick.apply(this,n),"toggle-sound"===e&&this.turnSoundOn("on"===this.getSoundState())},n.prototype.show=function(t){n.superclass.show.apply(this,arguments),t||this.settingsBtn.menu.show(!1)},n.prototype.onSimpleSoundButtonClick=function(t,e,n,i,o,r){this.onMenuItemClick(t,t.action)},n.prototype.getFileUploadCmp=function(){return this.fileUploadCmp},o.apply(o.ns(e),{SimpleConsultantPanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t){this.addCls("visitor-info-request"),this.buttonText="Начать чат",n.superclass.constructor.call(this,t,{message:"Операторы нашей компании готовы вам помочь"})}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.DynamicFormPanel;uLiB.$;o.extend(n,r),n.prototype.ctype=o.C.CW_VISITOR_INFO_REQUEST,n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="visitor-info-request",n.prototype.hasGlobalState=!0,n.prototype.markRequiredFields=!0,o.apply(o.ns(e),{VisitorInfoRequestPanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(){function t(e){if(e=this.processParams(e),this.o=e,o.apply(this,e),o.addCssLink(e),e.renderTo=e.renderTo||"body",this.comagicWebUrl=e.comagic_web_url||"",this.companyLogoUrl=this.buildUrl(e.company_logo_url),this.cmpConfig=o.apply({_onClick:o.bind(this.onComponentClick,this),_onKeyup:o.bind(this.onComponentKeyup,this),_onKeydown:o.bind(this.onComponentKeydown,this),comagicObj:this,cw_site_phone_title:"Позвонить бесплатно",cw_consultant_title:"Спросить оператора",cw_site_request_title:"Задать вопрос",monitorResize:!0},e),e.is_using_standard_banner&&(e.is_preview||o.haveToDisplayLabelOnDevice(e.banner_visibility))){var n=this.getBannerClass(e);this.activeComponent=this.labelCmp=new n(o.apply({zIndex:0},this.cmpConfig))}this.labelCmp&&(this.labelCmp.onExpand=o.bind(this.onBannerExpand,this)),this.sitePhoneCmp=new(this.getFormPanelClass(o.C.CW_SITE_PHONE))(this.cmpConfig),this.siteRequestCmp=new(this.getFormPanelClass(o.C.CW_SITE_REQUEST))(this.cmpConfig),this.consultantCmp=new(this.getFormPanelClass(o.C.CW_CONSULTANT))(this.cmpConfig),this.consultantCmp.onRateOperatorFieldRate=o.bind(this._onOperatorRate,this),this.consultantCmp.onTextAreaChange=o.bind(this._onConsultantTextAreaChange,this),this.visitorInfoCmp=new(this.getFormPanelClass(o.C.CW_VISITOR_INFO_REQUEST))(this.cmpConfig),t.prototype.instance=this}function e(){o.apply(window,{ConsultantDesktop:t,Component:s,ComponentManager:c,getURLParameter:o.getURLParameter,PopupMessage:a,getC:function(){return c.get("comagic-cmp-0").o},getBC:function(){return t.prototype.instance.getCmp("label")},getBO:function(){return t.prototype.instance},getU:function(){return o}})}var n=window.uLiB,i=window,o=n.util,r=uLiB.$,s=(i.__cs||i.Comagic,n.cmp.Component),a=n.cmp.PopupMessagePanel,l=n.cmp.ModalPanel,c=n.cmp.ComponentManager,u=(ComagicWidget.widget.consultant.form.ConsultantPreviewPanel,ComagicWidget.widget.consultant.form.MainConsultantPanel),p=n.field.TextField,d=n.cmp.StandardButton;t.prototype.getBannerClass=function(t){var e=t.banner_size;return ComagicWidget.widget.consultant.label[{full_size:"Banner",slider:"Slider",button:"Buttons",buttons:"Buttons"}[e]]},t.prototype.getFormPanelClass=function(t){return{consultant:"main"===this.banner_skin?ComagicWidget.widget.consultant.form.MainConsultantPanel:ComagicWidget.widget.consultant.form.SimpleConsultantPanel,site_phone:ComagicWidget.widget.consultant.form.SitePhonePanel,site_request:ComagicWidget.widget.consultant.form.SiteRequestPanel,visitor_info_request:ComagicWidget.widget.consultant.form.VisitorInfoRequestPanel}[t]},t.prototype.processParams=function(t){for(var e,n=[{fn:o.stripTags,params:["cw_site_phone_title","cw_consultant_title","cw_site_request_title","banner_label"]}],i=0;e=n[i];i++)for(var r,s=0;r=e.params[s];s++)t[r]&&(t[r]=e.fn(t[r]));return t},t.prototype.onBannerExpand=function(t){var e=uLiB.util.CookieShop;e&&e.set(e.BANNER_STATE,{state:t})},t.prototype.submitCmp=function(t){t.isValid()&&(this._onCmpSubmit(t,t.getValues()),t.ctype==o.C.CW_VISITOR_INFO_REQUEST&&(this.is_require_form=!1,this.openCmp("consultant",this.o)))},t.prototype.onComponentKeydown=function(t,e,n,r){o.log("onComponentKeyDown",arguments);var s=r.keyCode,a=r.ctrlKey,l=r.metaKey,c=r.shiftKey;if(13==s&&"site_phone--field"===e)this.submitCmp(t);else if(13==s&&(a||l))t.isValid()&&this._onCmpSubmit(t,t.getValues());else if(13==s&&"consultant--email-chat-cmp--field"===e)t.emailChatForm.isValid()&&this.onSendChatByEmail(t.emailChatForm.getValues(),ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(t));else{if(13==s&&!c&&(o.isinstance(t,ComagicWidget.widget.consultant.form.MainConsultantPanel)||o.isinstance(t,ComagicWidget.widget.consultant.form.SimpleConsultantPanel)))return t.isValid()&&this._onCmpSubmit(t,t.getValues()),i.setTimeout(function(){t.getInputField().keydown()},100),!1;if(e.split("--")[0]===o.C.CW_CONSULTANT){var u=this;void 0===this.chatTypingNotificationTimeoutId&&(this.onChatTyping(),this.chatTypingNotificationTimeoutId=i.setTimeout(function(){u.chatTypingNotificationTimeoutId=void 0},2e4))}}},t.prototype.onComponentKeyup=function(t,e,n,i){o.log("onComponentKeyup",arguments)},t.prototype.onComponentClick=function(t,e,n,i){if(o.log("onComponentClick",arguments),"tool-button-close"==n)this._onCmpClose(t),"consultant_preview"==t.ctype&&ComagicWidget.widget.common.Api&&ComagicWidget.widget.common.Api.sendMessage("reject_invite"),t instanceof l&&t.destroy(),t instanceof l||(o.storageGet("consultant-to-sitephone")?(o.storageSet("consultant-to-sitephone",!1),this.openCmp("consultant")):this.openCmp("label")),"consultant--tool-button-close"===e&&this.onChatClose();else if(o.arrayIsContain(["standard-button-send","common-button-send"],n)&&!this.is_preview)this.submitCmp(t);else if("tool-button-unpin"==n&&t instanceof u&&!this.is_preview)this.openCmp("label"),this.onChatPopup(t);else if("collapser"==n)this.labelCmp&&this.labelCmp.expand(!1);else if("expander"==n)this.labelCmp&&this.labelCmp.expand(!0);else if("collapser"==n&&o.isinstance(t,"ComagicWidget.widget.consultant.label.AbstractLabel"))this.labelCmp&&this.labelCmp.expand(!1);else if(o.inArray(n,["site_phone","site_request","consultant"])!=-1)"consultant"===n&&this.getCmp(n).getIsMinimized()&&this.getCmp(n).setIsMinimized(!1),this.openCmp(n,this.o);else if("small-button-email"!=n||this.is_preview)"standard-button-email-chat"!=n||this.is_preview?"common-button-send-chat-by-email"!=n||this.is_preview?o.arrayIsContain(["functional-button-print","small-button-print"],n)&&!this.is_preview?this._printChatLog(t):"text-button-refresh-captcha"===n?t.refreshCaptcha():"call-button-open-site-phone"===n?(this.getCmp("consultant").setIsMinimized(!0),this.openCmp(o.C.CW_SITE_PHONE,this.o),o.storageSet("consultant-to-sitephone",!0)):"tool-button-minimize"===n?(this.getCmp("consultant").setIsMinimized(!0),this.openCmp("label")):"consultant-log"===n&&o.hasCls(i.target,"chat-retention")&&(this.onChatRetentionBtnClick(),o.hasCls(i.target,"open-site-phone")&&this.openCmp(o.C.CW_SITE_PHONE,this.o),o.hasCls(i.target,"open-site-request")&&this.openCmp(o.C.CW_SITE_REQUEST,this.o)):t.emailChatForm.isValid()&&this.onSendChatByEmail(t.emailChatForm.getValues(),ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(t)):t.isValid()&&(this.onSendChatByEmail(t.getValues(),ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(t)),t.destroy());else{var r="Отправить чат на эл. почту";new l({target:t,title:r,trackClick:!0,items:[{__class:p,allowBlank:!1,validators:["email"],name:"email",label:r},{__class:d,text:"Ok",action:"email-chat"}],_onClick:o.bind(this.onComponentClick,this)})}},t.prototype._printChatLog=function(t){u.prototype._printChatLog.apply(t)},t.prototype._hideAllCmps=function(){var t=this._getCmps();for(var e in t)t.hasOwnProperty(e)&&t[e].show&&t[e].show(!1)},t.prototype._getCmps=function(){this._cmps={};for(var t in this)this.hasOwnProperty(t)&&o.endsWith(t,"Cmp")&&this[t].getEl()&&(this[t].skipCmp||(this._cmps[this[t].ctype]=this[t]));return this._cmps},t.prototype.getCmp=function(t,e){var n=this._getCmps()[t];return n||(n=this.makeCmp(t,e)),n},t.prototype.makeCmp=function(t,e){var n=c.create(o.apply({ctype:t},this.o,this.cmpConfig),e);return this[o.camelize(t)+"Cmp"]=n,n},t.prototype.openModalCmp=function(t,e){o.log("openModalCmp",t,e);var n=this.getCmp(t,e);this._onCmpOpen(n,e)},t.prototype.haveToDisplayLabel=function(){return this.is_using_standard_banner&&(this.is_preview||o.haveToDisplayLabelOnDevice(this.banner_visibility))&&(this.is_preview||Comagic.getOperatorStatus()||!this.is_not_showing_unactive_banner)},t.prototype.openCmp=function(t,e){if(o.log("openCmp",t,e),"label"==t&&!this.haveToDisplayLabel())return void this._hideAllCmps();e&&e.is_operator_invite||"consultant"!=t||!this.is_require_form||!Comagic.getOperatorStatus()||(t=o.C.CW_VISITOR_INFO_REQUEST);var n=this.getCmp(t,e);"consultant"==t&&(n.setIsMinimized(!1),e&&e.is_operator_invite&&(n.isShowMinimizeButton=!1),e=e&&e.is_operator_invite?null:e),this.activeComponent===n&&this.activeComponent.isVisible()||(this._hideAllCmps(),this.activeComponent=n,this.activeComponent&&this.activeComponent.show(!0),this._onCmpOpen(this.activeComponent,e))},t.prototype.buildUrl=function(t){return t=t||"",o.startsWith(t,["http://","https://","ftp://","//"])?t:o.startsWith(t,"/")?this.comagic_web_url+t:""},t.prototype.invite=function(t){},t.prototype.activate=function(t){this.labelCmp&&this.labelCmp.activate(t)},t.prototype.destroy=function(){var e=this._getCmps();for(var n in e)e.hasOwnProperty(n)&&e[n].destroy();t.prototype.instance=null},t.prototype.loadHistory=function(t){this.getCmp("consultant").loadHistory(t)},t.prototype.setOperator=function(t,e,n,i){var o=this.getCmp("consultant");o.setOperator(t,e,n),o.setFileTransferEnable(i)},t.prototype.setFileTransferEnable=function(t){this.getCmp("consultant").setFileTransferEnable(t)},t.prototype.show=function(t){o.log("ConsultantDesktop.prototype.show",t,this.activeComponent),this.activeComponent&&this.activeComponent.getEl()&&this.activeComponent.show(t)},t.prototype._onCmpOpen=function(t,e){var n=t.ctype;switch(this.onCmpOpen(n,e,t),n){case"consultant":this.onChatOpen(e);break;case"site_phone":ComagicWidget.widget.common.Api&&ComagicWidget.widget.common.Api.trackSysEvent({component_event:"callme_first_click"})}},t.prototype._onCmpSubmit=function(t,e){o.log("ConsultantDesktop.prototype._onCmpSubmit",arguments);var n=this,i=t.ctype;switch(t.disableSendBtnOnSubmit&&t.setSendBtnDisabled(!0),this.onCmpSubmit(i,e,t),i){case o.C.CW_VISITOR_INFO_REQUEST:ComagicWidget.widget.common.Api&&ComagicWidget.widget.common.Api.sendMessage("set_form_data",e);break;case o.C.CW_SITE_REQUEST:Comagic.push(["addOfflineRequest",[e,!1,ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(t,function(e){n._onCmpSubmitResponse(t,e)})]]);break;case o.C.CW_SITE_PHONE:Comagic.sitePhoneCall(e,ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(t,function(e){n._onCmpSubmitResponse(t,e)}));break;case o.C.CW_CONSULTANT:ComagicWidget.widget.common.Api&&ComagicWidget.widget.common.Api.sendMessage("message",e),this.onConsultantSubmit(e)}t.clearOnSubmit&&t.clearValues()},t.prototype._onCmpSubmitResponse=function(t,e){var n=e.result;if(uLiB.$.isPlainObject(n)&&(n=n.code),"121"===n)t.refreshCaptcha();else if("010"===n||"110"===n)t.toggleEmailChatFormVisibility(!1);else{var r=this.getCmp("label");o.isinstance(r,i.ComagicWidget.widget.consultant.label.Slider)&&r.expand(!1),o.storageGet("consultant-to-sitephone")?(o.storageSet("consultant-to-sitephone",!1),this.openCmp("consultant")):this.openCmp("label");
}},t.prototype._onCmpClose=function(t,e){var n=t.ctype;this.onCmpClose(n,e,t)},t.prototype.onComagicMessage=function(t){"invite"==t.state&&"Оператор"==t.source?(this.setOperator(t.from,t.file_link,t.operator_position,t.message),this.openCmp("consultant",{is_operator_invite:!0})):"invite"==t.state&&t.hasOwnProperty("operator_name")&&t.hasOwnProperty("file_link")&&(this.setOperator(t.operator_name,t.file_link,null,t.message),this.openCmp("consultant"));var e=this.getCmp("consultant");e.getIsMinimized()&&"label"===this.activeComponent.ctype&&this.openCmp("consultant"),e.setTypeNotifier(!1),e.addLogRecord(t),e.playSound&&e.playSound(t)},t.prototype.onInvite=function(t){this.getCmp("consultant").isLogEmpty()||this.openCmp(t.show_chat?"consultant":"label",t)},t.prototype.onComagicWriteNotify=function(){this.getCmp("consultant").setTypeNotifier()},t.prototype.onCloseChat=function(){var t=this;"site-phone"!==t.activeComponent.ftype&&"site_request"!==t.activeComponent.ftype&&(t&&t.openCmp("label"),t.setOperator(" ",null," ",!1))},t.prototype._onConsultantTextAreaChange=function(t){ComagicWidget.widget.consultant.Consultant.isChatWatch()&&ComagicWidget.widget.common.Api&&ComagicWidget.widget.common.Api.sendMessage("current_message",{message:t})},t.prototype.onConsultantSubmit=function(t){o.log("EMPTY template onConsultantSubmit",arguments)},t.prototype.onChatOpen=function(){o.log("EMPTY template onChatOpen",arguments)},t.prototype.onChatClose=function(){o.log("EMPTY template onChatClose",arguments)},t.prototype.onChatPopup=function(){o.log("EMPTY template onChatPopup",arguments)},t.prototype.onExpand=function(t){o.log("EMPTY template onExpand",arguments)},t.prototype.onCmpOpen=function(t,e,n){o.log("EMPTY template onCmpOpen",arguments)},t.prototype.onCmpSubmit=function(t,e,n){o.log("EMPTY template onCmpSubmit",arguments)},t.prototype.onCmpClose=function(t,e,n){o.log("EMPTY template onCmpClose",arguments)},t.prototype.onSendChatByEmail=function(t,e){o.log("EMPTY template onSendChatByEmail",arguments)},t.prototype._onOperatorRate=function(t){Comagic.setOperatorRating(t)},t.prototype.onChatTyping=function(){o.log("EMPTY template onChatTyping",arguments)},t.prototype.onGetConsultantHistory=function(t,e){o.log("EMPTY template onGetConsultantHistory",arguments)},o.apply(o.ns("ComagicWidget.widget.consultant"),{ConsultantView:{create:function(e){return new t(e)}}}),o.__debug===!0&&e(),r(window).bind("hashchange",function(){o.getHashParameter("bannerdebug")&&(o.__debug=!!o.getHashParameter("bannerdebug"),e())}),o.log("banner done")}(),function(){function t(){return{main:"width=268,height=402",simple:"width=260,height=380",mobile:""}[f.banner_skin]}function e(e,n){var i=new uLiB.util.URL("//"+ComagicWidget.settings.webHost()),o=ComagicWidget.settings,r={site_key:o.key(),hit_id:ComagicWidget.widget.analytics.Analytics.getHitId(),comagic_id:ComagicWidget.widget.analytics.Analytics.getComagicId(),join:1,parent_href:window.location.href,server:o.host(),bannerdebug:uLiB.util.getDebugParam("encodejson"),time_delta:ComagicWidget.widget.common.Ws.getTimeDelta(),comagic_web_url:uLiB.util.getDebugExternalChatComagicWebUrl()||ComagicWidget.settings.webHost(),pl:v.getDeviceType().toLowerCase()},s=n||{};for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);window.open(i.replace({query:r,path:"/ss/widget/"}),"",t()+",scrollbars=yes,resizable=yes,location=no,status=no")}function n(t,e){Comagic.sendChatByMail(t,e)}function i(t){if(u){if("mobile"===c.banner_skin)return void c.onChatPopup(null,{action:"consultant",is_touch:!0});t&&"online"===h&&Comagic.startVisitorChat(),t&&"in_chat"===h&&c.openCmp("consultant")}else s()}function o(){Comagic.closeChat()}function r(t,n){e(t,n)}function s(){c&&c.openCmp("site_request")}function a(){Comagic.onChatTyping()}function l(){ComagicWidget.widget.common.Api.sendMessage("close_chat")}window.console||(window.console={}),window.console.log||(window.console.log=function(){});var c,u,p,d,h,f,g=["online","in_chat","invite"],m=!1,y=!1,v=uLiB.util,C=uLiB.util.EventBus;try{window.__cs_onReplacePhones=window.__cs_onReplacePhones||function(t){return!0};var b={__commands:["openChatWindow","openSitePhonePanel","openSiteRequestPanel"],init:function(){var t=this;C.on({"ws:socketopen":t.onWsSocketOpen,"ws:socketclose":t.onWsSocketClose,"rpc:init_consultant":t.onRpcInitConsultant,"rpc:refresh_state":t.onRpcRefreshState,"rpc:message":t.onRpcMessage,"rpc:close_chat":t.onRpcCloseChat,"rpc:set_operator_rating":t.onRpcSetOperatorRating,"rpc:show_chat":t.onRpcShowChat,"rpc:connected":t.onRpcConnected,"rpc:show_open_url_dialog":t.onRpcShowUrlDialog,"rpc:hide_open_url_dialog":t.onRpcHideUrlDialog,"rpc:write_notify":t.onRpcWriteNotify,"rpc:chat_watch":t.onRpcChatWatch,"rpc:operator_reject":t.onRpcOperatorReject,"rpc:update_operator":t.onRpcUpateOperator,"rpc:show_chat_retention_action":t.onRpcShowChatRetentionAction,"rpc:enable_comagic":t.onRpcEnableComagic,"rpc:disable_comagic":t.onRpcDisableComagic,"rpc:pong":t.onRpcPong,scope:t}),uLiB.util.Queue.registerAndProcess(this.__commands,this,!0)},onWsSocketOpen:function(t){m&&(this.sendConsultantPresence(),c.show(!0))},onWsSocketClose:function(t){m&&c.show(!1),d=!1},onRpcInitConsultant:function(t,e){this.bannerParams=e,!this.initialized&&this.initConsultant(e)},onRpcRefreshState:function(t,e){switch(h=e.state,"chat_watch"in e&&(y=e.chat_watch),e.state){case"offline":m&&this.onOfflineState(e);break;case"online":m&&this.onOnlineState(e);break;case"in_chat":m&&this.onInChatState(e);break;case"invite":m&&this.onInviteState(e)}},onRpcMessage:function(t,e){e.state&&(h=e.state,this.notifyOperatorStatusChange(v.arrayIndexOf(g,h)>-1)),c.onComagicMessage(e)},onRpcCloseChat:function(t,e){c&&c.onCloseChat()},onRpcSetOperatorRating:function(t,e){c.getCmp("consultant").setOperatorRating(e.rating)},onRpcShowChat:function(t,e){c.openCmp("consultant")},onRpcConnected:function(t,e){var n=c.getCmp("consultant");n&&(n.setOperator(e.operator_name,e.avatar,e.operator_position,e.is_file_transfer_available),n.getConsultantLogCmp().hideAlternateCommunicationButtons())},onRpcShowUrlDialog:function(t,e){p=new ComagicWidget.widget.consultant.cmp.OpenUrlDialog(e.url,function(){ComagicWidget.widget.common.Api.sendMessage("open_url_accepted")},function(){ComagicWidget.widget.common.Api.sendMessage("open_url_canceled")}),p.show()},onRpcHideUrlDialog:function(t,e){p&&p.hide()},onRpcWriteNotify:function(t,e){c.onComagicWriteNotify()},onRpcChatWatch:function(t,e){y=e.enabled},onRpcOperatorReject:function(t,e){c.setOperator(" ",null," ",!1)},onRpcUpateOperator:function(t,e){c.setFileTransferEnable(e.operator.is_file_transfer_avaiable)},onRpcShowChatRetentionAction:function(t,e){var n=c.getCmp("consultant");n&&n.getConsultantLogCmp().showChatRetentionAction(e.communication_way)},onRpcEnableComagic:function(t,e){!m&&this.initConsultant(f)},onRpcDisableComagic:function(t,e){c&&(c.show(!1),c.destroy())},onRpcPong:function(t,e){},notifyOperatorStatusChange:function(t){u=t,C.fireEvent("consultant:operatorstatuschange",this,t);try{Comagic.onOperatorStatusChange(t)}catch(e){v.log(e)}},onOfflineState:function(t){this.notifyOperatorStatusChange(!1),c.activate(!1)},onOnlineState:function(t){this.notifyOperatorStatusChange(!0),c.activate(!0)},onInChatState:function(t){this.notifyOperatorStatusChange(!0),t.show_chat&&!uLiB.util.storageGet("isMinimized")?c.openCmp("consultant"):(c.activate(!0),c.openCmp("label"))},onInviteState:function(t){this.notifyOperatorStatusChange(!0),t.state&&(h=t.state),c.onInvite(t)},sendConsultantPresence:function(){d||(Comagic.push(["visitorInsite"]),d=!0)},initConsultant:function(t){var e=this;ComagicCaptcha&&(window.Comagic.Captcha=new ComagicCaptcha(v.sformat("https://{0}/{1}",ComagicWidget.settings.webHost(),t.api_path))),v.isNs("ComagicWidget.widget.consultant.ConsultantView")?(v.apply(t,{comagic_web_url:ComagicWidget.settings.webHost()}),f=t,uLiB.$(window.document).ready(function(){c=ComagicWidget.widget.consultant.ConsultantView.create(t),c.onChatOpen=i,c.onChatClose=o,c.onChatPopup=r,c.onSendChatByEmail=n,c.onChatTyping=a,c.onChatRetentionBtnClick=l,m=!0,e.banner=c,c.loadHistory(t.messages),t.operator&&c.setOperator(t.operator.operator_name,t.operator.avatar,t.operator.operator_position,t.operator.is_file_transfer_available),e.sendConsultantPresence()})):setTimeout(function(){e.initConsultant(t)},100)},getOperatorStatus:function(){return u},onChatClose:function(){ComagicWidget.widget.common.Api.closeChat()},isReady:function(){return m},openChatWindow:function(){i({})},openSiteRequestPanel:function(){c&&c.openCmp("site_request")},openSitePhonePanel:function(){c&&(c.o.is_callback_schedule_active?c.openCmp("site_phone"):this.openSiteRequestPanel())},isChatWatch:function(){return y}};b.init(),v.apply(v.ns("ComagicWidget.widget.consultant"),{Consultant:b})}catch(w){console.log(w)}}(),this.uLiB=this.uLiB||{},this.uLiB.lead=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n=window.webpackJsonpuLiB__name_;window.webpackJsonpuLiB__name_=function(i,r){for(var s,a,l=0,c=[];l<i.length;l++)a=i[l],o[a]&&c.push.apply(c,o[a]),o[a]=0;for(s in r)t[s]=r[s];for(n&&n(i,r);c.length;)c.shift().call(null,e)};var i={},o={0:0};return e.e=function(t,n){if(0===o[t])return n.call(null,e);if(void 0!==o[t])o[t].push(n);else{o[t]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e.p+"chunks/bbf52dfe03b4ac69ef17.chunk.js",i.appendChild(r)}},e.m=t,e.c=i,e.p="",e(0)}([function(t,e,n){"use strict";function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];t.unshift("[Lead]"),p.log.apply(p,t)}var o=n(1),r=ComagicWidget&&ComagicWidget.settings&&ComagicWidget.settings.webHost()||window.location.hostname;n.p="//"+r+"/static/banner/build/js/";var s,a,l,c=window,u=uLiB,p=u.util,d=function(){function t(){this.formDefaults={},this.forms={},this.hidedFormIds=[],this.visitorState="",this.registerWidget(),this.bindBusHandlers()}return t.prototype.onTimerUp=function(t){Comagic.onLeadTimerUp(t)},t.prototype.setTimers=function(t,e){if(void 0===e&&(e=!1),i("setTimers(",t,")","this.timers:",this.timers,"isUpdate:",e),this.timers&&e||(this.timers={}),t)for(var n in t)t.hasOwnProperty(n)&&(this.timers[n]=c.setTimeout(p.bind(this.onTimerUp,this,[n]),1e3*t[n]))},t.prototype.initActions=function(t){i("initActions(",t,")"),t&&p.arrayForEach(t,this.doAction,this)},t.prototype.refreshTimers=function(t,e){this.cleanupTimers(),this.setTimers(t,e)},t.prototype.cleanupTimers=function(){for(var t in this.timers)this.timers.hasOwnProperty(t)&&c.clearTimeout(this.timers[t])},t.prototype.bindBusHandlers=function(){this.eventBus=uLiB.util.EventBus,this.eventBus&&(this.eventBus.on("rpc:init_lead",this.onRpcInitLead,this),this.eventBus.on("rpc:refresh_state",this.onRpcRefreshState,this),this.eventBus.on("rpc:message",this.onRpcMessage,this),this.eventBus.on("rpc:refresh_timers",this.onRpcRefreshTimers,this),this.eventBus.on("rpc:show_lead_form",this.onRpcShowLeadForm,this),this.eventBus.on("rpc:hide_lead_form",this.onRpcHideLeadForm,this),this.eventBus.on("ulib:event",this.onUlibEvent,this))},t.prototype.onRpcInitLead=function(t,e){ComagicWidget.widget.analytics.Analytics.isComagicEnabled()&&(this.setTimers(e.timers),this.initActions(e.actions))},t.prototype.onRpcRefreshState=function(t,e){this.visitorState=e.state},t.prototype.onRpcMessage=function(t,e){e.state&&(this.visitorState=e.state)},t.prototype.onRpcRefreshTimers=function(t,e){this.refreshTimers(e.timers,e.update)},t.prototype.onRpcShowLeadForm=function(t,e){ComagicWidget.widget.analytics.Analytics.isComagicEnabled()&&this.doAction(e)},t.prototype.getCurrenCmp=function(t){return this.forms[t]},t.prototype.onRpcHideLeadForm=function(t,e){this.hideWidget(e)},t.prototype.doAction=function(t){"auto_invite"!==t.action_type&&(t.settings.is_show_on_close?this.trackMouseForShowForm(t):this.showWidget(t))},t.prototype.showWidget=function(t){i(".showWidget(",t,")");var e=this;t.settings.log_id=t.log_id;var n=this.getWidget(t);return!n.isModal&&setTimeout(function(){e.formDefaults.is_preview?n.getEl().show():n.show()},150),n},t.prototype.getWidget=function(t){var e=this.forms[t.log_id];return e||(e=this.forms[t.log_id]=this.createWidget(t)),e},t.prototype.createWidget=function(t){var e=this.comagic_web_url||ComagicWidget.settings.webHost();return p.arrayIndexOf(["personal_form","call_generator"],t.action_type)!==-1&&p.addLeadgenCssLink({comagic_web_url:e}),u.cmp.ComponentManager.create(p.apply({ctype:t.action_type,is_lead_gen_preview:this.is_lead_gen_preview,is_preview:this.is_lead_gen_preview,eventBus:this.eventBus,comagic_web_url:e}),p.apply(t.settings,this.formDefaults))},t.prototype.registerWidget=function(){this.formsRegistered||(u.cmp.ComponentManager.registerCType(s),u.cmp.ComponentManager.registerCType(a),u.cmp.ComponentManager.registerCType(l),this.formsRegistered=!0)},t.prototype.hideWidget=function(t){var e=this.forms[t.log_id];this.hidedFormIds.push(t.log_id),e&&!e.hasBeenSubmitted&&this.closeLeadForm(e)},t.prototype.trackMouseForShowForm=function(t){var e=this;if(ComagicWidget.widget.analytics.Analytics.isComagicEnabled()){var n=null,i=null,o=null,r=!1,s=350,a=function(l){if(r)return void uLiB.$("body").unbind("mousemove",a);var c=l.screenY,u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0;if(c>2*u/3||null!==i&&c>=i)return n=null,i=null,void(o=null);if(null===n)return n=+new Date,void(i=c);var d=+new Date,h=d-n;if(!(h<5)){var f=Math.abs(c-i),g=f/h,m=g-o,y=m/h;1e3*y>s&&p.arrayIndexOf(["lead","invite","in_chat"],e.visitorState)===-1&&(e.onClosePageAttemptDetected(t),r=!0),n=d,i=c,o=g}};uLiB.$("body").bind("mousemove",a)}},t.prototype.onClosePageAttemptDetected=function(t){p.arrayIndexOf(this.hidedFormIds,t.log_id)===-1&&(this.showWidget(t),this.trackFormShowOnServer(t))},t.prototype.trackFormShowOnServer=function(t){Comagic.trackLeadShow({action_type:t.action_type,action_log_id:t.log_id})},t.prototype._startCall=function(t){t.isValid()&&Comagic.onLeadFormSubmit(t.s.log_id,t.getValues(),this.getOnFormSubmitCallback(t.s.log_id))},t.prototype.onUlibEvent=function(t,e,n,i,r,s){var a=e.split("--")[0],l=t.getParentByCType(a);if(l&&l.isLeadForm&&!l.is_preview)if("call_generator--field"===e&&"keydown"===i.type&&13==i.keyCode&&this._startCall(l),"common-button-send"===n&&"click"===i.type)l.currentStep===o.CURRENT_STEP.INVITE?l.endInviteStep():this._startCall(l);else if("tool-button-close"===n){if(l.is_preview)return;this.closeLeadForm(l),l.hasBeenSubmitted||Comagic.onLeadFormCancel(l.s.log_id)}},t.prototype.getOnFormSubmitCallback=function(t){var e=this,n=e.getWidget({log_id:t});return n.getCallback?n.getCallback():ComagicWidget.widget.common.cmp.PopupMessageManager.getCallback(n,e.onNotificationClosed)},t.prototype.onNotificationClosed=function(t,e,n){e._showModal&&e._showModal(!1),e.destroy()},t.prototype.closeLeadForm=function(t){t.isModal?t.destroy():t.hide()},t}();e.Lead=d,n.e(1,function(){s=n(2).PersonalPanel,a=n(4).OfflineMessageForm,l=n(5).CallGeneratorPanel,new d})},function(t,e){"use strict";!function(t){t[t.CANCEL=0]="CANCEL",t[t.BEFORE_ACTIVITES=1]="BEFORE_ACTIVITES",t[t.INVITE=2]="INVITE",t[t.IN_PROCESS=3]="IN_PROCESS",t[t.FEEDBACK=4]="FEEDBACK",t[t.AFTER_ACTIVITES=5]="AFTER_ACTIVITES"}(e.CURRENT_STEP||(e.CURRENT_STEP={})),e.CURRENT_STEP}]),function(t,e){function n(t){this.addCls("site-phone"),this.tools=["close"],this.title="Заказ звонка",this.buttonText="Перезвоните мне",this.items=[{__class:s,name:"phone",placeholder:"Ваш телефон",renderTooltipInside:!0,dontClear:!0,notemptyText:"Укажите телефон",allowBlank:!1}],t.is_captcha_enabled&&this.items.push({__class:a,name:"captcha_val",label:"Введите код с изображения",allowBlank:!1,is_preview:t.is_preview,notemptyText:"Введите код капчи",minLength:4,maxLength:4},{__class:l,action:"refresh-captcha",text:"Обновить код"}),n.superclass.constructor.apply(this,arguments),this.captchaField=t.is_captcha_enabled?this.getItem(a):null}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.common.form.CommonFormPanel,s=i.field.PhoneField,a=i.field.CaptchaField,l=i.cmp.LinklikeButton;uLiB.$;o.extend(n,r),n.prototype.ctype=o.C.CW_SITE_PHONE,n.prototype.ftype="site-phone",n.prototype.nonCaptchaCls="non-captcha",n.prototype.clearOnSubmit=!0,n.prototype.draggable=!0,n.prototype.stateful=!0,n.prototype.stateId="site-phone",n.prototype.hasGlobalState=!0,n.prototype.refreshCaptcha=function(){this.o.is_captcha_enabled&&this.captchaField.refreshCaptcha()},n.prototype.show=function(t){this.getChildEl(this.containerCls)[this.o.is_captcha_enabled?"removeClass":"addClass"](this.nonCaptchaCls),t&&this.refreshCaptcha(),n.superclass.show.apply(this,arguments)},o.apply(o.ns(e),{SitePhonePanel:n})}(window,"ComagicWidget.widget.consultant.form"),function(t,e){function n(t){if(this.opts=t,o.apply(t,{banner_place:t.widget_place,renderTo:"body"}),n.superclass.constructor.apply(this,[t]),this.removeCls("site-phone"),this.addCls("callbutton-site-phone"),o.C.IS_TOUCH_DEVICE){var e=this;setInterval(function(){e.setupZoomedPosition()},50)}}var i=t.uLiB,o=i.util,r=ComagicWidget.widget.consultant.form.SitePhonePanel;uLiB.$;o.extend(n,r),n.prototype.ctype=o.C.CW_SITE_PHONE_FORM,n.prototype.ftype="callbutton-site-phone",n.prototype.nonCaptchaCls="non-captcha",n.prototype.skipCmp=!0,n.prototype.clearOnSubmit=!0,n.prototype.refreshCaptcha=function(){this.opts.is_captcha_enabled&&this.captchaField.refreshCaptcha()},n.prototype._show=function(t){var e=this;t&&(e.getEl().show({effect:"slide",direction:e.getSlideDirection(),duration:300}),e.adjustZIndex())},n.prototype.show=function(t){var e=this;t||(uLiB.$(o.getCssSelector("tipsy",!0,!0)).remove(),this.clearInvalid&&this.clearInvalid()),this.getChildEl(this.containerCls)[this.opts.is_captcha_enabled?"removeClass":"addClass"](this.nonCaptchaCls),t&&this.refreshCaptcha(),t?o.haveToDisplayLabelOnDevice(this.opts.banner_visibility)&&this.opts.is_button_displayed?this.opts.buttonCmp.show(!1,function(){e._show(!0)}):e._show(!0):e.getEl().hide({effect:"slide",direction:e.getSlideDirection(),duration:300,complete:function(){e.opts.is_button_displayed&&e.opts.buttonCmp.show(!0)}})},n.prototype.getSlideDirection=function(){var t=this.opts.banner_place.split("_");return"middle"===t[1]?t[0]:{bottom:"down",top:"up"}[t[1]]},n.prototype.setupZoomedPosition=function(){var t=this.opts.widget_place.split("_"),e=0,n=0,i="top";this.getEl().css("position","absolute"),t.indexOf("left")!==-1&&(e=window.pageXOffset),t.indexOf("right")!==-1&&(e=window.innerWidth+window.pageXOffset-this.getEl().width()-(t.indexOf("top")!==-1?30:0)),t.indexOf("top")!==-1&&(n=window.pageYOffset),t.indexOf("middle")!==-1&&(n=parseInt(.4*window.innerHeight)+window.pageYOffset),t.indexOf("bottom")!==-1&&(n=document.documentElement.clientHeight-window.innerHeight-window.pageYOffset,i="bottom"),this.getEl().css(i,n),this.getEl().css("left",e)},n.prototype.adjustZIndex=function(){this.el.css("z-index",o.getZIndexStr(o.comagicTopZIndex()))},o.apply(o.ns(e),{SitePhoneForm:n})}(window,"ComagicWidget.widget.sitephone.form"),function(t,e,n){function i(t,e,n){if(n&&this.apply(t,n),t&&e&&"object"==typeof e){var i;for(i in e)t[i]=e[i]}return t}function o(e,n){for(var i,o=n||t,r=e.split("."),s=0;i=r[s];s++)o=o[i]=o[i]||{};return o}var r=t.uLiB,s=r.util,a=ComagicWidget.widget.sitephone.form.SitePhoneForm,l=uLiB.$,c="M129.77103535631542,34.0002926281715C130.89783718631543,34.6145995081715,131.8562730163154,34.8985526281715,132.44618563631542,36.4770990481715C134.51106691631543,42.0025117981715,132.89323102631542,42.4838808181715,131.21341024631542,44.7675138181715C131.97815389631543,48.50872645817151,134.85592351631544,52.3061156581715,141.18096091631543,54.90935035817151C143.10241561631543,52.6373795581715,143.98891111631542,52.32262225817149,145.73176981631542,52.5703895581715C147.20710741631544,52.78012435817149,148.50297121631542,53.1217073581715,149.64396931631543,53.60655325817149C151.02480151631542,54.1933130581715,151.57724791631543,55.0368425581715,152.02841071631542,55.8339839581715C152.56395451631545,56.7802127581715,152.08139551631544,58.9361984581715,151.40728141631544,59.55014035817149C149.91491911631545,61.11196105817149,148.71465301631542,61.7285726581715,147.80459221631543,62.0555102581715C136.60789351631541,61.55101945817151,132.00890692631543,56.1632447581715,130.86605092631544,55.19138485817149C129.32029825631543,53.8769123581715,124.1055894163154,47.4633217681715,123.86562496631544,37.7914619881715C124.19768053631543,36.4853625781715,127.26902716631542,32.63625445817149,129.77103535631542,34.0002926281715C129.77103535631542,34.0002926281715,129.77103535631542,34.0002926281715,129.77103535631542,34.0002926281715",u="M141.468,46.473h1.933c0-2.137-1.731-3.868-3.867-3.868v1.935C140.6,44.539,141.468,45.407,141.468,46.473z",p="M149.2,46.473c0-5.342-4.327-9.67-9.666-9.67v1.934c4.265,0,7.733,3.472,7.733,7.736H149.2z",d="M139.534,31v1.934c7.461,0,13.532,6.074,13.532,13.539H155C155,37.928,148.075,31,139.534,31z",h="M0,0L80,0L65,25L80,50L0,50z",f="M0,0L80,0L80,50L0,50L15,25z",g="M0,0L95,0L0,95z",m=96,y=240,v=y-m,C=100,b=0,w=25,x=220,_=58,S=_/2,E=28,T=4,k=E-T,L=46,I=37,B=140,A=L,O=!0,N=function(){var t;return function(e){var n=t||this;return i(e,{css_theme:"main"}),t?n.updateInstance(e):(n.opts=e,n.base_color="#"+e.widget_color,n.opts.is_preview=n.opts.is_preview||!1,n.sitePhoneForm=new a(i(n.opts,{buttonCmp:n})),e.is_preview||s.haveToDisplayLabelOnDevice(e.banner_visibility)&&e.is_button_displayed?(n.makeSvg(),n.makeElements(),n.makeGroups(),n.initAttrs(),n.initCls(),n.setupPosition(),n.setupHandlers(),n.setupAnimation()):s.addSitePhoneCssLink(n.opts),t=n),t}}();N.prototype.isTabActive=!0,N.prototype.ctype=s.C.CW_SITE_PHONE_BUTTON,N.prototype.drawerArray=[],N.prototype.isDragging=!1,N.prototype.isHovered=!1,N.prototype.cls="call-button-handset",N.prototype.svgWOClosed=m,N.prototype.svgWOpened=y,N.prototype.skipCmp=!0,N.prototype.skinSizes={button:{width:m,height:C},ellipse:{width:170,height:65},corner:{width:95,height:95},bookmark:{width:80,height:65}},N.prototype.hoverCount=0,N.prototype.showForm=function(){this.sitePhoneForm.show(!0)},N.prototype.onHandsetClick=function(){this.showForm(!0)},N.prototype.makeSvg=function(){var t,e=this;e.s?(e.s.clear(),e.s.attr({width:e.skinSizes[e.opts.widget_skin].width,height:e.skinSizes[e.opts.widget_skin].height}),t=e.s):e.s=Snap(e.skinSizes[e.opts.widget_skin].width,e.skinSizes[e.opts.widget_skin].height),e.s.width=e.skinSizes[e.opts.widget_skin].width,e.s.height=e.skinSizes[e.opts.widget_skin].height,s.addCls(e.s,e.cls),e.cssSelector=s.getCssSelector(this.cls,!0,!0),e.detectCssLoad()},N.prototype.detectCssLoad=function(){if(!this.opts.is_preview){var t,e=this;e.s.attr("opacity",0),t=setInterval(function(){var n=l(e.cssSelector).css("position");"static"!==n&&(e.s.attr("opacity",null),clearInterval(t))},10)}},N.prototype.makeElements=function(){var t=this,e=this.s,n=t.opts.widget_place.split("_");switch(this.opts.widget_skin){case"button":var o=e.circle(B,A,E);break;case"ellipse":var r=e.rect(0,0,170,50,25,25);break;case"bookmark":var a=this.opts.widget_place.split("_").indexOf("left")===-1?e.path(f):e.path(h);break;case"corner":var l=e.path(g)}var m=e.path(c),y=e.path(u),v=e.path(p),C=e.path(d);switch(this.opts.widget_skin){case"button":var x,T;t.texts=s.getChunks(t.opts.widget_text,17);for(var L=[],I=0;I<t.texts.length;I++){switch(t.texts.length){case 1:x=b+(n.indexOf("right")!==-1?90:155),T=w+35;break;case 2:x=b+(n.indexOf("right")!==-1?150:95),T=w+25+20*I;break;case 3:x=b+(n.indexOf("right")!==-1?150:95),T=w+20+15*I}L.push(e.text(x,T,t.texts[I]))}L.attr=function(t,e){var n=t,i=e;this.forEach(function(t){t.attr(n,i)})},n.indexOf("right")!==-1?i(this,{s:e,drawerRect:e.rect(this.svgWOpened-40,20,0,_,S,S),drawerText:L,waveRadar:e.circle(B,A,k),roundButton:o,buttonHover:o.clone()}):i(this,{s:e,drawerRect:e.rect(0,0,0,_,S,S),drawerText:L,waveRadar:e.circle(B,A,k),roundButton:o,buttonHover:o.clone()});break;case"ellipse":var O=e.text(50,20,t.opts.widget_text?s.getChunks(t.opts.widget_text,17):"").selectAll("tspan");O.length>0&&(O.length>1?O.forEach(function(t,e){t.attr({x:50,y:5+15*(e+1),"font-family":"Arial","font-weight":"bold","font-size":"12px"})}):O[0].attr({x:50,y:30,"font-family":"Arial","font-weight":"bold","font-size":"12px"})),i(this,{s:e,roundedButton:r,chunkedTextLower:O,chunkedText:O.clone(),chunkedTextUpper:O.clone(),buttonHover:r.clone()});break;case"bookmark":i(this,{s:e,bookmarkButton:a,buttonHover:a.clone()});break;case"corner":var N,P,M,R;switch(t.opts.widget_place){case"left_top":N=45,P=45,M=22,R=23;break;case"right_top":N=48,P=46,M=73,R=23;break;case"right_bottom":M=73,R=73,N=54,P=54;break;case"left_bottom":M=22,R=73,N=42,P=57}i(this,{s:e,triangleButton:l,triangleButtonCircle:e.circle(M,R,18),triangleButtonText:e.text(N,P,t.opts.widget_text.toUpperCase()||""),buttonHover:l.clone()})}i(this,{handsetLower:m,handsetUpper:m.clone(),handsetMiddle:m.clone(),soundWaveArcSmallLower:y,soundWaveArcSmallUpper:y.clone(),soundWaveArcSmallMiddle:y.clone(),soundWaveArcMediumLower:v,soundWaveArcMediumUpper:v.clone(),soundWaveArcMediumMiddle:v.clone(),soundWaveArcLargeLower:C,soundWaveArcLargeUpper:C.clone(),soundWaveArcLargeMiddle:C.clone()})},N.prototype.makeGroups=function(){var t=this,e=t.s,n=e.g(t.handsetLower,t.handsetUpper,t.handsetMiddle),o=e.g(t.soundWaveArcSmallLower,t.soundWaveArcSmallUpper,t.soundWaveArcSmallMiddle),r=e.g(t.soundWaveArcMediumLower,t.soundWaveArcMediumUpper,t.soundWaveArcMediumMiddle),s=e.g(t.soundWaveArcLargeLower,t.soundWaveArcLargeUpper,t.soundWaveArcLargeMiddle);switch(this.opts.widget_skin){case"button":var a=e.g(t.drawerRect),l=e.g(t.waveRadar,t.roundButton,o,r,s,n,t.buttonHover);t.drawerText.forEach(function(t){a.add(t)}),window.drawerG=a,i(t,{drawerG:a,roundButtonG:l,group:e.g(a,l)});break;case"ellipse":i(t,{group:e.g(t.buttonHover)});break;case"bookmark":i(t,{group:e.g(t.buttonHover)});break;case"corner":i(t,{group:e.g(t.buttonHover)})}i(t,{handsetG:n,waveArcSmallG:o,waveArcMediumG:r,waveArcLargeG:s})},N.prototype.updateInstance=function(t){var e=this;switch(e.stopAllElementAnimations(),t.widget_skin!==e.opts.widget_skin?(e.opts=t,e.base_color="#"+e.opts.widget_color,e.makeSvg(),e.makeElements(),e.makeGroups(),e.initAttrs(),e.initCls(),e.setupPosition(),e.setupHandlers(),e.setupAnimation()):t.widget_place!==e.opts.widget_place&&(e.opts=t,e.base_color="#"+e.opts.widget_color,e.s.clear(),e.makeElements(),e.makeGroups(),e.initAttrs(),e.initCls(),e.setupPosition(),e.setupHandlers()),e.opts=t,e.base_color="#"+e.opts.widget_color,s.addSitePhoneCssLink(e.opts),e.opts.widget_skin){case"button":e.s.clear(),e.makeElements(),e.makeGroups(),e.initAttrs(),e.initCls(),e.setupAnimation(),e.setupPosition(),e.setupHandlers();break;case"ellipse":e.s.clear(),e.makeElements(),e.makeGroups(),e.initAttrs(),e.initCls();break;case"corner":e.triangleButtonText.attr("text",e.opts.widget_text.toUpperCase()||"")}},N.prototype.show=function(t,e,n){n=n||200,(this.opts.is_preview||s.haveToDisplayLabelOnDevice(this.opts.banner_visibility))&&this.s.animate({opacity:t?1:0},n,mina.easein,e)},N.prototype.initAttrs=function(){var t=this;switch(t.grad=!s.C.IS_TOUCH_DEVICE&&t.s.gradient("r()#fff-#fff"),!this.opts.is_preview&&l(this.cssSelector).css("z-index",s.comagicTopZIndex()+1),t.handsetLower.attr({transform:"translate(0, 1)"}),t.soundWaveArcSmallLower.attr({transform:"translate(0, 1)"}),t.soundWaveArcMediumLower.attr({transform:"translate(0, 1)"}),t.soundWaveArcLargeLower.attr({transform:"translate(0, 1)"}),t.handsetUpper.attr({transform:"translate(0, -1)"}),t.soundWaveArcSmallUpper.attr({transform:"translate(0, -1)"}),t.soundWaveArcMediumUpper.attr({transform:"translate(0, -1)"}),t.soundWaveArcLargeUpper.attr({transform:"translate(0, -1)"}),t.opts.widget_skin){case"button":var e;e=t.texts.length>1?t.opts.widget_place.indexOf("right")===-1?"start":"end":"middle",t.drawerText.attr({"font-family":"Arial","font-size":"14","font-weight":"bold",display:"none","text-anchor":e}),t.waveRadar.attr({strokeWidth:T,"fill-opacity":0}),t.buttonHover.attr({opacity:0}),t.roundButtonG.transform("translate(-90, 8)"),t.handsetG.attr({id:"handsetG"}),t.drawerArray.push(t.drawerRect.node),t.drawerText.forEach(function(e){t.drawerArray.push(e.node)}),t.drawerArray.push(t.buttonHover.node),t.drawerArray.push(t.group.node);break;case"ellipse":t.buttonHover.attr({opacity:0}),t.transformHandsetArcs("s0.75,0.75t-152,-30"),t.chunkedTextLower.forEach(function(t){t.attr({y:parseInt(t.attr("y"))+1})}),t.chunkedTextUpper.forEach(function(t){t.attr({y:parseInt(t.attr("y"))-1})});break;case"bookmark":t.buttonHover.attr({opacity:0}),this.opts.widget_place.split("_").indexOf("left")!==-1?t.transformHandsetArcs("s0.85,0.85t-125,-25"):t.transformHandsetArcs("s0.85,0.85t-110,-25");break;case"corner":switch(t.buttonHover.attr({opacity:0}),t.triangleButtonText.attr({"font-family":"Arial","font-size":"10","font-weight":"bold","text-anchor":"middle"}),t.opts.widget_place){case"left_top":t.triangleButtonText.transform("r315,45,45"),t.transformHandsetArcs("s0.66,0.66t-178,-35");break;case"right_top":t.triangleButton.transform("r90"),t.buttonHover.transform("r90"),t.triangleButtonText.transform("r45,48,46"),t.transformHandsetArcs("s0.66,0.66t-103,-35");break;case"right_bottom":t.triangleButton.transform("r180"),t.buttonHover.transform("r180"),t.triangleButtonText.transform("r315,54,54"),t.transformHandsetArcs("s0.66,0.66t-103,42");break;case"left_bottom":t.triangleButton.transform("r270"),t.buttonHover.transform("r270"),t.triangleButtonText.transform("r45,42,57"),t.transformHandsetArcs("s0.66,0.66t-178,42")}}},N.prototype.transformHandsetArcs=function(t){this.handsetG.transform(t),this.waveArcSmallG.transform(t),this.waveArcMediumG.transform(t),this.waveArcLargeG.transform(t)},N.prototype.initHandsetMiddleCls=function(t){s.addCls(this.soundWaveArcMediumMiddle,t),s.addCls(this.soundWaveArcSmallMiddle,t),s.addCls(this.soundWaveArcLargeMiddle,t),s.addCls(this.handsetMiddle,t)},N.prototype.initCls=function(){var t=this;switch(s.addSitePhoneCssLink(t.opts),s.addCls(t.soundWaveArcLargeUpper,"shadow-upper"),s.addCls(t.soundWaveArcLargeLower,"shadow-lower"),s.addCls(t.soundWaveArcMediumLower,"shadow-lower"),s.addCls(t.soundWaveArcMediumUpper,"shadow-upper"),s.addCls(t.soundWaveArcSmallLower,"shadow-lower"),s.addCls(t.soundWaveArcSmallUpper,"shadow-upper"),s.addCls(t.handsetLower,"shadow-lower"),s.addCls(t.handsetUpper,"shadow-upper"),!s.C.IS_TOUCH_DEVICE&&s.addCls(t.grad,"gradient"),t.opts.widget_skin){case"button":this.initHandsetMiddleCls("fill-handset-color"),t.roundButton.attr({fill:s.C.IS_TOUCH_DEVICE?t.base_color:t.grad}),s.addCls(t.waveRadar,"stroke-border-color"),s.addCls(t.drawerRect,"fill-rect-color"),s.addCls(t.drawerRect,"pointer"),t.drawerText.forEach(function(t){s.addCls(t,"fill-text-color"),s.addCls(t,"pointer")});break;case"ellipse":this.initHandsetMiddleCls("fill-handset-color"),t.roundedButton.attr({fill:s.C.IS_TOUCH_DEVICE?t.base_color:t.grad}),s.addCls(t.buttonHover,"pointer"),t.chunkedText.forEach(function(t){s.addCls(t,"fill-handset-color")}),t.chunkedTextLower.forEach(function(t){s.addCls(t,"shadow-lower")}),t.chunkedTextUpper.forEach(function(t){s.addCls(t,"shadow-upper")});break;case"bookmark":this.initHandsetMiddleCls("fill-handset-color"),t.bookmarkButton.attr({fill:s.C.IS_TOUCH_DEVICE?t.base_color:t.grad}),s.addCls(t.buttonHover,"pointer");break;case"corner":this.initHandsetMiddleCls("fill-center-color"),t.triangleButton.attr({fill:s.C.IS_TOUCH_DEVICE?t.base_color:t.grad}),s.addCls(t.buttonHover,"pointer"),s.addCls(t.triangleButtonCircle,"fill-handset-color"),s.addCls(t.triangleButtonText,"fill-handset-color")}},N.prototype.setupPosition=function(){if(!this.opts.is_preview){var t=this.opts.widget_place.split("_"),e=0,n=0,i="left",o="top",r={
ellipse:{x:10,y:10},bookmark:{x:0,y:10},corner:{x:0,y:0},button:{x:10,y:10}};if(t.indexOf("left")!==-1&&(e=r[this.opts.widget_skin].x),t.indexOf("right")!==-1&&(e=r[this.opts.widget_skin].x,i="right"),t.indexOf("top")!==-1&&(n=r[this.opts.widget_skin].y),t.indexOf("middle")!==-1&&(n="40%"),t.indexOf("bottom")!==-1&&(n=r[this.opts.widget_skin].y,o="bottom"),l(this.cssSelector).css(i,e),l(this.cssSelector).css(o,n),s.C.IS_TOUCH_DEVICE){var a=this;l(this.cssSelector).css("position","absolute"),setInterval(function(){a.getEl()&&a.setupZoomedPosition()},10)}}},N.prototype.setupZoomedPosition=function(){var t=this.opts.widget_place.split("_"),e=0,n=0,i="top";"button"===this.opts.widget_skin?(t.indexOf("left")!==-1&&(e=window.pageXOffset),t.indexOf("right")!==-1&&(e=window.innerWidth+window.pageXOffset-this.s.attr("width"))):(t.indexOf("left")!==-1&&(e=window.pageXOffset),t.indexOf("right")!==-1&&(e=window.innerWidth+window.pageXOffset-this.s.attr("width"))),t.indexOf("top")!==-1&&(n=window.pageYOffset),t.indexOf("middle")!==-1&&(n=parseInt(.4*window.innerHeight)+window.pageYOffset),t.indexOf("bottom")!==-1&&(n=document.documentElement.clientHeight-window.innerHeight-window.pageYOffset,i="bottom"),l(this.cssSelector).css(i,n),l(this.cssSelector).css("left",e)},N.prototype.setupHandlers=function(){var e=this;"button"===e.opts.widget_skin?(e.opts.widget_text&&e.drawerG.hover(e.onRoundButtonHover,e.onRoundButtonHout,e,e),e.opts.widget_text&&e.buttonHover.hover(e.onRoundButtonHover,e.onRoundButtonHout,e,e),!e.opts.is_preview&&e.buttonHover.click(e.onRoundButtonClick,this),!e.opts.is_preview&&e.drawerG.click(e.onHandsetClick,this)):!e.opts.is_preview&&e.buttonHover.click(e.onHandsetClick,this),t.onblur=e.onBlur.bind(e),t.onfocus=e.onFocus.bind(e),t.onresize=e.onResize.bind(e)},N.prototype.setupAnimation=function(){this.animationIntervalId&&this.stopAnimation(),"button"===this.opts.widget_skin&&this.opts.is_animation_enabled&&this.startAnimation()},N.prototype.onBlur=function(){this.isTabActive=!1},N.prototype.onFocus=function(){this.isTabActive=!0},N.prototype.onResize=function(){this.setupPosition()},N.prototype.onRoundButtonHover=function(t){return s.C.IS_TOUCH_DEVICE?void this.onHandsetClick():(this.isHovered=!0,void(s.arrayIndexOf(this.drawerArray,t.relatedTarget)!==-1&&(s.arrayIndexOf(this.drawerArray,t.target)!==-1||this.isHovered||this.isDragging)||(this.opts.is_animation_enabled&&this.stopAnimation(),s.isNotContainsOnlyWhitespaces(this.opts.widget_text)&&this.animateHover())))},N.prototype.onRoundButtonHout=function(t){this.isHovered=!1;var e=this;s.arrayIndexOf(e.drawerArray,t.relatedTarget)!==-1&&s.arrayIndexOf(e.drawerArray,t.target)!==-1||e.isDragging||(s.isNotContainsOnlyWhitespaces(this.opts.widget_text)&&e.resetHover(),e.opts.is_animation_enabled&&e.startAnimation())},N.prototype.onRoundButtonClick=function(){this.onHandsetClick()},N.prototype.animateHover=function(){var t=this,e=t.opts.widget_place.split("_");t.roundButton.animate({r:I},50,mina.easein),t.buttonHover.animate({r:I},50,mina.easein),t.hoverCount++,this.drawerText.length&&(e.indexOf("right")!==-1?(t.s.attr({width:this.svgWOpened}),t.roundButtonG.transform("translate(54, 8)"),t.drawerRect.transform("translate(0, 0)"),t.hoverCount<2&&t.opts.is_preview&&l(t.cssSelector).css("left",parseInt(l(t.cssSelector).css("left"))-v),O=!0,t.drawerRect.animate({width:x,x:b,height:_,y:w},150,mina.easein,function(){O&&t.drawerText.attr("display","block")})):(O=!0,t.s.attr({width:this.svgWOpened}),t.drawerRect.transform("translate(20, 25)"),t.drawerRect.animate({width:x,x:0,height:_,y:0},150,mina.easein,function(){O&&t.drawerText.attr("display","block")})))},N.prototype.resetHover=function(){var t=this,e=t.opts.widget_place.split("_");t.roundButton.animate({r:E},50,mina.easeout),t.buttonHover.animate({r:E},50,mina.easeout),this.drawerText.length&&(e.indexOf("right")!==-1?(t.drawerText.attr("display","none"),O=!1,t.drawerRect.animate({width:0,x:this.svgWOpened-40,height:_-10,y:w+5},150,mina.easeout,function(){O===!1&&t.drawerText.attr("display","none")}),setTimeout(function(){O||1!==t.hoverCount?t.hoverCount--:(t.roundButtonG.transform("translate(-90, 8)"),t.drawerRect.transform("translate(-145, 0)"),t.s.attr({width:t.svgWOClosed}),t.opts.is_preview&&l(t.cssSelector).css("left",parseInt(l(t.cssSelector).css("left"))+v),t.hoverCount--)},75)):(t.drawerText.attr("display","none"),O=!1,t.drawerRect.animate({width:0,x:20,height:_-10,y:0},150,mina.easeout,function(){O===!1&&t.drawerText.attr("display","none")}),setTimeout(function(){O||t.s.attr({width:t.svgWOClosed})},75)))},N.prototype.startAnimation=function(){var t=this;return t.animationIntervalId=window.setInterval(function(){t.isTabActive&&t.animate()},3300),!0},N.prototype.stopAnimation=function(){window.clearInterval(this.animationIntervalId)},N.prototype.stopAllElementAnimations=function(){var t=this,e=[t.waveRadar,t.handsetG,t.waveArcSmallG,t.waveArcMediumG,t.waveArcLargeG];t.inAnim=!1;for(var n=0;n<=e.length;n++)e[n]&&Object.keys(e[n].anims).length&&e[n].stop()},N.prototype.animate=function(){var t=this;t.inAnim=!0,t.waveRadar.animate({"stroke-opacity":0,r:L},600,function(){t.waveRadar.attr({"stroke-opacity":1,r:k});var e=140,n=48,i=25,o=200,r=50;setTimeout(function(){t.inAnim&&t.handsetG.animate({transform:"r"+i+","+e+","+n},o,function(){setTimeout(function(){t.inAnim&&t.handsetG.animate({transform:"r-"+i+","+e+","+n},1.5*o,function(){setTimeout(function(){t.inAnim&&t.handsetG.animate({transform:"r12.5,"+e+","+n},1.2*o,function(){t.handsetG.animate({transform:"r0,"+e+","+n},150,function(){setTimeout(function(){t.inAnim&&t.waveArcSmallG.animate({opacity:0},r,function(){t.waveArcSmallG.animate({opacity:1},r,function(){t.waveArcMediumG.animate({opacity:0},r,function(){t.waveArcMediumG.animate({opacity:1},r,function(){t.waveArcLargeG.animate({opacity:0},r,function(){t.waveArcLargeG.animate({opacity:1},r)})})})})})},400)})})},150)})},100)})},400)})},N.prototype.onDrag=function(t,e,n,i,o){var r=n-this.deltaX,a=i-this.deltaY,c=s.elementHeight(),u=s.elementWidth(),p=parseInt(this.s.attr("height")),d=parseInt(this.s.attr("width"));r=r<0?0:r,r=r>u-d?u-d:r,a=a<0?0:a,a=a>c-p?c-p:a,l(this.cssSelector).css("left",r),l(this.cssSelector).css("top",a)},N.prototype.onDragStart=function(t,e){this.isDragging=!0;var n=l(this.cssSelector).css("left"),i=l(this.cssSelector).css("top"),o="auto"===n?0:parseInt(n),r="auto"===i?0:parseInt(i);this.s.attr("position","absolute"),this.deltaX=t-o,this.deltaY=e-r},N.prototype.onDragEnd=function(){this.isDragging=!1,this.isHovered||s.isNotContainsOnlyWhitespaces(this.opts.widget_text)&&this.resetHover()},N.prototype.getEl=function(){return l(this.s)},N.prototype.getSitePhoneForm=function(){return this.sitePhoneForm},N.prototype.destroySitePhoneCssLink=function(){s.removeCssLinkById("comagic-sitephone-stylesheet")},i(o(e),{SitePhoneButton:N})}(window,"ComagicWidget.widget.sitephone.cmp"),function(t,e){var n,i,o,r=t.uLiB,s=r.util,a=uLiB.$,l=!1,c=function(t){!l&&t.isValid()&&(i.call(t.getValues()),t.setSendBtnDisabled(!0),l=!0)},u=function(t,e,n,i){switch(n){case"text-button-refresh-captcha":t.refreshCaptcha();break;case"tool-button-close":t.show(!1);break;case"common-button-send":c(t)}},p=function(t,e,n,i){13===i.keyCode&&"field"===n&&c(t)},d=function(t){return a.extend({banner_place:n.widget_place},t)},h={render:function(t,e){return n=t,i=e,a(document).ready(function(){o=new ComagicWidget.widget.sitephone.cmp.SitePhoneButton(a.extend({_onClick:u,_onKeyup:p},t))}),this},showForm:function(){o&&o.sitePhoneForm.show(!0)},onCallComplete:function(t){l=!1,new ComagicWidget.widget.common.cmp.PopupMessagePanel(d({code:t,ownerComponent:o.getSitePhoneForm(),renderTo:a("body"),cls:"sitephone-popup",afterClose:function(t){t.ownerComponent.deferredClearOnSubmit&&t.ownerComponent.clearValues(),t.ownerComponent.setSendBtnDisabled(!1),"020"===t.code&&t.ownerComponent.show(!1),t.ownerComponent.is_captcha_enabled&&t.ownerComponent.refreshCaptcha()}}))}};s.apply(s.ns(e),{View:h})}(window,"ComagicWidget.widget.sitephone"),function(t,e){var n,i,o,r,s,a,l,c,u,p=t.uLiB,d=p.util,h=ComagicWidget.settings.info(),f=ComagicWidget.settings.params("sitephone"),g=uLiB.$,m={1:"121",2:"122",3:"122",4:"124",5:"122",6:"122",7:"124",10:"122",11:"122"},y={"020":{title:"Ожидайте звонка",text:"Мы позвоним в течение минуты"},121:{title:"Неверно введен код",retry:"Попробовать ещё раз"},122:{title:"Система не отвечает",text:"В данный момент звонок невозможен"},124:{title:"Система не отвечает",text:"Повторите попытку через минуту"}},v=function(t){return i+t},C=function(e){return g.extend({sk:n,u:t.location.href},e)},b=function(t){var e={ph:t.phone};return l&&g.extend(e,{si:Comagic&&Comagic.getSessionId()||null,vi:Comagic&&Comagic.getVisitorId()||null}),c&&g.extend(e,{ci:t.captcha_key,ca:t.captcha_val}),e},w=function(t,e,n){g.ajax({url:v(t),jsonp:"cb",dataType:"jsonp",data:C(e),success:n})},x=function(){i&&w("/settings/",{},_)},_=function(t){t&&t.success&&(u=t.result,r=u.api_path,c=u.is_captcha_enabled,c&&(Comagic.Captcha=Comagic.Captcha||new ComagicCaptcha("https://"+o+"/"+(r||"api/aWJPFEaa3yjLjQWi2q5nrMF9gcZG9Rxf/"))),a=ComagicWidget.widget.sitephone.View.render(g.extend({comagic_web_url:o},u),T))},S=function(t){w("/call/",b(t),t.callback&&t.callback||E)},E=function(t){var e="020";t.success||(e=m[t.result]),a.onCallComplete(e,d.apply({success:t.success},y[e]))},T={init:function(t){var e=uLiB.util.sessionStorage();if(e){var r=e.getItem("comagic-widget:sitephone-settings");t=r?g.extend({},t,JSON.parse(r)):t}s=t,n=t.site_key,i=t.server_url,o=t.comagic_web_url,l=t.is_analytics_enabled||t.is_consultant_enabled,x()},call:S};T.init({site_key:h.key,server_url:f.server_url,comagic_web_url:h.web_host,is_analytics_enabled:f.is_analytics_enabled}),window.ComagicWidget=window.ComagicWidget||{},ComagicWidget.openSitePhonePanel=function(){a&&a.showForm()},ComagicWidget.sitePhoneCall=function(t){S&&S(t)}}(window,"ComagicWidget.widget.sitephone");
//# sourceMappingURL=maps/saved_resource(3).js.map
